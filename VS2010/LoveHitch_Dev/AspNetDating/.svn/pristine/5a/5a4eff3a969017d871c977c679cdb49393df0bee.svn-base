Type.registerNamespace("AspNetDating.Components");AspNetDating.Components.$create_AjaxHistoryOptions=function(){return{}};AspNetDating.Components.AjaxHistory=function(){AspNetDating.Components.AjaxHistory.initializeBase(this)};AspNetDating.Components.AjaxHistory.prototype={_timerCookie$1:0,_timerHandler$1:null,_iframeLoadHandler$1:null,_appLoadHandler$1:null,_endRequestHandler$1:null,_ignoreIFrame$1:false,_ignoreTimer$1:false,_historyFrame$1:null,_emptyPageURL$1:null,_dataID$1:null,_postbackID$1:null,_currentEntry$1:null,get_options:function(){return null},set_options:function(a){this._currentEntry$1=a.initialEntry?a.initialEntry:"";this._dataID$1=a.dataID;this._postbackID$1=a.postbackID;return a},_addEntry$1:function(a){this._ignoreTimer$1=true;if(this._historyFrame$1){this._ignoreIFrame$1=true;this._historyFrame$1.src=this._emptyPageURL$1+a}else this._setEntry$1(a)},dispose:function(){if(this._historyFrame$1){this._historyFrame$1.detachEvent("onload",this._iframeLoadHandler$1);this._historyFrame$1=null}if(this._timerCookie$1){window.clearTimeout(this._timerCookie$1);this._timerCookie$1=0}if(this._endRequestHandler$1){Sys.WebForms.PageRequestManager.getInstance().remove_endRequest(this._endRequestHandler$1);this._endRequestHandler$1=null}AspNetDating.Components.AjaxHistory.callBaseMethod(this,"dispose")},_getEntry$1:function(){var a=window.location.hash;if(a.length>=1&&a.charAt(0)==="#")a=a.substr(1);return a},initialize:function(){AspNetDating.Components.AjaxHistory.callBaseMethod(this,"initialize");this._appLoadHandler$1=Function.createDelegate(this,this._onAppLoad$1);Sys.Application.add_load(this._appLoadHandler$1)},_navigate$1:function(a){__doPostBack(this._postbackID$1,a)},_onAppLoad$1:function(){Sys.Application.remove_load(this._appLoadHandler$1);this._appLoadHandler$1=null;this._endRequestHandler$1=Function.createDelegate(this,this._onPageRequestManagerEndRequest$1);Sys.WebForms.PageRequestManager.getInstance().add_endRequest(this._endRequestHandler$1);if(window.navigator.userAgent.indexOf("MSIE")>=0){this._historyFrame$1=$get("__historyFrame");this._emptyPageURL$1=this._historyFrame$1.src+"?";this._iframeLoadHandler$1=Function.createDelegate(this,this._onIFrameLoad$1);this._historyFrame$1.attachEvent("onload",this._iframeLoadHandler$1)}this._timerHandler$1=Function.createDelegate(this,this._onTick$1);this._timerCookie$1=window.setTimeout(this._timerHandler$1,100);var a=this._getEntry$1();if(a!==this._currentEntry$1){this._currentEntry$1=a;this._navigate$1(a)}},_onIFrameLoad$1:function(){var a=this._historyFrame$1.contentWindow.location.search;if(a.length>=1&&a.charAt(0)==="?")a=a.substr(1);this._setEntry$1(a);if(this._ignoreIFrame$1){this._ignoreIFrame$1=false;return}this._navigate$1(a)},_onPageRequestManagerEndRequest$1:function(c,b){var a=b.get_dataItems()[this._dataID$1];a&&this._addEntry$1(a)},_onTick$1:function(){this._timerCookie$1=0;var a=this._getEntry$1();if(a!==this._currentEntry$1){if(!this._ignoreTimer$1){this._currentEntry$1=a;this._navigate$1(a)}}else this._ignoreTimer$1=false;this._timerCookie$1=window.setTimeout(this._timerHandler$1,100)},_setEntry$1:function(a){this._currentEntry$1=a;window.location.hash=a}};AspNetDating.Components.AjaxHistory.registerClass("AspNetDating.Components.AjaxHistory",Sys.Component);