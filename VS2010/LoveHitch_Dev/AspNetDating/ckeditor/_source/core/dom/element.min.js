CKEDITOR.dom.element=function(n,t){typeof n=="string"&&(n=(t?t.$:document).createElement(n)),CKEDITOR.dom.domObject.call(this,n)},CKEDITOR.dom.element.get=function(n){return n&&(n.$?n:new CKEDITOR.dom.element(n))},CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node,CKEDITOR.dom.element.createFromHtml=function(n,t){var i=new CKEDITOR.dom.element("div",t);return i.setHtml(n),i.getFirst().remove()},CKEDITOR.dom.element.setMarker=function(n,t,i,r){var u=t.getCustomData("list_marker_id")||t.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),f=t.getCustomData("list_marker_names")||t.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");return n[u]=t,f[i]=1,t.setCustomData(i,r)},CKEDITOR.dom.element.clearAllMarkers=function(n){for(var t in n)CKEDITOR.dom.element.clearMarkers(n,n[t],!0)},CKEDITOR.dom.element.clearMarkers=function(n,t,i){var u=t.getCustomData("list_marker_names"),f=t.getCustomData("list_marker_id"),r;for(r in u)t.removeCustomData(r);t.removeCustomData("list_marker_names"),i&&(t.removeCustomData("list_marker_id"),delete n[f])},CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:function(n){var t=this.$.className,i;t&&(i=new RegExp("(?:^|\\s)"+n+"(?:\\s|$)",""),i.test(t)||(t+=" "+n)),this.$.className=t||n},removeClass:function(n){var t=this.getAttribute("class"),i;t&&(i=new RegExp("(?:^|\\s+)"+n+"(?=\\s|$)","i"),i.test(t)&&(t=t.replace(i,"").replace(/^\s+/,""),t?this.setAttribute("class",t):this.removeAttribute("class")))},hasClass:function(n){var t=new RegExp("(?:^|\\s+)"+n+"(?=\\s|$)","");return t.test(this.getAttribute("class"))},append:function(n,t){return typeof n=="string"&&(n=this.getDocument().createElement(n)),t?this.$.insertBefore(n.$,this.$.firstChild):this.$.appendChild(n.$),n},appendHtml:function(n){if(this.$.childNodes.length){var t=new CKEDITOR.dom.element("div",this.getDocument());t.setHtml(n),t.moveChildren(this)}else this.setHtml(n)},appendText:function(n){this.$.text!=undefined?this.$.text+=n:this.append(new CKEDITOR.dom.text(n))},appendBogus:function(){for(var n=this.getLast();n&&n.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(n.getText());)n=n.getPrevious();n&&n.is&&n.is("br")||this.append(CKEDITOR.env.opera?this.getDocument().createText(""):this.getDocument().createElement("br"))},breakParent:function(n){var t=new CKEDITOR.dom.range(this.getDocument()),i;t.setStartAfter(this),t.setEndAfter(n),i=t.extractContents(),t.insertNode(this.remove()),i.insertAfterNode(this)},contains:CKEDITOR.env.ie||CKEDITOR.env.webkit?function(n){var t=this.$;return n.type!=CKEDITOR.NODE_ELEMENT?t.contains(n.getParent().$):t!=n.$&&t.contains(n.$)}:function(n){return!!(this.$.compareDocumentPosition(n.$)&16)},focus:function(){try{this.$.focus()}catch(n){}},getHtml:function(){var n=this.$.innerHTML;return CKEDITOR.env.ie?n.replace(/<\?[^>]*>/g,""):n},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var n=this.$.ownerDocument.createElement("div");return n.appendChild(this.$.cloneNode(!0)),n.innerHTML},setHtml:function(n){return this.$.innerHTML=n},setText:function(n){return CKEDITOR.dom.element.prototype.setText=this.$.innerText!=undefined?function(n){return this.$.innerText=n}:function(n){return this.$.textContent=n},this.setText(n)},getAttribute:function(){var n=function(n){return this.$.getAttribute(n,2)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(t){var i,r,u;switch(t){case"class":t="className";break;case"tabindex":return(i=n.call(this,t))!==0&&this.$.tabIndex===0&&(i=null),i;case"checked":return r=this.$.attributes.getNamedItem(t),u=r.specified?r.nodeValue:this.$.checked,u?"checked":null;case"hspace":return this.$.hspace;case"style":return this.$.style.cssText}return n.call(this,t)}:n}(),getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:CKEDITOR.env.ie?function(n){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(n)]}:function(n){return this.getWindow().$.getComputedStyle(this.$,"").getPropertyValue(n)},getDtd:function(){var n=CKEDITOR.dtd[this.getName()];return this.getDtd=function(){return n},n},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:CKEDITOR.env.ie?function(){var n=this.$.tabIndex;return n!==0||CKEDITOR.dtd.$tabIndex[this.getName()]||parseInt(this.getAttribute("tabindex"),10)===0||(n=-1),n}:CKEDITOR.env.webkit?function(){var n=this.$.tabIndex;return n==undefined&&(n=parseInt(this.getAttribute("tabindex"),10),isNaN(n)&&(n=-1)),n}:function(){return this.$.tabIndex},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var n=this.$.nodeName.toLowerCase(),t;return CKEDITOR.env.ie&&(t=this.$.scopeName,t!="HTML"&&(n=t.toLowerCase()+":"+n)),(this.getName=function(){return n})()},getValue:function(){return this.$.value},getFirst:function(n){var i=this.$.firstChild,t=i&&new CKEDITOR.dom.node(i);return t&&n&&!n(t)&&(t=t.getNext(n)),t},getLast:function(n){var i=this.$.lastChild,t=i&&new CKEDITOR.dom.node(i);return t&&n&&!n(t)&&(t=t.getPrevious(n)),t},getStyle:function(n){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(n)]},is:function(){for(var t=this.getName(),n=0;n<arguments.length;n++)if(arguments[n]==t)return!0;return!1},isEditable:function(){var n=this.getName(),t=!CKEDITOR.dtd.$nonEditable[n]&&(CKEDITOR.dtd[n]||CKEDITOR.dtd.span);return t&&t["#"]},isIdentical:function(n){var i,t;if(this.getName()!=n.getName())return!1;var r=this.$.attributes,u=n.$.attributes,f=r.length,e=u.length;if(!CKEDITOR.env.ie&&f!=e)return!1;for(i=0;i<f;i++)if(t=r[i],(!CKEDITOR.env.ie||t.specified&&t.nodeName!="_cke_expando")&&t.nodeValue!=n.getAttribute(t.nodeName))return!1;if(CKEDITOR.env.ie)for(i=0;i<e;i++)if(t=u[i],t.specified&&t.nodeName!="_cke_expando"&&t.nodeValue!=this.getAttribute(t.nodeName))return!1;return!0},isVisible:function(){var n=!!this.$.offsetHeight&&this.getComputedStyle("visibility")!="hidden",t,i;return n&&(CKEDITOR.env.webkit||CKEDITOR.env.opera)&&(t=this.getWindow(),!t.equals(CKEDITOR.document.getWindow())&&(i=t.$.frameElement)&&(n=new CKEDITOR.dom.element(i).isVisible())),n},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(){for(var i=this.$.attributes,t,n=0;n<i.length;n++){t=i[n];switch(t.nodeName){case"class":if(this.getAttribute("class"))return!0;case"_cke_expando":continue;default:if(t.specified)return!0}}return!1}:function(){var n=this.$.attributes;return n.length>1||n.length==1&&n[0].nodeName!="_cke_expando"},hasAttribute:function(n){var t=this.$.attributes.getNamedItem(n);return!!(t&&t.specified)},hide:function(){this.setStyle("display","none")},moveChildren:function(n,t){var i=this.$,r;if(n=n.$,i!=n)if(t)while(r=i.lastChild)n.insertBefore(i.removeChild(r),n.firstChild);else while(r=i.firstChild)n.appendChild(i.removeChild(r))},show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var n=function(n,t){return this.$.setAttribute(n,t),this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(t,i){return t=="class"?this.$.className=i:t=="style"?this.$.style.cssText=i:t=="tabindex"?this.$.tabIndex=i:t=="checked"?this.$.checked=i:n.apply(this,arguments),this}:n}(),setAttributes:function(n){for(var t in n)this.setAttribute(t,n[t]);return this},setValue:function(n){return this.$.value=n,this},removeAttribute:function(){var n=function(n){this.$.removeAttribute(n)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(t){t=="class"?t="className":t=="tabindex"&&(t="tabIndex"),n.call(this,t)}:n}(),removeAttributes:function(n){for(var t=0;t<n.length;t++)this.removeAttribute(n[t])},removeStyle:function(n){this.setStyle(n,""),this.$.style.removeAttribute&&this.$.style.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(n)),this.$.style.cssText||this.removeAttribute("style")},setStyle:function(n,t){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(n)]=t,this},setStyles:function(n){for(var t in n)this.setStyle(t,n[t]);return this},setOpacity:function(n){CKEDITOR.env.ie?(n=Math.round(n*100),this.setStyle("filter",n>=100?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+n+")")):this.setStyle("opacity",n)},unselectable:CKEDITOR.env.gecko?function(){this.$.style.MozUserSelect="none"}:CKEDITOR.env.webkit?function(){this.$.style.KhtmlUserSelect="none"}:function(){if(CKEDITOR.env.ie||CKEDITOR.env.opera){var t=this.$,n,i=0;for(t.unselectable="on";n=t.all[i++];)switch(n.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:n.unselectable="on"}}},getPositionedAncestor:function(){for(var n=this;n.getName()!="html";){if(n.getComputedStyle("position")!="static")return n;n=n.getParent()}return null},getDocumentPosition:function(n){var i=0,r=0,e=this.getDocument().getBody(),f=this.getDocument().$.compatMode=="BackCompat",h=this.getDocument(),y,p,t,c,w,u,s,b,l;if(document.documentElement.getBoundingClientRect){var a=this.$.getBoundingClientRect(),k=h.$,o=k.documentElement,d=o.clientTop||e.$.clientTop||0,g=o.clientLeft||e.$.clientLeft||0,v=!0;CKEDITOR.env.ie&&(y=h.getDocumentElement().contains(this),p=h.getBody().contains(this),v=f&&p||!f&&y),v&&(i=a.left+(!f&&o.scrollLeft||e.$.scrollLeft),i-=g,r=a.top+(!f&&o.scrollTop||e.$.scrollTop)-d)}else for(t=this,c=null;t&&!(t.getName()=="body"||t.getName()=="html");){for(i+=t.$.offsetLeft-t.$.scrollLeft,r+=t.$.offsetTop-t.$.scrollTop,t.equals(this)||(i+=t.$.clientLeft||0,r+=t.$.clientTop||0),u=c;u&&!u.equals(t);)i-=u.$.scrollLeft,r-=u.$.scrollTop,u=u.getParent();c=t,t=(w=t.$.offsetParent)?new CKEDITOR.dom.element(w):null}return n&&(s=this.getWindow(),b=n.getWindow(),!s.equals(b)&&s.$.frameElement&&(l=new CKEDITOR.dom.element(s.$.frameElement).getDocumentPosition(n),i+=l.x,r+=l.y)),document.documentElement.getBoundingClientRect||CKEDITOR.env.gecko&&!f&&(i+=this.$.clientLeft?1:0,r+=this.$.clientTop?1:0),{x:i,y:r}},scrollIntoView:function(n){var i=this.getWindow(),r=i.getViewPaneSize().height,t=r*-1,f,u;n?t+=r:(t+=this.$.offsetHeight||0,t+=parseInt(this.getComputedStyle("marginBottom")||0,10)||0),f=this.getDocumentPosition(),t+=f.y,t=t<0?0:t,u=i.getScrollPosition().y,(t>u||t<u-r)&&i.$.scrollTo(0,t)},setState:function(n){switch(n){case CKEDITOR.TRISTATE_ON:this.addClass("cke_on"),this.removeClass("cke_off"),this.removeClass("cke_disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass("cke_disabled"),this.removeClass("cke_off"),this.removeClass("cke_on");break;default:this.addClass("cke_off"),this.removeClass("cke_on"),this.removeClass("cke_disabled")}},getFrameDocument:function(){var n=this.$;try{n.contentWindow.document}catch(t){n.src=n.src,CKEDITOR.env.ie&&CKEDITOR.env.version<7&&window.showModalDialog('javascript:document.write("<script>window.setTimeout(function(){window.close();},50);<\/script>")')}return n&&new CKEDITOR.dom.document(n.contentWindow.document)},copyAttributes:function(n,t){var e=this.$.attributes,f,u,i,r;for(t=t||{},f=0;f<e.length;f++)(u=e[f],i=u.nodeName.toLowerCase(),i in t)||(i=="checked"&&(r=this.getAttribute(i))?n.setAttribute(i,r):(u.specified||CKEDITOR.env.ie&&u.nodeValue&&i=="value")&&(r=this.getAttribute(i),r===null&&(r=u.nodeValue),n.setAttribute(i,r)));this.$.style.cssText!==""&&(n.$.style.cssText=this.$.style.cssText)},renameNode:function(n){if(this.getName()!=n){var i=this.getDocument(),t=new CKEDITOR.dom.element(n,i);this.copyAttributes(t),this.moveChildren(t),this.$.parentNode.replaceChild(t.$,this.$),t.$._cke_expando=this.$._cke_expando,this.$=t.$}},getChild:function(n){var t=this.$;if(n.slice)while(n.length>0&&t)t=t.childNodes[n.shift()];else t=t.childNodes[n];return t?new CKEDITOR.dom.node(t):null},getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){this.on("contextmenu",function(n){n.data.getTarget().hasClass("cke_enable_context_menu")||n.data.preventDefault()})}});