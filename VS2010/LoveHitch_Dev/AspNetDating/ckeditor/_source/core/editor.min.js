(function(){function l(){var n,t=this._.commands,r=this.mode,i;for(i in t)n=t[i],n[n.modes[r]?"enable":"disable"]()}var r=0,t=function(){var n="editor"+ ++r;return CKEDITOR.instances&&CKEDITOR.instances[n]?t():n},i={},n=function(t){var r=t.config.customConfig,u;return r?(r=CKEDITOR.getUrl(r),u=i[r]||(i[r]={}),u.fn?(u.fn.call(t,t.config),CKEDITOR.getUrl(t.config.customConfig)!=r&&n(t)||t.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.load(r,function(){u.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){},n(t)}),!0):!1},u=function(t,i){t.on("customConfigLoaded",function(){if(i){if(i.on)for(var n in i.on)t.on(n,i.on[n]);CKEDITOR.tools.extend(t.config,i,!0),delete t.config.on}f(t)});i&&i.customConfig!=undefined&&(t.config.customConfig=i.customConfig),n(t)||t.fireOnce("customConfigLoaded")},f=function(n){var i=n.config.skin.split(","),t=i[0],r=CKEDITOR.getUrl(i[1]||"_source/skins/"+t+"/");n.skinName=t,n.skinPath=r,n.skinClass="cke_skin_"+t,n.fireOnce("configLoaded"),s(n)},e=function(n){CKEDITOR.lang.load(n.config.language,n.config.defaultLanguage,function(t,i){n.langCode=t,n.lang=CKEDITOR.tools.prototypedCopy(i),CKEDITOR.env.gecko&&CKEDITOR.env.version<10900&&n.lang.dir=="rtl"&&(n.lang.dir="ltr"),o(n)})},o=function(n){var r=n.config,t=r.plugins,u=r.extraPlugins,f=r.removePlugins,i;u&&(i=new RegExp("(?:^|,)(?:"+u.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),t=t.replace(i,"")+(","+u)),f&&(i=new RegExp("(?:^|,)(?:"+f.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),t=t.replace(i,"")),CKEDITOR.plugins.load(t.split(","),function(t){var u=[],f=[],s=[],e;n.plugins=t;for(e in t){var r=t[e],o=r.lang,c=CKEDITOR.plugins.getPath(e),i=null;r.path=c,o&&(i=CKEDITOR.tools.indexOf(o,n.langCode)>=0?n.langCode:o[0],r.lang[i]?(CKEDITOR.tools.extend(n.lang,r.lang[i]),i=null):s.push(CKEDITOR.getUrl(c+"lang/"+i+".js"))),f.push(i),u.push(r)}CKEDITOR.scriptLoader.load(s,function(){for(var e=["beforeInit","init","afterInit"],i,r,t=0;t<e.length;t++)for(i=0;i<u.length;i++)r=u[i],t===0&&f[i]&&r.lang&&CKEDITOR.tools.extend(n.lang,r.lang[f[i]]),r[e[t]]&&r[e[t]](n);n.fire("pluginsLoaded"),h(n)})})},s=function(n){CKEDITOR.skins.load(n,"editor",function(){e(n)})},h=function(n){var t=n.config.theme;CKEDITOR.themes.load(t,function(){var i=n.theme=CKEDITOR.themes.get(t);i.path=CKEDITOR.themes.getPath(t),i.build(n),n.config.autoUpdateElement&&c(n)})},c=function(n){var i=n.element,t;if(n.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&i.is("textarea")&&(t=i.$.form&&new CKEDITOR.dom.element(i.$.form),t)){function i(){n.updateElement()}t.on("submit",i);t.$.submit.nodeName||(t.$.submit=CKEDITOR.tools.override(t.$.submit,function(t){return function(){n.updateElement(),t.apply?t.apply(this,arguments):t()}}));n.on("destroy",function(){t.removeListener("submit",i)})}};CKEDITOR.editor.prototype._init=function(){var n=CKEDITOR.dom.element.get(this._.element),i=this._.instanceConfig;if(delete this._.element,delete this._.instanceConfig,this._.commands={},this._.styles=[],this.element=n,this.name=n&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(n.getId()||n.getNameAtt())||t(),this.name in CKEDITOR.instances)throw'[CKEDITOR.editor] The instance "'+this.name+'" already exists.';this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config),this.ui=new CKEDITOR.ui(this),this.focusManager=new CKEDITOR.focusManager(this),CKEDITOR.fire("instanceCreated",null,this);this.on("mode",l,null,null,1);u(this,i)}})(),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(n,t){return this._.commands[n]=new CKEDITOR.command(this,t)},addCss:function(n){this._.styles.push(n)},destroy:function(n){n||this.updateElement(),this.theme.destroy(this),this.fire("destroy"),CKEDITOR.remove(this),CKEDITOR.fire("instanceDestroyed",null,this)},execCommand:function(n,t){var i=this.getCommand(n),r={name:n,commandData:t,command:i};return i&&i.state!=CKEDITOR.TRISTATE_DISABLED&&this.fire("beforeCommandExec",r)!==!0&&(r.returnValue=i.exec(r.commandData),!i.async&&this.fire("afterCommandExec",r)!==!0)?r.returnValue:!1},getCommand:function(n){return this._.commands[n]},getData:function(){var n,t;return this.fire("beforeGetData"),n=this._.data,typeof n!="string"&&(t=this.element,n=t&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?t.is("textarea")?t.getValue():t.getHtml():""),n={dataValue:n},this.fire("getData",n),n.dataValue},getSnapshot:function(){var t=this.fire("getSnapshot"),n;return typeof t!="string"&&(n=this.element,n&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(t=n.is("textarea")?n.getValue():n.getHtml())),t},loadSnapshot:function(n){this.fire("loadSnapshot",n)},setData:function(n,t){if(t)this.on("dataReady",function(n){n.removeListener(),t.call(n.editor)});var i={dataValue:n};this.fire("setData",i),this._.data=i.dataValue,this.fire("afterSetData",i)},insertHtml:function(n){this.fire("insertHtml",n)},insertElement:function(n){this.fire("insertElement",n)},checkDirty:function(){return this.mayBeDirty&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this.mayBeDirty&&(this._.previousValue=this.getSnapshot())},updateElement:function(){var t=this.element,n;t&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(n=this.getData(),this.config.htmlEncodeOutput&&(n=CKEDITOR.tools.htmlEncode(n)),t.is("textarea")?t.setValue(n):t.setHtml(n))}});CKEDITOR.on("loaded",function(){var t=CKEDITOR.editor._pending,n;if(t)for(delete CKEDITOR.editor._pending,n=0;n<t.length;n++)t[n]._init()});