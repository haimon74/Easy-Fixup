CKEDITOR.dialog.add("paste",function(n){var t=CKEDITOR.env.isCustomDomain();return{title:n.lang.clipboard.title,minWidth:CKEDITOR.env.ie&&CKEDITOR.env.quirks?370:350,minHeight:CKEDITOR.env.quirks?250:245,htmlToLoad:'<!doctype html><script type="text/javascript">window.onload = function(){if ( '+CKEDITOR.env.ie+' ) document.body.contentEditable = "true";else document.designMode = "on";var iframe = new window.parent.CKEDITOR.dom.element( frameElement );var dialog = iframe.getCustomData( "dialog" );iframe.getFrameDocument().on( "keydown", function( e )\t\t\t\t\t\t{\t\t\t\t\t\t\tif ( e.data.getKeystroke() == 27 )\t\t\t\t\t\t\t\tdialog.hide();\t\t\t\t\t\t});};<\/script><style>body { margin: 3px; height: 95%; } <\/style><body><\/body>',onShow:function(){var u,r;CKEDITOR.env.ie&&(this.getParentEditor().document.getBody().$.contentEditable="false"),this.parts.dialog.$.offsetHeight;var i=this.getContentElement("general","editing_area").getElement(),n=CKEDITOR.dom.element.createFromHtml('<iframe src="javascript:void(0)" frameborder="0" allowtransparency="1"><\/iframe>'),f=this.getParentEditor().lang;n.setStyles({width:"346px",height:"130px","background-color":"white",border:"1px solid black"}),n.setCustomData("dialog",this),u=f.editorTitle.replace("%1",f.clipboard.title),CKEDITOR.env.ie?i.setHtml('<legend style="position:absolute;top:-1000000px;left:-1000000px;">'+CKEDITOR.tools.htmlEncode(u)+"<\/legend>"):(i.setHtml(""),i.setAttributes({role:"region",title:u}),n.setAttributes({role:"region",title:" "})),i.append(n),CKEDITOR.env.ie&&i.setStyle("height",n.$.offsetHeight+2+"px"),t?(CKEDITOR._cke_htmlToLoad=this.definition.htmlToLoad,n.setAttribute("src",'javascript:void( (function(){document.open();document.domain="'+document.domain+'";document.write( window.parent.CKEDITOR._cke_htmlToLoad );delete window.parent.CKEDITOR._cke_htmlToLoad;document.close();})() )')):(r=n.$.contentWindow.document,r.open(),r.write(this.definition.htmlToLoad),r.close())},onHide:function(){CKEDITOR.env.ie&&(this.getParentEditor().document.getBody().$.contentEditable="true")},onLoad:function(){(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&n.lang.dir=="rtl"&&this.parts.contents.setStyle("overflow","hidden")},onOk:function(){var n=this.getContentElement("general","editing_area").getElement(),t=n.getElementsByTag("iframe").getItem(0),i=this.getParentEditor(),r=t.$.contentWindow.document.body.innerHTML;setTimeout(function(){i.fire("paste",{html:r})},0)},contents:[{id:"general",label:n.lang.common.generalTab,elements:[{type:"html",id:"securityMsg",html:'<div style="white-space:normal;width:340px;">'+n.lang.clipboard.securityMsg+"<\/div>"},{type:"html",id:"pasteMsg",html:'<div style="white-space:normal;width:340px;">'+n.lang.clipboard.pasteMsg+"<\/div>"},{type:"html",id:"editing_area",style:"width: 100%; height: 100%;",html:"<fieldset><\/fieldset>",focus:function(){var t=this.getElement(),n=t.getElementsByTag("iframe");n.count()<1||(n=n.getItem(0),setTimeout(function(){n.$.contentWindow.focus()},500))}}]}]}});