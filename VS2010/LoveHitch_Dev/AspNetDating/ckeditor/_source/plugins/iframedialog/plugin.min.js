CKEDITOR.plugins.add("iframedialog",{requires:["dialog"],onLoad:function(){CKEDITOR.dialog.addIframe=function(n,t,i,r,u,f){var e={type:"iframe",src:i,width:"100%",height:"100%"},o;return typeof f=="function"&&(e.onContentLoad=f),o={title:t,minWidth:r,minHeight:u,contents:[{id:"iframe",label:t,expand:!0,elements:[e]}]},this.add(n,function(){return o})},function(){var n=function(n,t,i){var o,r;if(!(arguments.length<3)){var u=this._||(this._={}),s=t.onContentLoad&&CKEDITOR.tools.bind(t.onContentLoad,this),f=CKEDITOR.tools.cssLength(t.width),e=CKEDITOR.tools.cssLength(t.height);u.frameId=CKEDITOR.tools.getNextNumber()+"_iframe";n.on("load",function(){var n=CKEDITOR.document.getById(u.frameId),t=n.getParent();t.setStyles({width:f,height:e})});o={src:"%2",id:u.frameId,frameborder:0,allowtransparency:!0},r=[],typeof t.onContentLoad=="function"&&(o.onload="CKEDITOR.tools.callFunction(%1);"),CKEDITOR.ui.dialog.uiElement.call(this,n,t,r,"iframe",{width:f,height:e},o,""),i.push('<div style="width:'+f+";height:"+e+';" id="'+this.domId+'"><\/div>'),r=r.join("");n.on("show",function(){var n=CKEDITOR.document.getById(u.frameId),i=n.getParent(),f=CKEDITOR.tools.addFunction(s),e=r.replace("%1",f).replace("%2",CKEDITOR.tools.htmlEncode(t.src));i.setHtml(e)})}};n.prototype=new CKEDITOR.ui.dialog.uiElement,CKEDITOR.dialog.addUIElement("iframe",{build:function(t,i,r){return new n(t,i,r)}})}()}});