(function(){function r(n,t){var r=t.block||t.blockLimit,u;return!r||r.getName()=="body"?CKEDITOR.TRISTATE_OFF:(u=r.getComputedStyle("text-align").replace(i,""),!u&&this.isDefaultAlign||u==this.value)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF}function t(n){var t=n.editor.getCommand(this.name);t.state=r.call(this,n.editor,n.data.path),t.fire("state")}function n(n,t,i){var u,r;if(this.name=t,this.value=i,u=n.config.contentsLangDirection,this.isDefaultAlign=i=="left"&&u=="ltr"||i=="right"&&u=="rtl",r=n.config.justifyClasses,r){switch(i){case"left":this.cssClassName=r[0];break;case"center":this.cssClassName=r[1];break;case"right":this.cssClassName=r[2];break;case"justify":this.cssClassName=r[3]}this.cssClassRegex=new RegExp("(?:^|\\s+)(?:"+r.join("|")+")(?=$|\\s)")}}var i=/(-moz-|-webkit-|start|auto)/i;n.prototype={exec:function(n){var i=n.getSelection(),r,o;if(i){var s=i.createBookmarks(),u=i.getRanges(),f=this.cssClassName,e,t;for(r=u.length-1;r>=0;r--)for(e=u[r].createIterator();t=e.getNextParagraph();)t.removeAttribute("align"),f?(o=t.$.className=CKEDITOR.tools.ltrim(t.$.className.replace(this.cssClassRegex,"")),this.state!=CKEDITOR.TRISTATE_OFF||this.isDefaultAlign?o||t.removeAttribute("class"):t.addClass(f)):this.state!=CKEDITOR.TRISTATE_OFF||this.isDefaultAlign?t.removeStyle("text-align"):t.setStyle("text-align",this.value);n.focus(),n.forceNextSelectionCheck(),i.selectBookmarks(s)}}},CKEDITOR.plugins.add("justify",{init:function(i){var r=new n(i,"justifyleft","left"),u=new n(i,"justifycenter","center"),f=new n(i,"justifyright","right"),e=new n(i,"justifyblock","justify");i.addCommand("justifyleft",r),i.addCommand("justifycenter",u),i.addCommand("justifyright",f),i.addCommand("justifyblock",e),i.ui.addButton("JustifyLeft",{label:i.lang.justify.left,command:"justifyleft"}),i.ui.addButton("JustifyCenter",{label:i.lang.justify.center,command:"justifycenter"}),i.ui.addButton("JustifyRight",{label:i.lang.justify.right,command:"justifyright"}),i.ui.addButton("JustifyBlock",{label:i.lang.justify.block,command:"justifyblock"});i.on("selectionChange",CKEDITOR.tools.bind(t,r));i.on("selectionChange",CKEDITOR.tools.bind(t,f));i.on("selectionChange",CKEDITOR.tools.bind(t,u));i.on("selectionChange",CKEDITOR.tools.bind(t,e))},requires:["domiterator"]})})(),CKEDITOR.tools.extend(CKEDITOR.config,{justifyClasses:null});