CKEDITOR.dialog.add("anchor",function(n){var t=function(n,t,i){this.editMode=!0,this.editObj=i;var r=this.editObj.getAttribute("name");r?this.setValueOf("info","txtName",r):this.setValueOf("info","txtName","")};return{title:n.lang.anchor.title,minWidth:300,minHeight:60,onOk:function(){var r=this.getValueOf("info","txtName"),t=CKEDITOR.env.ie?n.document.createElement('<a name="'+CKEDITOR.tools.htmlEncode(r)+'">'):n.document.createElement("a"),i;return this.editMode&&(this.editObj.copyAttributes(t,{name:1}),this.editObj.moveChildren(t)),t.removeAttribute("_cke_saved_name"),t.setAttribute("name",r),i=n.createFakeElement(t,"cke_anchor","anchor"),this.editMode?(i.replace(this.fakeObj),n.getSelection().selectElement(i)):n.insertElement(i),!0},onShow:function(){this.editObj=!1,this.fakeObj=!1,this.editMode=!1;var r=n.getSelection(),i=r.getSelectedElement();i&&i.getAttribute("_cke_real_element_type")&&i.getAttribute("_cke_real_element_type")=="anchor"&&(this.fakeObj=i,i=n.restoreRealElement(this.fakeObj),t.apply(this,[n,r,i]),r.selectElement(this.fakeObj)),this.getContentElement("info","txtName").focus()},contents:[{id:"info",label:n.lang.anchor.title,accessKey:"I",elements:[{type:"text",id:"txtName",label:n.lang.anchor.name,validate:function(){return this.getValue()?!0:(alert(n.lang.anchor.errorName),!1)}}]}]}});