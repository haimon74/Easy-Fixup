CKEDITOR.plugins.add("popup"),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(n,t,i){t=t||"80%",i=i||"70%",typeof t=="string"&&t.length>1&&t.substr(t.length-1,1)=="%"&&(t=parseInt(window.screen.width*parseInt(t,10)/100,10)),typeof i=="string"&&i.length>1&&i.substr(i.length-1,1)=="%"&&(i=parseInt(window.screen.height*parseInt(i,10)/100,10)),t<640&&(t=640),i<420&&(i=420);var u=parseInt((window.screen.height-i)/2,10),f=parseInt((window.screen.width-t)/2,10),e="location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,width="+t+",height="+i+",top="+u+",left="+f,r=window.open("",null,e,!0);if(!r)return!1;try{r.moveTo(f,u),r.resizeTo(t,i),r.focus(),r.location.href=n}catch(o){r=window.open(n,null,e,!0)}return!0}});