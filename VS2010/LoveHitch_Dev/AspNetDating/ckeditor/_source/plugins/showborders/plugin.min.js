(function(){var n="cke_show_border",t,r=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th,","{","border : #d3d3d3 1px dotted","}"]:[".%1 table.%2,",".%1 table.%2 > tr > td, .%1 table.%2 > tr > th,",".%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,",".%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,",".%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th","{","border : #d3d3d3 1px dotted","}"]).join(""),i;t=r.replace(/%2/g,n).replace(/%1/g,"cke_show_borders "),i={preserveState:!0,editorFocus:!1,exec:function(n){this.toggleState(),this.refresh(n)},refresh:function(n){var t=this.state==CKEDITOR.TRISTATE_ON?"addClass":"removeClass";n.document.getBody()[t]("cke_show_borders")}},CKEDITOR.plugins.add("showborders",{requires:["wysiwygarea"],modes:{wysiwyg:1},init:function(n){var r=n.addCommand("showborders",i);r.canUndo=!1,n.config.startupShowBorders!==!1&&r.setState(CKEDITOR.TRISTATE_ON),n.addCss(t);n.on("mode",function(){r.state!=CKEDITOR.TRISTATE_DISABLED&&r.refresh(n)},null,null,100);n.on("contentDom",function(){r.state!=CKEDITOR.TRISTATE_DISABLED&&r.refresh(n)})},afterInit:function(t){var i=t.dataProcessor,r=i&&i.dataFilter,u=i&&i.htmlFilter;r&&r.addRules({elements:{table:function(t){var i=t.attributes,u=i["class"],r=parseInt(i.border,10);(!r||r<=0)&&(i["class"]=(u||"")+" "+n)}}}),u&&u.addRules({elements:{table:function(t){var i=t.attributes,r=i["class"];r&&(i["class"]=r.replace(n,"").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}});CKEDITOR.on("dialogDefinition",function(i){var r;if(i.editor==t&&(r=i.data.name,r=="table"||r=="tableProperties")){var f=i.data.definition,e=f.getContents("info"),u=e.get("txtBorder"),o=u.commit;u.commit=CKEDITOR.tools.override(o,function(t){return function(i,r){t.apply(this,arguments);var u=parseInt(this.getValue(),10);r[!u||u<=0?"addClass":"removeClass"](n)}})}})}})})();