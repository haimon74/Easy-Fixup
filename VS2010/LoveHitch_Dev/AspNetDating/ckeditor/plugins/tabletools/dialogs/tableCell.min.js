CKEDITOR.dialog.add("cellProperties",function(n){function r(){return{type:"html",html:"&nbsp;"}}function o(t,i){var r=function(){e(this),i(this)},u=function(){e(this)},f=function(n){n.on("ok",r);n.on("cancel",u)},e=function(n){n.removeListener("ok",r),n.removeListener("cancel",u)};if(n.execCommand(t),n._.storedDialogs.colordialog)f(n._.storedDialogs.colordialog);else CKEDITOR.on("dialogDefinition",function(n){if(n.data.name==t){var i=n.data.definition;n.removeListener(),i.onLoad=CKEDITOR.tools.override(i.onLoad,function(n){return function(){f(this),i.onLoad=n,typeof n=="function"&&n.call(this)}})}})}var i=n.lang.table,t=i.cell,f=n.lang.common,u=CKEDITOR.dialog.validate,e=/^(\d+(?:\.\d+)?)(px|%)$/,s=/^(\d+(?:\.\d+)?)px$/,h=CKEDITOR.tools.bind;return{title:t.title,minWidth:CKEDITOR.env.ie&&CKEDITOR.env.quirks?550:480,minHeight:CKEDITOR.env.ie?CKEDITOR.env.quirks?180:150:140,contents:[{id:"info",label:t.title,accessKey:"I",elements:[{type:"hbox",widths:["40%","5%","40%"],children:[{type:"vbox",padding:0,children:[{type:"hbox",widths:["70%","30%"],children:[{type:"text",id:"width",label:i.width,widths:["71%","29%"],labelLayout:"horizontal",validate:u.number(t.invalidWidth),setup:function(n){var t=e.exec(n.$.style.width);t&&this.setValue(t[1])},commit:function(n){var t=this.getDialog().getValueOf("info","widthType");n.$.style.width=this.getValue()!==""?this.getValue()+t:""},"default":""},{type:"select",id:"widthType",labelLayout:"horizontal",widths:["0%","100%"],label:"","default":"px",items:[[i.widthPx,"px"],[i.widthPc,"%"]],setup:function(n){var t=e.exec(n.$.style.width);t&&this.setValue(t[2])}}]},{type:"hbox",widths:["70%","30%"],children:[{type:"text",id:"height",label:i.height,"default":"",widths:["71%","29%"],labelLayout:"horizontal",validate:u.number(t.invalidHeight),setup:function(n){var t=s.exec(n.$.style.height);t&&this.setValue(t[1])},commit:function(n){n.$.style.height=this.getValue()!==""?this.getValue()+"px":""}},{type:"html",html:i.widthPx}]},r(),{type:"select",id:"wordWrap",labelLayout:"horizontal",label:t.wordWrap,widths:["50%","50%"],"default":"yes",items:[[t.yes,"yes"],[t.no,"no"]],commit:function(n){this.getValue()=="no"?n.setAttribute("noWrap","nowrap"):n.removeAttribute("noWrap")}},r(),{type:"select",id:"hAlign",labelLayout:"horizontal",label:t.hAlign,widths:["50%","50%"],"default":"",items:[[f.notSet,""],[i.alignLeft,"left"],[i.alignCenter,"center"],[i.alignRight,"right"]],setup:function(n){this.setValue(n.getAttribute("align")||"")},commit:function(n){this.getValue()?n.setAttribute("align",this.getValue()):n.removeAttribute("align")}},{type:"select",id:"vAlign",labelLayout:"horizontal",label:t.vAlign,widths:["50%","50%"],"default":"",items:[[f.notSet,""],[t.alignTop,"top"],[t.alignMiddle,"middle"],[t.alignBottom,"bottom"],[t.alignBaseline,"baseline"]],setup:function(n){this.setValue(n.getAttribute("vAlign")||"")},commit:function(n){this.getValue()?n.setAttribute("vAlign",this.getValue()):n.removeAttribute("vAlign")}}]},r(),{type:"vbox",padding:0,children:[{type:"select",id:"cellType",label:t.cellType,labelLayout:"horizontal",widths:["50%","50%"],"default":"td",items:[[t.data,"td"],[t.header,"th"]],setup:function(n){this.setValue(n.getName())},commit:function(n){n.renameNode(this.getValue())}},r(),{type:"text",id:"rowSpan",label:t.rowSpan,labelLayout:"horizontal",widths:["50%","50%"],"default":"",validate:u.integer(t.invalidRowSpan),setup:function(n){this.setValue(n.getAttribute("rowSpan")||"")},commit:function(n){this.getValue()?n.setAttribute("rowSpan",this.getValue()):n.removeAttribute("rowSpan")}},{type:"text",id:"colSpan",label:t.colSpan,labelLayout:"horizontal",widths:["50%","50%"],"default":"",validate:u.integer(t.invalidColSpan),setup:function(n){this.setValue(n.getAttribute("colSpan")||"")},commit:function(n){this.getValue()?n.setAttribute("colSpan",this.getValue()):n.removeAttribute("colSpan")}},r(),{type:"hbox",padding:0,widths:["80%","20%"],children:[{type:"text",id:"bgColor",label:t.bgColor,labelLayout:"horizontal",widths:["70%","30%"],"default":"",setup:function(n){this.setValue(n.getAttribute("bgColor")||"")},commit:function(n){this.getValue()?n.setAttribute("bgColor",this.getValue()):n.removeAttribute("bgColor")}},{type:"button",id:"bgColorChoose",label:t.chooseColor,style:"margin-left: 10px",onClick:function(){var n=this;o("colordialog",function(t){n.getDialog().getContentElement("info","bgColor").setValue(t.getContentElement("picker","selectedColor").getValue())})}}]},r(),{type:"hbox",padding:0,widths:["80%","20%"],children:[{type:"text",id:"borderColor",label:t.borderColor,labelLayout:"horizontal",widths:["70%","30%"],"default":"",setup:function(n){this.setValue(n.getStyle("border-color")||"")},commit:function(n){this.getValue()?n.setStyle("border-color",this.getValue()):n.removeStyle("border-color")}},{type:"button",id:"borderColorChoose",label:t.chooseColor,style:"margin-left: 10px",onClick:function(){var n=this;o("colordialog",function(t){n.getDialog().getContentElement("info","borderColor").setValue(t.getContentElement("picker","selectedColor").getValue())})}}]}]}]}]}],onShow:function(){var n=this;n.cells=CKEDITOR.plugins.tabletools.getSelectedCells(n._.editor.getSelection()),n.setupContent(n.cells[0])},onOk:function(){for(var t=this.cells,n=0;n<t.length;n++)this.commitContent(t[n])}}});