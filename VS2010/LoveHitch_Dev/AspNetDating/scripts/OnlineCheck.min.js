var updateOnlineTimer,updateOnlineLock=false,currentNotificationDivOffset=0,scrollSpeed=1,scrollSign=+1,scrollStarted=false;function InitializeOnlineCheck(a){updateOnlineTimer=setInterval("UpdateOnline()",a);UpdateOnline()}function ShowNotification(){document.getElementById("divNotificationInner").scrollTop=0;$get("divNotificationHeader").style.visibility="visible";$get("divNotificationInner").style.visibility="visible";if($get("ctl00_divNotification"))$get("ctl00_divNotification").style.visibility="visible";if($get("ctl00_ctl00_divNotification"))$get("ctl00_ctl00_divNotification").style.visibility="visible"}function HideNotification(){$get("divNotificationInner").innerHTML="";$get("divNotificationHeader").style.visibility="hidden";$get("divNotificationInner").style.visibility="hidden";if($get("ctl00_divNotification"))$get("ctl00_divNotification").style.visibility="hidden";if($get("ctl00_ctl00_divNotification"))$get("ctl00_ctl00_divNotification").style.visibility="hidden"}function UpdateOnline(){if(updateOnlineLock==true)return;updateOnlineLock=true;AspNetDating.Services.OnlineCheck.UpdateOnline(OnUpdateOnlineSucceeded,OnUpdateOnlineError)}function OnUpdateOnlineSucceeded(c){try{if(c==null)return;if(c.Notifications!=null&&c.Notifications.length){for(var d=0;d<c.Notifications.length;d++){var a=c.Notifications[d];if(a.Type=="NewMessageNotification"){var b='<table cellpadding="0" cellspacing="0" class="innerwrap"><tr><td class="tdleft" align="center" valign="middle"><img src="'+a.ThumbnailUrl+'" /></td><td class="tdright" valign="middle">'+a.Text+'</td></tr></table><div class="clear"></div>';b='<div class="NotificationInactive" onmouseover="OnNotificationMouseOver(this);" onmouseout="OnNotificationMouseOut(this);" onclick="window.location.href = \'ShowMessage.aspx?mid='+a.MessageId+"'\">"+b+"</div>";$get("divNotificationInner").innerHTML+=b;ShowNotification()}if(a.Type=="GenericEventNotification"){var b='<table cellpadding="0" cellspacing="0" class="innerwrap"><tr><td class="tdleft" align="center" valign="middle"><img src="'+a.ThumbnailUrl+'" /></td><td class="tdright" valign="middle">'+a.Text+'</td></tr></table><div class="clear"></div>';b='<div class="NotificationInactive" onmouseover="OnNotificationMouseOver(this);" onmouseout="OnNotificationMouseOut(this);" onclick="window.location.href = \''+a.RedirectUrl+"'\">"+b+"</div>";$get("divNotificationInner").innerHTML+=b;ShowNotification()}}if(!scrollStarted){scrollStarted=true;ScrollNotificationDiv()}}}finally{updateOnlineLock=false}}function OnNotificationMouseOver(a){a.className="NotificationHover"}function OnNotificationMouseOut(a){a.className="NotificationInactive"}function OnUpdateOnlineError(){}function ScrollNotificationDiv(){var b=document.getElementById("divNotificationInner"),a=1e3;if(b.scrollHeight>65){currentNotificationDivOffset=currentNotificationDivOffset+scrollSpeed*scrollSign;b.scrollTop=currentNotificationDivOffset;if(scrollSign==1&&currentNotificationDivOffset>b.scrollHeight-65){scrollSign=-1;a=1e3}else if(scrollSign==-1&&currentNotificationDivOffset<=0){scrollSign=+1;a=1e3}else a=currentNotificationDivOffset%65==0?1e3:50}setTimeout("ScrollNotificationDiv()",a)}InitializeOnlineCheck(6e4);