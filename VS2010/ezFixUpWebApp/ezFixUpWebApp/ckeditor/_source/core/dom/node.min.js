CKEDITOR.dom.node=function(n){if(n){switch(n.nodeType){case CKEDITOR.NODE_ELEMENT:return new CKEDITOR.dom.element(n);case CKEDITOR.NODE_TEXT:return new CKEDITOR.dom.text(n)}CKEDITOR.dom.domObject.call(this,n)}return this},CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject,CKEDITOR.NODE_ELEMENT=1,CKEDITOR.NODE_TEXT=3,CKEDITOR.NODE_COMMENT=8,CKEDITOR.NODE_DOCUMENT_FRAGMENT=11,CKEDITOR.POSITION_IDENTICAL=0,CKEDITOR.POSITION_DISCONNECTED=1,CKEDITOR.POSITION_FOLLOWING=2,CKEDITOR.POSITION_PRECEDING=4,CKEDITOR.POSITION_IS_CONTAINED=8,CKEDITOR.POSITION_CONTAINS=16,CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(n,t){return n.append(this,t),n},clone:function(n,t){var r=this.$.cloneNode(n),i;return t||(i=function(n){var r,t;if(n.nodeType==CKEDITOR.NODE_ELEMENT)for(n.removeAttribute("id",!1),n.removeAttribute("_cke_expando",!1),r=n.childNodes,t=0;t<r.length;t++)i(r[t])},i(r)),new CKEDITOR.dom.node(r)},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(n){return n.$.parentNode.insertBefore(this.$,n.$.nextSibling),n},insertBefore:function(n){return n.$.parentNode.insertBefore(this.$,n.$),n},insertBeforeMe:function(n){return this.$.parentNode.insertBefore(n.$,this.$),n},getAddress:function(n){for(var e=[],o=this.getDocument().$.documentElement,t=this.$,u,f,r,i;t&&t!=o;){for(u=t.parentNode,f=-1,r=0;r<u.childNodes.length;r++)if((i=u.childNodes[r],!n||i.nodeType!=3||!i.previousSibling||i.previousSibling.nodeType!=3)&&(f++,i==t))break;e.unshift(f),t=t.parentNode}return e},getDocument:function(){var n=new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument);return(this.getDocument=function(){return n})()},getIndex:function(){for(var t=this.$,n=t.parentNode&&t.parentNode.firstChild,i=-1;n;){if(i++,n==t)return i;n=n.nextSibling}return-1},getNextSourceNode:function(n,t,i){var f,r,u;if(i&&!i.call&&(f=i,i=function(n){return!n.equals(f)}),r=!n&&this.getFirst&&this.getFirst(),!r){if(this.type==CKEDITOR.NODE_ELEMENT&&i&&i(this,!0)===!1)return null;r=this.getNext()}while(!r&&(u=(u||this).getParent())){if(i&&i(u,!0)===!1)return null;r=u.getNext()}return r?i&&i(r)===!1?null:t&&t!=r.type?r.getNextSourceNode(!1,t,i):r:null},getPreviousSourceNode:function(n,t,i){var f,r,u;if(i&&!i.call&&(f=i,i=function(n){return!n.equals(f)}),r=!n&&this.getLast&&this.getLast(),!r){if(this.type==CKEDITOR.NODE_ELEMENT&&i&&i(this,!0)===!1)return null;r=this.getPrevious()}while(!r&&(u=(u||this).getParent())){if(i&&i(u,!0)===!1)return null;r=u.getPrevious()}return r?i&&i(r)===!1?null:t&&r.type!=t?r.getPreviousSourceNode(!1,t,i):r:null},getPrevious:function(n){var t=this.$,i;do t=t.previousSibling,i=t&&new CKEDITOR.dom.node(t);while(i&&n&&!n(i));return i},getNext:function(n){var t=this.$,i;do t=t.nextSibling,i=t&&new CKEDITOR.dom.node(t);while(i&&n&&!n(i));return i},getParent:function(){var n=this.$.parentNode;return n&&n.nodeType==1?new CKEDITOR.dom.node(n):null},getParents:function(n){var t=this,i=[];do i[n?"push":"unshift"](t);while(t=t.getParent());return i},getCommonAncestor:function(n){if(n.equals(this))return this;if(n.contains&&n.contains(this))return n;var t=this.contains?this:this.getParent();do if(t.contains(n))return t;while(t=t.getParent());return null},getPosition:function(n){var t=this.$,r=n.$,i;if(t.compareDocumentPosition)return t.compareDocumentPosition(r);if(t==r)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&n.type==CKEDITOR.NODE_ELEMENT){if(t.contains){if(t.contains(r))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(r.contains(t))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in t)return t.sourceIndex<0||r.sourceIndex<0?CKEDITOR.POSITION_DISCONNECTED:t.sourceIndex<r.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}var u=this.getAddress(),f=n.getAddress(),e=Math.min(u.length,f.length);for(i=0;i<=e-1;i++)if(u[i]!=f[i]){if(i<e)return u[i]<f[i]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;break}return u.length<f.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(n,t){var i=this.$;for(t||(i=i.parentNode);i;){if(i.nodeName&&i.nodeName.toLowerCase()==n)return new CKEDITOR.dom.node(i);i=i.parentNode}return null},hasAscendant:function(n,t){var i=this.$;for(t||(i=i.parentNode);i;){if(i.nodeName&&i.nodeName.toLowerCase()==n)return!0;i=i.parentNode}return!1},move:function(n,t){n.append(this.remove(),t)},remove:function(n){var t=this.$,i=t.parentNode,r;if(i){if(n)for(;r=t.firstChild;)i.insertBefore(t.removeChild(r),t);i.removeChild(t)}return this},replace:function(n){this.insertBefore(n),n.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var n,t,i;this.getFirst&&(n=this.getFirst());){if(n.type==CKEDITOR.NODE_TEXT)if(t=CKEDITOR.tools.ltrim(n.getText()),i=n.getLength(),t)t.length<i&&(n.split(i-t.length),this.$.removeChild(this.$.firstChild));else{n.remove();continue}break}},rtrim:function(){for(var n,t,i;this.getLast&&(n=this.getLast());){if(n.type==CKEDITOR.NODE_TEXT)if(t=CKEDITOR.tools.rtrim(n.getText()),i=n.getLength(),t)t.length<i&&(n.split(t.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild));else{n.remove();continue}break}CKEDITOR.env.ie||CKEDITOR.env.opera||(n=this.$.lastChild,n&&n.type==1&&n.nodeName.toLowerCase()=="br"&&n.parentNode.removeChild(n))}});