(function(){function f(n,t,i){var u=this.document,s,o;if(!CKEDITOR.env.ie||!u.getById("cke_pastebin")){var f=this.getSelection(),e=new CKEDITOR.dom.range(u),r=new CKEDITOR.dom.element(t=="text"?"textarea":"div",u);r.setAttribute("id","cke_pastebin"),CKEDITOR.env.webkit&&r.append(u.createText("Â ")),u.getBody().append(r),CKEDITOR.env.ie||t=="html"||r.setStyles({position:"absolute",left:"-1000px",top:f.getStartElement().getDocumentPosition().y+"px",width:"1px",height:"1px",overflow:"hidden"}),s=f.createBookmarks(),t=="text"?CKEDITOR.env.ie?(o=u.getBody().$.createTextRange(),o.moveToElementText(r.$),o.execCommand("Paste"),n.data.preventDefault()):(u.$.designMode="off",r.$.focus()):(e.setStartAt(r,CKEDITOR.POSITION_AFTER_START),e.setEndAt(r,CKEDITOR.POSITION_BEFORE_END),e.select(!0)),window.setTimeout(function(){t!="text"||CKEDITOR.env.ie||(u.$.designMode="on"),r.remove();var n;r=CKEDITOR.env.webkit&&(n=r.getFirst())&&n.is&&n.hasClass("Apple-style-span")?n:r,f.selectBookmarks(s),i(r["get"+(t=="text"?"Value":"Html")]())},0)}}var t=function(n,t){var i=n.document,r=i.getBody(),u=!1,f=function(){u=!0};r.on(t,f);return i.$.execCommand(t),r.removeListener(t,f),u},u=CKEDITOR.env.ie?function(n,i){return t(n,i)}:function(n,t){try{return n.document.$.execCommand(t)}catch(i){return!1}},n=function(n){this.type=n,this.canUndo=this.type=="cut"},i,r;n.prototype={exec:function(n){var t=u(n,this.type);return t||alert(n.lang.clipboard[this.type+"Error"]),t}},i={canUndo:!1,exec:CKEDITOR.env.ie?function(n){return n.focus(),!n.document.getBody().fire("beforepaste")&&!t(n,"paste")?(n.fire("pasteDialog"),!1):void 0}:function(n){try{if(!n.document.getBody().fire("beforepaste")&&!n.document.$.execCommand("Paste",!1,null))throw 0;}catch(t){return setTimeout(function(){n.fire("pasteDialog")},0),!1}}},r=function(n){var t,i;if(this.mode=="wysiwyg")switch(n.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:t=this.document.getBody(),!CKEDITOR.env.ie&&t.fire("beforepaste")?n.cancel():(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.version<10900)&&t.fire("paste");return;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:i=this,this.fire("saveSnapshot"),setTimeout(function(){i.fire("saveSnapshot")},0)}},CKEDITOR.plugins.add("clipboard",{requires:["htmldataprocessor"],init:function(t){function e(n,i,r,u){var f=t.lang[i];t.addCommand(i,r),t.ui.addButton(n,{label:f,command:i}),t.addMenuItems&&t.addMenuItem(i,{label:f,command:i,group:"clipboard",order:u})}var u,o;t.on("paste",function(n){var i=n.data;i.html?t.insertHtml(i.html):i.text&&t.insertText(i.text)},null,null,1e3);t.on("pasteDialog",function(){setTimeout(function(){t.openDialog("paste")},0)});e("Cut","cut",new n("cut"),1),e("Copy","copy",new n("copy"),4),e("Paste","paste",i,8),CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js"));t.on("key",r,t);u=t.config.forcePasteAsPlainText?"text":"html";t.on("contentDom",function(){var n=t.document.getBody();n.on(u=="text"&&CKEDITOR.env.ie?"paste":"beforepaste",function(n){o||f.call(t,n,u,function(n){if(n){var i={};i[u]=n,t.fire("paste",i)}})})});if(t.contextMenu){function n(n){CKEDITOR.env.ie&&n=="Paste"&&(o=1);var i=t.document.$.queryCommandEnabled(n)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;return o=0,i}t.contextMenu.addListener(function(){return{cut:n("Cut"),copy:n("Cut"),paste:CKEDITOR.env.webkit?CKEDITOR.TRISTATE_OFF:n("Paste")}})}}})})();