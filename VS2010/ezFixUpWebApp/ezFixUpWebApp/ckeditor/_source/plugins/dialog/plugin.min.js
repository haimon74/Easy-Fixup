CKEDITOR.DIALOG_RESIZE_NONE=0,CKEDITOR.DIALOG_RESIZE_WIDTH=1,CKEDITOR.DIALOG_RESIZE_HEIGHT=2,CKEDITOR.DIALOG_RESIZE_BOTH=3,function(){function o(n){return!!this._.tabs[n][0].$.offsetHeight}function s(){for(var r=this._.currentTabId,t=this._.tabIdList.length,i=CKEDITOR.tools.indexOf(this._.tabIdList,r)+t,n=i-1;n>i-t;n--)if(o.call(this,this._.tabIdList[n%t]))return this._.tabIdList[n%t];return null}function h(){for(var r=this._.currentTabId,t=this._.tabIdList.length,i=CKEDITOR.tools.indexOf(this._.tabIdList,r),n=i+1;n<i+t;n++)if(o.call(this,this._.tabIdList[n%t]))return this._.tabIdList[n%t];return null}function c(n,t,i){this.element=t,this.focusIndex=i,this.isFocusable=function(){return!t.getAttribute("disabled")&&t.isVisible()},this.focus=function(){n._.currentFocusIndex=this.focusIndex,this.element.focus()};t.on("keydown",function(n){n.data.getKeystroke()in{32:1,13:1}&&this.fire("click")});t.on("focus",function(){this.fire("mouseover")});t.on("blur",function(){this.fire("mouseout")})}function a(n,t){this._={dialog:n},CKEDITOR.tools.extend(this,t)}function b(t){function e(n){var e=t.getSize(),o=CKEDITOR.document.getWindow().getViewPaneSize(),s=n.data.$.screenX,h=n.data.$.screenY,a=s-f.x,v=h-f.y,c,l;f={x:s,y:h},i.x+=a,i.y+=v,c=i.x+r[3]<u?-r[3]:i.x-r[1]>o.width-e.width-u?o.width-e.width+r[1]:i.x,l=i.y+r[0]<u?-r[0]:i.y-r[2]>o.height-e.height-u?o.height-e.height+r[2]:i.y,t.move(c,l),n.data.preventDefault()}function o(){if(CKEDITOR.document.removeListener("mousemove",e),CKEDITOR.document.removeListener("mouseup",o),CKEDITOR.env.ie6Compat){var t=n.getChild(0).getFrameDocument();t.removeListener("mousemove",e),t.removeListener("mouseup",o)}}var f=null,i=null,h=t.getElement().getFirst(),s=t.getParentEditor(),u=s.config.dialog_magnetDistance,r=s.skin.margins||[0,0,0,0];typeof u=="undefined"&&(u=20);t.parts.title.on("mousedown",function(r){t._.updateSize=!0,f={x:r.data.$.screenX,y:r.data.$.screenY};CKEDITOR.document.on("mousemove",e);CKEDITOR.document.on("mouseup",o);if(i=t.getPosition(),CKEDITOR.env.ie6Compat){var u=n.getChild(0).getFrameDocument();u.on("mousemove",e);u.on("mouseup",o)}r.data.preventDefault()},t)}function k(t){var s=t.definition,f=s.minWidth||0,e=s.minHeight||0,h=s.resizable,r=t.getParentEditor().skin.margins||[0,0,0,0],o=null,i=null,u=t._.editor.config.magnetDistance}CKEDITOR.dialog=function(t,i){function y(n){var t=u._.focusList,f=n?1:-1,r,i;if(!(t.length<1)){for(r=(u._.currentFocusIndex+f+t.length)%t.length,i=r;!t[i].isFocusable();)if(i=(i+f+t.length)%t.length,i==r)break;t[i].focus(),t[i].type=="text"&&t[i].select()}}function o(n){var t,r,i;u==CKEDITOR.dialog._.currentTop&&(t=n.data.getKeystroke(),e=0,t==9||t==CKEDITOR.SHIFT+9?(r=t==CKEDITOR.SHIFT+9,u._.tabBarMode?(i=r?s.call(u):h.call(u),u.selectPage(i),u._.tabs[i][0].focus()):y(!r),e=1):t!=CKEDITOR.ALT+121||u._.tabBarMode?(t==37||t==39)&&u._.tabBarMode&&(i=t==37?s.call(u):h.call(u),u.selectPage(i),u._.tabs[i][0].focus(),e=1):(u._.tabBarMode=!0,u._.tabs[u._.currentTabId][0].focus(),e=1),e&&(n.stop(),n.data.preventDefault()))}function d(n){e&&n.data.preventDefault()}var r=CKEDITOR.dialog._.dialogDefinitions[i],nt,a,u,v,e,f,g,tt,p,c;if(r=CKEDITOR.tools.extend(r(t),w),r=CKEDITOR.tools.clone(r),r=new l(this,r),this.definition=r=CKEDITOR.fire("dialogDefinition",{name:i,definition:r},t).definition,nt=CKEDITOR.document,a=t.theme.buildDialog(t),this._={editor:t,element:a.element,name:i,contentSize:{width:0,height:0},size:{width:0,height:0},updateSize:!1,contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=a.parts,this.parts.dialog.setStyles({position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,left:0,visibility:"hidden"}),CKEDITOR.event.call(this),r.onLoad)this.on("load",r.onLoad);if(r.onShow)this.on("show",r.onShow);if(r.onHide)this.on("hide",r.onHide);if(r.onOk)this.on("ok",function(n){r.onOk.call(this,n)===!1&&(n.data.hide=!1)});if(r.onCancel)this.on("cancel",function(n){r.onCancel.call(this,n)===!1&&(n.data.hide=!1)});u=this,v=function(n){var t=u._.contents,r=!1,i,f;for(i in t)for(f in t[i])if(r=n.call(this,t[i][f]),r)return};this.on("ok",function(n){v(function(t){if(t.validate){var i=t.validate(this);if(typeof i=="string"&&(alert(i),i=!1),i===!1)return t.select?t.select():t.focus(),n.data.hide=!1,n.stop(),!0}})},this,null,0);this.on("cancel",function(n){v(function(i){if(i.isChanged())return confirm(t.lang.common.confirmCancel)||(n.data.hide=!1),!0})},this,null,0);this.parts.close.on("click",function(){this.fire("cancel",{hide:!0}).hide!==!1&&this.hide()},this);this.on("show",function(){CKEDITOR.document.on("keydown",o,this,null,0);if(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)CKEDITOR.document.on("keypress",d,this);if(CKEDITOR.env.ie6Compat){var t=n.getChild(0).getFrameDocument();t.on("keydown",o,this,null,0)}});this.on("hide",function(){CKEDITOR.document.removeListener("keydown",o),(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)&&CKEDITOR.document.removeListener("keypress",d)});this.on("iframeAdded",function(n){var t=new CKEDITOR.dom.document(n.data.iframe.$.contentWindow.document);t.on("keydown",o,this,null,0)});this.on("show",function(){var r,n,i;this._.hasFocus||(this._.currentFocusIndex=-1,y(!0),this._.editor.mode=="wysiwyg"&&CKEDITOR.env.ie&&(r=t.document.$.selection,n=r.createRange(),n&&(n.parentElement&&n.parentElement().ownerDocument==t.document.$||n.item&&n.item(0).ownerDocument==t.document.$)&&(i=document.body.createTextRange(),i.moveToElementText(this.getElement().getFirst().$),i.collapse(!0),i.select())))},this,null,4294967295);if(CKEDITOR.env.ie6Compat)this.on("load",function(){var n=this.getElement(),t=n.getFirst();t.remove(),t.appendTo(n)},this);for(b(this),k(this),new CKEDITOR.dom.text(r.title,CKEDITOR.document).appendTo(this.parts.title),f=0;f<r.contents.length;f++)this.addPage(r.contents[f]);g=/cke_dialog_tab(\s|$|_)/,tt=/cke_dialog_tab(\s|$)/;this.parts.tabs.on("click",function(n){var t=n.data.getTarget(),r=t,i;(g.test(t.$.className)||t.getName()=="a")&&(i=t.$.id.substr(0,t.$.id.lastIndexOf("_")),this.selectPage(i),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,y(!0)),n.data.preventDefault())},this);for(p=[],c=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:r.buttons},p).getChild(),this.parts.footer.setHtml(p.join("")),f=0;f<c.length;f++)this._.buttons[c[f].id]=c[f];CKEDITOR.skins.load(t,"dialog")},CKEDITOR.dialog.prototype={resize:function(){return function(n,t){this._.contentSize&&this._.contentSize.width==n&&this._.contentSize.height==t||(CKEDITOR.dialog.fire("resize",{dialog:this,skin:this._.editor.skinName,width:n,height:t},this._.editor),this._.contentSize={width:n,height:t},this._.updateSize=!0)}}(),getSize:function(){if(!this._.updateSize)return this._.size;var t=this._.element.getFirst(),n=this._.size={width:t.$.offsetWidth||0,height:t.$.offsetHeight||0};return this._.updateSize=!n.width||!n.height,n},move:function(){var n;return function(t,i){var u=this._.element.getFirst(),r;(n===undefined&&(n=u.getComputedStyle("position")=="fixed"),n&&this._.position&&this._.position.x==t&&this._.position.y==i)||(this._.position={x:t,y:i},n||(r=CKEDITOR.document.getWindow().getScrollPosition(),t+=r.x,i+=r.y),u.setStyles({left:(t>0?t:0)+"px",top:(i>0?i:0)+"px"}))}}(),getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var u=this._.editor,i,n,t,r,f,o;if(u.mode=="wysiwyg"&&CKEDITOR.env.ie&&(i=u.getSelection(),i&&i.lock()),n=this._.element,t=this.definition,!n.getParent()||!n.getParent().equals(CKEDITOR.document.getBody())){if(n.appendTo(CKEDITOR.document.getBody()),CKEDITOR.env.gecko&&CKEDITOR.env.version<10900&&(r=this.parts.dialog,r.setStyle("position","absolute"),setTimeout(function(){r.setStyle("position","fixed")},0)),this.resize(t.minWidth,t.minHeight),this.selectPage(this.definition.contents[0].id),this.reset(),CKEDITOR.dialog._.currentZIndex===null&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10),CKEDITOR.dialog._.currentTop===null){CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,d(this._.editor);n.on("keydown",v);n.on(CKEDITOR.env.opera?"keypress":"keyup",y);for(f in{keyup:1,keydown:1,keypress:1})n.on(f,p)}else this._.parentDialog=CKEDITOR.dialog._.currentTop,o=this._.parentDialog.getElement().getFirst(),o.$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this;e(this,this,"\x1b",null,function(){this.getButton("cancel")&&this.getButton("cancel").click()}),this._.hasFocus=!1,CKEDITOR.tools.setTimeout(function(){var n=CKEDITOR.document.getWindow().getViewPaneSize(),i=this.getSize();this.move((n.width-t.minWidth)/2,(n.height-i.height)/2),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),this.fire("show",{}),this._.editor.fire("dialogShow",this),this.foreach(function(n){n.setInitValue&&n.setInitValue()})},100,this)}},foreach:function(n){var t,i;for(t in this._.contents)for(i in this._.contents[t])n(this._.contents[t][i]);return this},reset:function(){var n=function(n){n.reset&&n.reset()};return function(){return this.foreach(n),this}}(),setupContent:function(){var n=arguments;this.foreach(function(t){t.setup&&t.setup.apply(t,n)})},commitContent:function(){var n=arguments;this.foreach(function(t){t.commit&&t.commit.apply(t,n)})},hide:function(){var n,i,u,t,r;if(this.fire("hide",{}),this._.editor.fire("dialogHide",this),n=this._.element,n.getParent()){if(n.remove(),this.parts.dialog.setStyle("visibility","hidden"),nt(this),this._.parentDialog?(i=this._.parentDialog.getElement().getFirst(),i.setStyle("z-index",parseInt(i.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))):g(),CKEDITOR.dialog._.currentTop=this._.parentDialog,this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null,n.removeListener("keydown",v),n.removeListener(CKEDITOR.env.opera?"keypress":"keyup",y);for(u in{keyup:1,keydown:1,keypress:1})n.removeListener(u,p);t=this._.editor,t.focus(),t.mode=="wysiwyg"&&CKEDITOR.env.ie&&(r=t.getSelection(),r&&r.unlock(!0))}this.foreach(function(n){n.resetInitValue&&n.resetInitValue()})}},addPage:function(n){var f=[],s=n.label?' title="'+CKEDITOR.tools.htmlEncode(n.label)+'"':"",c=n.elements,h=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:n.elements,expand:!!n.expand,padding:n.padding,style:n.style||"width: 100%;"},f),u=CKEDITOR.dom.element.createFromHtml(f.join("")),i=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',this._.pageCount>0?" cke_last":"cke_first",s,!n.hidden?"":' style="display:none"',' id="',n.id+"_",CKEDITOR.tools.getNextNumber(),'" href="javascript:void(0)"',' hidefocus="true">',n.label,"<\/a>"].join("")),o,t,r;for(this._.pageCount===0?this.parts.dialog.addClass("cke_single_page"):this.parts.dialog.removeClass("cke_single_page"),this._.tabs[n.id]=[i,u],this._.tabIdList.push(n.id),this._.pageCount++,this._.lastTab=i,o=this._.contents[n.id]={},r=h.getChild();t=r.shift();)o[t.id]=t,typeof t.getChild=="function"&&r.push.apply(r,t.getChild());u.setAttribute("name",n.id),u.appendTo(this.parts.contents),i.unselectable(),this.parts.tabs.append(i),n.accessKey&&(e(this,this,"CTRL+"+n.accessKey,it,tt),this._.accessKeyMap["CTRL+"+n.accessKey]=n.id)},selectPage:function(n){var t,r,u,i;for(t in this._.tabs)r=this._.tabs[t][0],u=this._.tabs[t][1],t!=n&&(r.removeClass("cke_dialog_tab_selected"),u.hide());i=this._.tabs[n],i[0].addClass("cke_dialog_tab_selected"),i[1].show(),this._.currentTabId=n,this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,n)},hidePage:function(n){var t=this._.tabs[n]&&this._.tabs[n][0];t&&t.hide()},showPage:function(n){var t=this._.tabs[n]&&this._.tabs[n][0];t&&t.show()},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(n,t){return this._.contents[n][t]},getValueOf:function(n,t){return this.getContentElement(n,t).getValue()},setValueOf:function(n,t,i){return this.getContentElement(n,t).setValue(i)},getButton:function(n){return this._.buttons[n]},click:function(n){return this._.buttons[n].click()},disableButton:function(n){return this._.buttons[n].disable()},enableButton:function(n){return this._.buttons[n].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(n,t){if(typeof t=="undefined")t=this._.focusList.length,this._.focusList.push(new c(this,n,t));else{this._.focusList.splice(t,0,new c(this,n,t));for(var i=t+1;i<this._.focusList.length;i++)this._.focusList[i].focusIndex++}}},CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(n,t){this._.dialogDefinitions[n]&&typeof t!="function"||(this._.dialogDefinitions[n]=t)},exists:function(n){return!!this._.dialogDefinitions[n]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},okButton:function(){var n=function(n,t){return t=t||{},CKEDITOR.tools.extend({id:"ok",type:"button",label:n.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(n){var t=n.data.dialog;t.fire("ok",{hide:!0}).hide!==!1&&t.hide()}},t,!0)};return n.type="button",n.override=function(t){return CKEDITOR.tools.extend(function(i){return n(i,t)},{type:"button"},!0)},n}(),cancelButton:function(){var n=function(n,t){return t=t||{},CKEDITOR.tools.extend({id:"cancel",type:"button",label:n.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(n){var t=n.data.dialog;t.fire("cancel",{hide:!0}).hide!==!1&&t.hide()}},t,!0)};return n.type="button",n.override=function(t){return CKEDITOR.tools.extend(function(i){return n(i,t)},{type:"button"},!0)},n}(),addUIElement:function(n,t){this._.uiElementBuilders[n]=t}}),CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},CKEDITOR.event.implementOn(CKEDITOR.dialog),CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype,!0);var w={resizable:CKEDITOR.DIALOG_RESIZE_NONE,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},i=function(n,t,r){for(var u,e,f=0;u=n[f];f++){if(u.id==t)return u;if(r&&u[r]&&(e=i(u[r],t,r),e))return e}return null},r=function(n,t,i,u,f){var e,o,s;if(i){for(e=0;o=n[e];e++){if(o.id==i)return n.splice(e,0,t),t;if(u&&o[u]&&(s=r(o[u],t,i,u,!0),s))return s}if(f)return null}return n.push(t),t},u=function(n,t,i){for(var f,e,r=0;f=n[r];r++){if(f.id==t)return n.splice(r,1);if(i&&f[i]&&(e=u(f[i],t,i),e))return e}return null},l=function(n,t){var r,i,u;for(this.dialog=n,r=t.contents,i=0;u=r[i];i++)r[i]=new a(n,u);CKEDITOR.tools.extend(this,t)};l.prototype={getContents:function(n){return i(this.contents,n)},getButton:function(n){return i(this.buttons,n)},addContents:function(n,t){return r(this.contents,n,t)},addButton:function(n,t){return r(this.buttons,n,t)},removeContents:function(n){u(this.contents,n)},removeButton:function(n){u(this.buttons,n)}},a.prototype={get:function(n){return i(this.elements,n,"children")},add:function(n,t){return r(this.elements,n,t,"children")},remove:function(n){u(this.elements,n,"children")}};var f,n,d=function(t){var r=CKEDITOR.document.getWindow(),e,i,c,l,s,h;n||(e=t.config.dialog_backgroundCoverColor||"white",i=['<div style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",t.config.baseFloatZIndex,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+e,'" id="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(c=CKEDITOR.env.isCustomDomain(),l="<html><body style=\\'background-color:"+e+";\\'><\/body><\/html>",i.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),i.push("void((function(){document.open();"+(c?"document.domain='"+document.domain+"';":"")+"document.write( '"+l+"' );document.close();})())"),i.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;progid:DXImageTransform.Microsoft.Alpha(opacity=0)"><\/iframe>')),i.push("<\/div>"),n=CKEDITOR.dom.element.createFromHtml(i.join("")));var u=n,o=function(){var n=r.getViewPaneSize();u.setStyles({width:n.width+"px",height:n.height+"px"})},a=function(){var i=r.getScrollPosition(),n=CKEDITOR.dialog._.currentTop,t;u.setStyles({left:i.x+"px",top:i.y+"px"});do t=n.getPosition(),n.move(t.x,t.y);while(n=n._.parentDialog)};f=o;r.on("resize",o);o(),CKEDITOR.env.ie6Compat&&(s=function(){a(),arguments.callee.prevScrollHandler.apply(this,arguments)},r.$.setTimeout(function(){s.prevScrollHandler=window.onscroll||function(){},window.onscroll=s},0),a()),h=t.config.dialog_backgroundCoverOpacity,u.setOpacity(typeof h!="undefined"?h:.5),u.appendTo(CKEDITOR.document.getBody())},g=function(){if(n){var t=CKEDITOR.document.getWindow();n.remove(),t.removeListener("resize",f),CKEDITOR.env.ie6Compat&&t.$.setTimeout(function(){var n=window.onscroll&&window.onscroll.prevScrollHandler;window.onscroll=n||null},0),f=null}},t={},v=function(n){var r=n.data.$.ctrlKey||n.data.$.metaKey,u=n.data.$.altKey,f=n.data.$.shiftKey,e=String.fromCharCode(n.data.$.keyCode),i=t[(r?"CTRL+":"")+(u?"ALT+":"")+(f?"SHIFT+":"")+e];i&&i.length&&(i=i[i.length-1],i.keydown&&i.keydown.call(i.uiElement,i.dialog,i.key),n.data.preventDefault())},y=function(n){var r=n.data.$.ctrlKey||n.data.$.metaKey,u=n.data.$.altKey,f=n.data.$.shiftKey,e=String.fromCharCode(n.data.$.keyCode),i=t[(r?"CTRL+":"")+(u?"ALT+":"")+(f?"SHIFT+":"")+e];i&&i.length&&(i=i[i.length-1],i.keyup&&(i.keyup.call(i.uiElement,i.dialog,i.key),n.data.preventDefault()))},e=function(n,i,r,u,f){var e=t[r]||(t[r]=[]);e.push({uiElement:n,dialog:i,key:r,keyup:f||n.accessKeyUp,keydown:u||n.accessKeyDown})},nt=function(n){var u,i,r;for(u in t){for(i=t[u],r=i.length-1;r>=0;r--)(i[r].dialog==n||i[r].uiElement==n)&&i.splice(r,1);i.length===0&&delete t[u]}},tt=function(n,t){n._.accessKeyMap[t]&&n.selectPage(n._.accessKeyMap[t])},it=function(){},rt={27:1,13:1},p=function(n){n.data.getKeystroke()in rt&&n.data.stopPropagation()};(function(){CKEDITOR.ui.dialog={uiElement:function(n,t,i,r,u,f,o){var a,v,p,c,l;if(!(arguments.length<4)){var w=(r.call?r(t):r)||"div",y=["<",w," "],b=(u&&u.call?u(t):u)||{},h=(f&&f.call?f(t):f)||{},k=(o&&o.call?o(n,t):o)||"",d=this.domId=h.id||CKEDITOR.tools.getNextNumber()+"_uiElement",g=this.id=t.id,s;for(h.id=d,a={},t.type&&(a["cke_dialog_ui_"+t.type]=1),t.className&&(a[t.className]=1),v=h["class"]&&h["class"].split?h["class"].split(" "):[],s=0;s<v.length;s++)v[s]&&(a[v[s]]=1);p=[];for(s in a)p.push(s);h["class"]=p.join(" "),t.title&&(h.title=t.title),c=(t.style||"").split(";");for(s in b)c.push(s+":"+b[s]);for(t.hidden&&c.push("display:none"),s=c.length-1;s>=0;s--)c[s]===""&&c.splice(s,1);c.length>0&&(h.style=(h.style?h.style+"; ":"")+c.join("; "));for(s in h)y.push(s+'="'+CKEDITOR.tools.htmlEncode(h[s])+'" ');y.push(">",k,"<\/",w,">"),i.push(y.join("")),(this._||(this._={})).dialog=n,typeof t.isChanged=="boolean"&&(this.isChanged=function(){return t.isChanged}),typeof t.isChanged=="function"&&(this.isChanged=t.isChanged),CKEDITOR.event.implementOn(this),this.registerEvents(t),this.accessKeyUp&&this.accessKeyDown&&t.accessKey&&e(this,n,"CTRL+"+t.accessKey),l=this;n.on("load",function(){if(l.getInputElement())l.getInputElement().on("focus",function(){n._.tabBarMode=!1,n._.hasFocus=!0,l.fire("focus")},l)});if(this.keyboardFocusable){this.focusIndex=n._.focusList.push(this)-1;this.on("focus",function(){n._.currentFocusIndex=l.focusIndex})}CKEDITOR.tools.extend(this,t)}},hbox:function(n,t,i,r,u){if(!(arguments.length<4)){this._||(this._={});var h=this._.children=t,e=u&&u.widths||null,o=u&&u.height||null,f,s=function(){var t=['<tbody><tr class="cke_dialog_ui_hbox">'],r,n;for(f=0;f<i.length;f++)r="cke_dialog_ui_hbox_child",n=[],f===0&&(r="cke_dialog_ui_hbox_first"),f==i.length-1&&(r="cke_dialog_ui_hbox_last"),t.push('<td class="',r,'" '),e?e[f]&&n.push("width:"+CKEDITOR.tools.cssLength(e[f])):n.push("width:"+Math.floor(100/i.length)+"%"),o&&n.push("height:"+CKEDITOR.tools.cssLength(o)),u&&u.padding!=undefined&&n.push("padding:"+CKEDITOR.tools.cssLength(u.padding)),n.length>0&&t.push('style="'+n.join("; ")+'" '),t.push(">",i[f],"<\/td>");return t.push("<\/tr><\/tbody>"),t.join("")};CKEDITOR.ui.dialog.uiElement.call(this,n,u||{type:"hbox"},r,"table",{},u&&u.align&&{align:u.align}||null,s)}},vbox:function(n,t,i,r,u){if(!(arguments.length<3)){this._||(this._={});var s=this._.children=t,f=u&&u.width||null,e=u&&u.heights||null,o=function(){var t=['<table cellspacing="0" border="0" '],o,r;for(t.push('style="'),u&&u.expand&&t.push("height:100%;"),t.push("width:"+CKEDITOR.tools.cssLength(f||"100%"),";"),t.push('"'),t.push('align="',CKEDITOR.tools.htmlEncode(u&&u.align||(n.getParentEditor().lang.dir=="ltr"?"left":"right")),'" '),t.push("><tbody>"),o=0;o<i.length;o++)r=[],t.push("<tr><td "),f&&r.push("width:"+CKEDITOR.tools.cssLength(f||"100%")),e?r.push("height:"+CKEDITOR.tools.cssLength(e[o])):u&&u.expand&&r.push("height:"+Math.floor(100/i.length)+"%"),u&&u.padding!=undefined&&r.push("padding:"+CKEDITOR.tools.cssLength(u.padding)),r.length>0&&t.push('style="',r.join("; "),'" '),t.push(' class="cke_dialog_ui_vbox_child">',i[o],"<\/td><\/tr>");return t.push("<\/tbody><\/table>"),t.join("")};CKEDITOR.ui.dialog.uiElement.call(this,n,u||{type:"vbox"},r,"div",null,null,o)}}}})(),CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(n){return this.getInputElement().setValue(n),this.fire("change",{value:n}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var i=this.getInputElement(),n=i,t;(n=n.getParent())&&n.$.className.search("cke_dialog_page_contents")==-1;);return n?(t=n.getAttribute("name"),this._.dialog._.currentTabId!=t&&this._.dialog.selectPage(t),this):this},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(n){var i,r=function(n,t,i,r){t.on("load",function(){n.getInputElement().on(i,r,n)})},t;for(t in n)(i=t.match(/^on([A-Z]\w+)/))&&(this.eventProcessors[t]?this.eventProcessors[t].call(this,this._.dialog,n[t]):r(this,this._.dialog,i[1].toLowerCase(),n[t]));return this},eventProcessors:{onLoad:function(n,t){n.on("load",t,this)},onShow:function(n,t){n.on("show",t,this)},onHide:function(n,t){n.on("hide",t,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var n=this.getInputElement();n.setAttribute("disabled","true"),n.addClass("cke_disabled")},enable:function(){var n=this.getInputElement();n.removeAttribute("disabled"),n.removeClass("cke_disabled")},isEnabled:function(){return!this.getInputElement().getAttribute("disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return!this.isEnabled()||!this.isVisible()?!1:!0}},CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(n){return arguments.length<1?this._.children.concat():(n.splice||(n=[n]),n.length<2?this._.children[n[0]]:this._.children[n[0]]&&this._.children[n[0]].getChild?this._.children[n[0]].getChild(n.slice(1,n.length)):null)}},!0),CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox,function(){var n={build:function(n,t,i){for(var e=t.children,u,o=[],s=[],f,r=0;r<e.length&&(u=e[r]);r++)f=[],o.push(f),s.push(CKEDITOR.dialog._.uiElementBuilders[u.type].build(n,u,f));return new CKEDITOR.ui.dialog[t.type](n,s,o,i,t)}};CKEDITOR.dialog.addUIElement("hbox",n),CKEDITOR.dialog.addUIElement("vbox",n)}(),CKEDITOR.dialogCommand=function(n){this.dialogName=n},CKEDITOR.dialogCommand.prototype={exec:function(n){n.openDialog(this.dialogName)},canUndo:!1},function(){var n=/^([a]|[^a])+$/,t=/^\d*$/,i=/^\d*(?:\.\d+)?$/;CKEDITOR.VALIDATE_OR=1,CKEDITOR.VALIDATE_AND=2,CKEDITOR.dialog.validate={functions:function(){return function(){for(var f=this&&this.getValue?this.getValue():arguments[0],r=undefined,u=CKEDITOR.VALIDATE_AND,i=[],t,n=0;n<arguments.length;n++)if(typeof arguments[n]=="function")i.push(arguments[n]);else break;for(n<arguments.length&&typeof arguments[n]=="string"&&(r=arguments[n],n++),n<arguments.length&&typeof arguments[n]=="number"&&(u=arguments[n]),t=u==CKEDITOR.VALIDATE_AND?!0:!1,n=0;n<i.length;n++)t=u==CKEDITOR.VALIDATE_AND?t&&i[n](f):t||i[n](f);return t?!0:(r!==undefined&&alert(r),this&&(this.select||this.focus)&&(this.select||this.focus)(),!1)}},regex:function(n,t){return function(){var i=this&&this.getValue?this.getValue():arguments[0];return n.test(i)?!0:(t!==undefined&&alert(t),this&&(this.select||this.focus)&&(this.select?this.select():this.focus()),!1)}},notEmpty:function(t){return this.regex(n,t)},integer:function(n){return this.regex(t,n)},number:function(n){return this.regex(i,n)},equals:function(n,t){return this.functions(function(t){return t==n},t)},notEqual:function(n,t){return this.functions(function(t){return t!=n},t)}}}()}(),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(n,t){var r=CKEDITOR.dialog._.dialogDefinitions[n],u,i;if(typeof r=="function")return u=this._.storedDialogs||(this._.storedDialogs={}),i=u[n]||(u[n]=new CKEDITOR.dialog(this,n)),t&&t.call(i,i),i.show(),i;if(r=="failed")throw new Error('[CKEDITOR.dialog.openDialog] Dialog "'+n+'" failed when loading definition.');var f=CKEDITOR.document.getBody(),e=f.$.style.cursor,o=this;return f.setStyle("cursor","wait"),CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(r),function(){typeof CKEDITOR.dialog._.dialogDefinitions[n]!="function"&&(CKEDITOR.dialog._.dialogDefinitions[n]="failed"),o.openDialog(n,t),f.setStyle("cursor",e)}),null}}),CKEDITOR.plugins.add("dialog",{requires:["dialogui"]});