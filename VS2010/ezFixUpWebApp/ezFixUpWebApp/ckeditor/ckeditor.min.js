(function(){var n,r,u,i,t,h,c,o,s,f,e;window.CKEDITOR||(window.CKEDITOR=function(){var n={timestamp:"A06B",version:"3.1",revision:"4891",_:{},status:"unloaded",basePath:function(){var n=window.CKEDITOR_BASEPATH||"",i,t,r;if(!n)for(i=document.getElementsByTagName("script"),t=0;t<i.length;t++)if(r=i[t].src.match(/(^|.*[\\\/])ckeditor(?:_basic)?(?:_source)?.js(?:\?.*)?$/i),r){n=r[1];break}return n.indexOf("://")==-1&&(n=n.indexOf("/")===0?location.href.match(/^.*?:\/\/[^\/]*/)[0]+n:location.href.match(/^[^\?]*\/(?:)/)[0]+n),n}(),getUrl:function(n){return n.indexOf("://")==-1&&n.indexOf("/")!==0&&(n=this.basePath+n),this.timestamp&&n.charAt(n.length-1)!="/"&&(n+=(n.indexOf("?")>=0?"&":"?")+"t="+this.timestamp),n}},t=window.CKEDITOR_GETURL,i;return t&&(i=n.getUrl,n.getUrl=function(r){return t.call(n,r)||i.call(n,r)}),n}()),n=CKEDITOR,n.event||(n.event=function(){},n.event.implementOn=function(t){var r=n.event.prototype,i;for(i in r)t[i]==undefined&&(t[i]=r[i])},n.event.prototype=function(){var n=function(n){var t=n.getPrivate&&n.getPrivate()||n._||(n._={});return t.events||(t.events={})},t=function(n){this.name=n,this.listeners=[]};return t.prototype={getListenerIndex:function(n){for(var t=0,i=this.listeners;t<i.length;t++)if(i[t].fn==n)return t;return-1}},{on:function(i,r,u,f,e){var c=n(this),l=c[i]||(c[i]=new t(i)),o,a,s,h;if(l.getListenerIndex(r)<0){for(o=l.listeners,u||(u=this),isNaN(e)&&(e=10),a=this,s=function(n,t,e,o){var s={name:i,sender:this,editor:n,data:t,listenerData:f,stop:e,cancel:o,removeListener:function(){a.removeListener(i,r)}};return r.call(u,s),s.data},s.fn=r,s.priority=e,h=o.length-1;h>=0;h--)if(o[h].priority<=e){o.splice(h+1,0,s);return}o.unshift(s)}},fire:function(){var i=!1,r=function(){i=!0},t=!1,u=function(){t=!0};return function(f,e,o){var l=n(this)[f],v=i,y=t,s,h,c,a;if(i=t=!1,l&&(s=l.listeners,s.length))for(s=s.slice(0),h=0;h<s.length;h++)if(c=s[h].call(this,o,e,r,u),typeof c!="undefined"&&(e=c),i||t)break;return a=t||(typeof e=="undefined"?!1:e),i=v,t=y,a}}(),fireOnce:function(t,i,r){var u=this.fire(t,i,r);return delete n(this)[t],u},removeListener:function(t,i){var r=n(this)[t],u;r&&(u=r.getListenerIndex(i),u>=0&&r.listeners.splice(u,1))},hasListeners:function(t){var i=n(this)[t];return i&&i.listeners.length>0}}}()),n.editor||(n.ELEMENT_MODE_NONE=0,n.ELEMENT_MODE_REPLACE=1,n.ELEMENT_MODE_APPENDTO=2,n.editor=function(t,i,r){var u=this;u._={instanceConfig:t,element:i},u.elementMode=r||0,n.event.call(u),u._init()},n.editor.replace=function(t,i){var r=t,u,f;if(typeof r!="object"){if(r=document.getElementById(t),!r)for(u=0,f=document.getElementsByName(t);(r=f[u++])&&r.tagName.toLowerCase()!="textarea";);if(!r)throw'[CKEDITOR.editor.replace] The element with id or name "'+t+'" was not found.';}return r.style.visibility="hidden",new n.editor(i,r,1)},n.editor.appendTo=function(t,i){var r=t;if(typeof r!="object"&&(r=document.getElementById(t),!r))throw'[CKEDITOR.editor.appendTo] The element with id "'+t+'" was not found.';return new n.editor(i,r,2)},n.editor.prototype={_init:function(){var t=n.editor._pending||(n.editor._pending=[]);t.push(this)},fire:function(t,i){return n.event.prototype.fire.call(this,t,i,this)},fireOnce:function(t,i){return n.event.prototype.fireOnce.call(this,t,i,this)}},n.event.implementOn(n.editor.prototype,!0)),n.env||(n.env=function(){var i=navigator.userAgent.toLowerCase(),u=window.opera,n={ie:/*@cc_on!@*/!1,opera:!!u&&u.version,webkit:i.indexOf(" applewebkit/")>-1,air:i.indexOf(" adobeair/")>-1,mac:i.indexOf("macintosh")>-1,quirks:document.compatMode=="BackCompat",isCustomDomain:function(){return this.ie&&document.domain!=window.location.hostname}},t,r;return n.gecko=navigator.product=="Gecko"&&!n.webkit&&!n.opera,t=0,n.ie&&(t=parseFloat(i.match(/msie (\d+)/)[1]),n.ie8=!!document.documentMode,n.ie8Compat=document.documentMode==8,n.ie7Compat=t==7&&!document.documentMode||document.documentMode==7,n.ie6Compat=t<7||n.quirks),n.gecko&&(r=i.match(/rv:([\d\.]+)/),r&&(r=r[1].split("."),t=r[0]*1e4+(r[1]||0)*100+ +(r[2]||0))),n.opera&&(t=parseFloat(u.version())),n.air&&(t=parseFloat(i.match(/ adobeair\/(\d+)/)[1])),n.webkit&&(t=parseFloat(i.match(/ applewebkit\/(\d+)/)[1])),n.version=t,n.isCompatible=n.ie&&t>=6||n.gecko&&t>=10801||n.opera&&t>=9.5||n.air&&t>=1||n.webkit&&t>=522||!1,n.cssClass="cke_browser_"+(n.ie?"ie":n.gecko?"gecko":n.opera?"opera":n.air?"air":n.webkit?"webkit":"unknown"),n.quirks&&(n.cssClass+=" cke_browser_quirks"),n.ie&&(n.cssClass+=" cke_browser_ie"+(n.version<7?"6":n.version>=8?"8":"7"),n.quirks&&(n.cssClass+=" cke_browser_iequirks")),n.gecko&&t<10900&&(n.cssClass+=" cke_browser_gecko18"),n}()),r=n.env,u=r.ie,n.status=="unloaded"&&function(){n.event.implementOn(n),n.loadFullCore=function(){if(n.status!="basic_ready"){n.loadFullCore._load=!0;return}delete n.loadFullCore;var t=document.createElement("script");t.type="text/javascript",t.src=n.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild(t)},n.loadFullCoreTimeout=0,n.replaceClass="ckeditor",n.replaceByClassEnabled=!0;var t=function(t,i,u){if(r.isCompatible){n.loadFullCore&&n.loadFullCore();var f=u(t,i);return n.add(f),f}return null};n.replace=function(i,r){return t(i,r,n.editor.replace)},n.appendTo=function(i,r){return t(i,r,n.editor.appendTo)},n.add=function(n){var t=this._.pending||(this._.pending=[]);t.push(n)},n.replaceAll=function(){for(var r=document.getElementsByTagName("textarea"),u,t=0;t<r.length;t++){var i=null,n=r[t],f=n.name;if(n.name||n.id){if(typeof arguments[0]=="string"){if(u=new RegExp("(?:^| )"+arguments[0]+"(?:$| )"),!u.test(n.className))continue}else if(typeof arguments[0]=="function"&&(i={},arguments[0](n,i)===!1))continue;this.replace(n,i)}}},function(){var t=function(){var t=n.loadFullCore,i=n.loadFullCoreTimeout;n.replaceByClassEnabled&&n.replaceAll(n.replaceClass),n.status="basic_ready",t&&t._load?t():i&&setTimeout(function(){n.loadFullCore&&n.loadFullCore()},i*1e3)};window.addEventListener?window.addEventListener("load",t,!1):window.attachEvent&&window.attachEvent("onload",t)}(),n.status="basic_loaded"}(),n.dom={},i=n.dom,function(){var t=[];n.tools={arrayCompare:function(n,t){if(!n&&!t)return!0;if(!n||!t||n.length!=t.length)return!1;for(var i=0;i<n.length;i++)if(n[i]!=t[i])return!1;return!0},clone:function(n){var t,i,r,u;if(n&&n instanceof Array){for(t=[],i=0;i<n.length;i++)t[i]=this.clone(n[i]);return t}if(n===null||typeof n!="object"||n instanceof String||n instanceof Number||n instanceof Boolean||n instanceof Date||n instanceof RegExp)return n;t=new n.constructor;for(r in n)u=n[r],t[r]=this.clone(u);return t},capitalize:function(n){return n.charAt(0).toUpperCase()+n.substring(1).toLowerCase()},extend:function(n){var t=arguments.length,u,f,r,e,i;for(typeof(u=arguments[t-1])=="boolean"?t--:typeof(u=arguments[t-2])=="boolean"&&(f=arguments[t-1],t-=2),r=1;r<t;r++){e=arguments[r];for(i in e)(u===!0||n[i]==undefined)&&(!f||i in f)&&(n[i]=e[i])}return n},prototypedCopy:function(n){var t=function(){};return t.prototype=n,new t},isArray:function(n){return!!n&&n instanceof Array},isEmpty:function(n){for(var t in n)if(n.hasOwnProperty(t))return!1;return!0},cssStyleToDomStyle:function(){var n=document.createElement("div").style,t=typeof n.cssFloat!="undefined"?"cssFloat":typeof n.styleFloat!="undefined"?"styleFloat":"float";return function(n){return n=="float"?t:n.replace(/-./g,function(n){return n.substr(1).toUpperCase()})}}(),buildStyleHtml:function(n){var t,i,r;for(n=[].concat(n),i=[],r=0;r<n.length;r++)t=n[r],/@import|[{}]/.test(t)?i.push("<style>"+t+"<\/style>"):i.push('<link type="text/css" rel=stylesheet href="'+t+'">');return i.join("")},htmlEncode:function(n){var t=function(n){var t=new i.element("span");return t.setText(n),t.getHtml()},r=t("\n").toLowerCase()=="<br>"?function(n){return t(n).replace(/<br>/gi,"\n")}:t,u=t(">")==">"?function(n){return r(n).replace(/>/g,"&gt;")}:r,f=t("  ")=="&nbsp; "?function(n){return u(n).replace(/&nbsp;/g," ")}:u;return this.htmlEncode=f,this.htmlEncode(n)},escapeCssSelector:function(n){return n.replace(/[\s#:.,$*^\[\]()~=+>]/g,"\\$&")},getNextNumber:function(){var n=0;return function(){return++n}}(),override:function(n,t){return t(n)},setTimeout:function(n,t,i,r,u){return u||(u=window),i||(i=u),u.setTimeout(function(){r?n.apply(i,[].concat(r)):n.apply(i)},t||0)},trim:function(){var n=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(t){return t.replace(n,"")}}(),ltrim:function(){var n=/^[ \t\n\r]+/g;return function(t){return t.replace(n,"")}}(),rtrim:function(){var n=/[ \t\n\r]+$/g;return function(t){return t.replace(n,"")}}(),indexOf:Array.prototype.indexOf?function(n,t){return n.indexOf(t)}:function(n,t){for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1},bind:function(n,t){return function(){return n.apply(t,arguments)}},createClass:function(t){var i=t.$,r=t.base,u=t.privates||t._,f=t.proto,e=t.statics,o;return u&&(o=i,i=function(){var t=this,f=t._||(t._={}),r,i;for(r in u)i=u[r],f[r]=typeof i=="function"?n.tools.bind(i,t):i;o.apply(t,arguments)}),r&&(i.prototype=this.prototypedCopy(r.prototype),i.prototype.constructor=i,i.prototype.base=function(){this.base=r.prototype.base,r.apply(this,arguments),this.base=arguments.callee}),f&&this.extend(i.prototype,f,!0),e&&this.extend(i,e,!0),i},addFunction:function(n,i){return t.push(function(){n.apply(i||this,arguments)})-1},callFunction:function(n){var i=t[n];return i&&i.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var n=/^\d+(?:\.\d+)?$/;return function(t){return t+(n.test(t)?"px":"")}}(),repeat:function(n,t){return new Array(t+1).join(n)},tryThese:function(){for(var t,r,n=0,i=arguments.length;n<i;n++){r=arguments[n];try{t=r();break}catch(u){}}return t}}}(),t=n.tools,n.dtd=function(){var i=t.extend,s={isindex:1,fieldset:1},l={input:1,button:1,select:1,textarea:1,label:1},a=i({a:1},l),h=i({iframe:1},a),f={hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1},v={ins:1,del:1,script:1},y=i({b:1,acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1},v),p=i({sub:1,img:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1},y),e=i({p:1},p),w=i({iframe:1},p,l),b={img:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1},n=i({a:1},w),c={tr:1},u={"#":1},k=i({param:1},b),r=i({form:1},s,h,f,e),o={li:1},d={base:1,link:1,meta:1,title:1},tt=i(d,{style:1,script:1}),g={head:1,body:1},nt={address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1};return{$nonBodyContent:i({html:1},g,d),$block:nt,$blockLimit:{body:1,div:1,td:1,th:1,caption:1,form:1},$inline:n,$body:i({script:1,style:1},nt),$cdata:{script:1,style:1},$empty:{area:1,base:1,br:1,col:1,hr:1,img:1,input:1,link:1,meta:1,param:1},$listItem:{dd:1,dt:1,li:1},$list:{ul:1,ol:1,dl:1},$nonEditable:{applet:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,script:1,textarea:1,param:1},$removeEmpty:{abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},html:g,head:tt,style:u,script:u,body:r,base:{},link:{},meta:{},title:u,col:{},tr:{td:1,th:1},img:{},colgroup:{col:1},noscript:r,td:r,br:{},th:r,center:r,kbd:n,button:i(e,f),basefont:{},h5:n,h4:n,samp:n,h6:n,ol:o,h1:n,h3:n,option:u,h2:n,form:i(s,h,f,e),select:{optgroup:1,option:1},font:n,ins:n,menu:o,abbr:n,label:n,table:{thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1},code:n,script:u,tfoot:c,cite:n,li:r,input:{},iframe:r,strong:n,textarea:u,noframes:r,big:n,small:n,span:n,hr:{},dt:n,sub:n,optgroup:{option:1},param:{},bdo:n,"var":n,div:r,object:k,sup:n,dd:r,strike:n,area:{},dir:o,map:i({area:1,form:1,p:1},s,v,f),applet:k,dl:{dt:1,dd:1},del:n,isindex:{},fieldset:i({legend:1},b),thead:c,ul:o,acronym:n,b:n,a:w,blockquote:r,caption:n,i:n,u:n,tbody:c,s:n,address:i(h,e),tt:n,legend:n,q:n,pre:i(y,a),p:n,em:n,dfn:n}}(),h=n.dtd,i.event=function(n){this.$=n},i.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var n=this,t=n.getKey();return(n.$.ctrlKey||n.$.metaKey)&&(t+=1e3),n.$.shiftKey&&(t+=2e3),n.$.altKey&&(t+=4e3),t},preventDefault:function(n){var t=this.$;t.preventDefault?t.preventDefault():t.returnValue=!1,n&&this.stopPropagation()},stopPropagation:function(){var n=this.$;n.stopPropagation?n.stopPropagation():n.cancelBubble=!0},getTarget:function(){var n=this.$.target||this.$.srcElement;return n?new i.node(n):null}},n.CTRL=1e3,n.SHIFT=2e3,n.ALT=4e3,i.domObject=function(n){n&&(this.$=n)},i.domObject.prototype=function(){var t=function(t,r){return function(u){typeof n!="undefined"&&t.fire(r,new i.event(u))}};return{getPrivate:function(){var n;return(n=this.getCustomData("_"))||this.setCustomData("_",n={}),n},on:function(i){var r=this,u=r.getCustomData("_cke_nativeListeners"),f;return u||(u={},r.setCustomData("_cke_nativeListeners",u)),u[i]||(f=u[i]=t(r,i),r.$.addEventListener?r.$.addEventListener(i,f,!!n.event.useCapture):r.$.attachEvent&&r.$.attachEvent("on"+i,f)),n.event.prototype.on.apply(r,arguments)},removeListener:function(t){var i=this,r,u;n.event.prototype.removeListener.apply(i,arguments),i.hasListeners(t)||(r=i.getCustomData("_cke_nativeListeners"),u=r&&r[t],u&&(i.$.removeEventListener?i.$.removeEventListener(t,u,!1):i.$.detachEvent&&i.$.detachEvent("on"+t,u),delete r[t]))}}}(),function(i){var r={};i.equals=function(n){return n&&n.$===this.$},i.setCustomData=function(n,t){var i=this.getUniqueId(),u=r[i]||(r[i]={});return u[n]=t,this},i.getCustomData=function(n){var t=this.$._cke_expando,i=t&&r[t];return i&&i[n]},i.removeCustomData=function(n){var i=this.$._cke_expando,t=i&&r[i],u=t&&t[n];return typeof u!="undefined"&&delete t[n],u||null},i.getUniqueId=function(){return this.$._cke_expando||(this.$._cke_expando=t.getNextNumber())},n.event.implementOn(i)}(i.domObject.prototype),i.window=function(n){i.domObject.call(this,n)},i.window.prototype=new i.domObject,t.extend(i.window.prototype,{focus:function(){r.webkit&&this.$.parent&&this.$.parent.focus(),this.$.focus()},getViewPaneSize:function(){var n=this.$.document,t=n.compatMode=="CSS1Compat";return{width:(t?n.documentElement.clientWidth:n.body.clientWidth)||0,height:(t?n.documentElement.clientHeight:n.body.clientHeight)||0}},getScrollPosition:function(){var t=this.$,n;return"pageXOffset"in t?{x:t.pageXOffset||0,y:t.pageYOffset||0}:(n=t.document,{x:n.documentElement.scrollLeft||n.body.scrollLeft||0,y:n.documentElement.scrollTop||n.body.scrollTop||0})}}),i.document=function(n){i.domObject.call(this,n)},c=i.document,c.prototype=new i.domObject,t.extend(c.prototype,{appendStyleSheet:function(n){if(this.$.createStyleSheet)this.$.createStyleSheet(n);else{var t=new i.element("link");t.setAttributes({rel:"stylesheet",type:"text/css",href:n}),this.getHead().append(t)}},appendStyleText:function(n){var t=this,u,r;t.$.createStyleSheet?(u=t.$.createStyleSheet(""),u.cssText=n):(r=new i.element("style",t),r.append(new i.text(n,t)),t.getHead().append(r))},createElement:function(n,t){var r=new i.element(n,this);return t&&(t.attributes&&r.setAttributes(t.attributes),t.styles&&r.setStyles(t.styles)),r},createText:function(n){return new i.text(n,this)},focus:function(){this.getWindow().focus()},getById:function(n){var t=this.$.getElementById(n);return t?new i.element(t):null},getByAddress:function(n,t){for(var r=this.$.documentElement,o,s,e,u,f=0;r&&f<n.length;f++){if(o=n[f],!t){r=r.childNodes[o];continue}for(s=-1,e=0;e<r.childNodes.length;e++)if((u=r.childNodes[e],t!==!0||u.nodeType!=3||!u.previousSibling||u.previousSibling.nodeType!=3)&&(s++,s==o)){r=u;break}}return r?new i.node(r):null},getElementsByTag:function(n,t){return!u&&t&&(n=t+":"+n),new i.nodeList(this.$.getElementsByTagName(n))},getHead:function(){var n=this.$.getElementsByTagName("head")[0];return n=new i.element(n),(this.getHead=function(){return n})()},getBody:function(){var n=new i.element(this.$.body);return(this.getBody=function(){return n})()},getDocumentElement:function(){var n=new i.element(this.$.documentElement);return(this.getDocumentElement=function(){return n})()},getWindow:function(){var n=new i.window(this.$.parentWindow||this.$.defaultView);return(this.getWindow=function(){return n})()}}),i.node=function(n){if(n){switch(n.nodeType){case 1:return new i.element(n);case 3:return new i.text(n)}i.domObject.call(this,n)}return this},i.node.prototype=new i.domObject,n.NODE_ELEMENT=1,n.NODE_TEXT=3,n.NODE_COMMENT=8,n.NODE_DOCUMENT_FRAGMENT=11,n.POSITION_IDENTICAL=0,n.POSITION_DISCONNECTED=1,n.POSITION_FOLLOWING=2,n.POSITION_PRECEDING=4,n.POSITION_IS_CONTAINED=8,n.POSITION_CONTAINS=16,t.extend(i.node.prototype,{appendTo:function(n,t){return n.append(this,t),n},clone:function(n,t){var u=this.$.cloneNode(n),r;return t||(r=function(n){var i,t;if(n.nodeType==1)for(n.removeAttribute("id",!1),n.removeAttribute("_cke_expando",!1),i=n.childNodes,t=0;t<i.length;t++)r(i[t])},r(u)),new i.node(u)},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(n){return n.$.parentNode.insertBefore(this.$,n.$.nextSibling),n},insertBefore:function(n){return n.$.parentNode.insertBefore(this.$,n.$),n},insertBeforeMe:function(n){return this.$.parentNode.insertBefore(n.$,this.$),n},getAddress:function(n){for(var e=[],o=this.getDocument().$.documentElement,t=this.$,u,f,r,i;t&&t!=o;){for(u=t.parentNode,f=-1,r=0;r<u.childNodes.length;r++)if((i=u.childNodes[r],!n||i.nodeType!=3||!i.previousSibling||i.previousSibling.nodeType!=3)&&(f++,i==t))break;e.unshift(f),t=t.parentNode}return e},getDocument:function(){var n=new c(this.$.ownerDocument||this.$.parentNode.ownerDocument);return(this.getDocument=function(){return n})()},getIndex:function(){for(var t=this.$,n=t.parentNode&&t.parentNode.firstChild,i=-1;n;){if(i++,n==t)return i;n=n.nextSibling}return-1},getNextSourceNode:function(n,t,i){var f,r,u;if(i&&!i.call&&(f=i,i=function(n){return!n.equals(f)}),r=!n&&this.getFirst&&this.getFirst(),!r){if(this.type==1&&i&&i(this,!0)===!1)return null;r=this.getNext()}while(!r&&(u=(u||this).getParent())){if(i&&i(u,!0)===!1)return null;r=u.getNext()}return r?i&&i(r)===!1?null:t&&t!=r.type?r.getNextSourceNode(!1,t,i):r:null},getPreviousSourceNode:function(n,t,i){var f,r,u;if(i&&!i.call&&(f=i,i=function(n){return!n.equals(f)}),r=!n&&this.getLast&&this.getLast(),!r){if(this.type==1&&i&&i(this,!0)===!1)return null;r=this.getPrevious()}while(!r&&(u=(u||this).getParent())){if(i&&i(u,!0)===!1)return null;r=u.getPrevious()}return r?i&&i(r)===!1?null:t&&r.type!=t?r.getPreviousSourceNode(!1,t,i):r:null},getPrevious:function(n){var t=this.$,r;do t=t.previousSibling,r=t&&new i.node(t);while(r&&n&&!n(r));return r},getNext:function(n){var t=this.$,r;do t=t.nextSibling,r=t&&new i.node(t);while(r&&n&&!n(r));return r},getParent:function(){var n=this.$.parentNode;return n&&n.nodeType==1?new i.node(n):null},getParents:function(n){var t=this,i=[];do i[n?"push":"unshift"](t);while(t=t.getParent());return i},getCommonAncestor:function(n){var t=this,i;if(n.equals(t))return t;if(n.contains&&n.contains(t))return n;i=t.contains?t:t.getParent();do if(i.contains(n))return i;while(i=i.getParent());return null},getPosition:function(n){var t=this.$,r=n.$,i;if(t.compareDocumentPosition)return t.compareDocumentPosition(r);if(t==r)return 0;if(this.type==1&&n.type==1){if(t.contains){if(t.contains(r))return 20;if(r.contains(t))return 10}if("sourceIndex"in t)return t.sourceIndex<0||r.sourceIndex<0?1:t.sourceIndex<r.sourceIndex?4:2}var u=this.getAddress(),f=n.getAddress(),e=Math.min(u.length,f.length);for(i=0;i<=e-1;i++)if(u[i]!=f[i]){if(i<e)return u[i]<f[i]?4:2;break}return u.length<f.length?20:10},getAscendant:function(n,t){var r=this.$;for(t||(r=r.parentNode);r;){if(r.nodeName&&r.nodeName.toLowerCase()==n)return new i.node(r);r=r.parentNode}return null},hasAscendant:function(n,t){var i=this.$;for(t||(i=i.parentNode);i;){if(i.nodeName&&i.nodeName.toLowerCase()==n)return!0;i=i.parentNode}return!1},move:function(n,t){n.append(this.remove(),t)},remove:function(n){var t=this.$,i=t.parentNode,r;if(i){if(n)for(;r=t.firstChild;)i.insertBefore(t.removeChild(r),t);i.removeChild(t)}return this},replace:function(n){this.insertBefore(n),n.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var i=this,n,r,u;i.getFirst&&(n=i.getFirst());){if(n.type==3)if(r=t.ltrim(n.getText()),u=n.getLength(),r)r.length<u&&(n.split(u-r.length),i.$.removeChild(i.$.firstChild));else{n.remove();continue}break}},rtrim:function(){for(var i=this,n,f,e;i.getLast&&(n=i.getLast());){if(n.type==3)if(f=t.rtrim(n.getText()),e=n.getLength(),f)f.length<e&&(n.split(f.length),i.$.lastChild.parentNode.removeChild(i.$.lastChild));else{n.remove();continue}break}u||r.opera||(n=i.$.lastChild,n&&n.type==1&&n.nodeName.toLowerCase()=="br"&&n.parentNode.removeChild(n))}}),i.nodeList=function(n){this.$=n},i.nodeList.prototype={count:function(){return this.$.length},getItem:function(n){var t=this.$[n];return t?new i.node(t):null}},i.element=function(n,t){typeof n=="string"&&(n=(t?t.$:document).createElement(n)),i.domObject.call(this,n)},o=i.element,o.get=function(n){return n&&(n.$?n:new o(n))},o.prototype=new i.node,o.createFromHtml=function(n,t){var i=new o("div",t);return i.setHtml(n),i.getFirst().remove()},o.setMarker=function(n,i,r,u){var f=i.getCustomData("list_marker_id")||i.setCustomData("list_marker_id",t.getNextNumber()).getCustomData("list_marker_id"),e=i.getCustomData("list_marker_names")||i.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");return n[f]=i,e[r]=1,i.setCustomData(r,u)},o.clearAllMarkers=function(n){for(var t in n)o.clearMarkers(n,n[t],!0)},o.clearMarkers=function(n,t,i){var u=t.getCustomData("list_marker_names"),f=t.getCustomData("list_marker_id"),r;for(r in u)t.removeCustomData(r);t.removeCustomData("list_marker_names"),i&&(t.removeCustomData("list_marker_id"),delete n[f])},t.extend(o.prototype,{type:1,addClass:function(n){var t=this.$.className,i;t&&(i=new RegExp("(?:^|\\s)"+n+"(?:\\s|$)",""),i.test(t)||(t+=" "+n)),this.$.className=t||n},removeClass:function(n){var t=this.getAttribute("class"),i;t&&(i=new RegExp("(?:^|\\s+)"+n+"(?=\\s|$)","i"),i.test(t)&&(t=t.replace(i,"").replace(/^\s+/,""),t?this.setAttribute("class",t):this.removeAttribute("class")))},hasClass:function(n){var t=new RegExp("(?:^|\\s+)"+n+"(?=\\s|$)","");return t.test(this.getAttribute("class"))},append:function(n,t){var i=this;return typeof n=="string"&&(n=i.getDocument().createElement(n)),t?i.$.insertBefore(n.$,i.$.firstChild):i.$.appendChild(n.$),n},appendHtml:function(n){var t=this,i;t.$.childNodes.length?(i=new o("div",t.getDocument()),i.setHtml(n),i.moveChildren(t)):t.setHtml(n)},appendText:function(n){this.$.text!=undefined?this.$.text+=n:this.append(new i.text(n))},appendBogus:function(){for(var i=this,n=i.getLast();n&&n.type==3&&!t.rtrim(n.getText());)n=n.getPrevious();n&&n.is&&n.is("br")||i.append(r.opera?i.getDocument().createText(""):i.getDocument().createElement("br"))},breakParent:function(n){var t=this,r=new i.range(t.getDocument()),u;r.setStartAfter(t),r.setEndAfter(n),u=r.extractContents(),r.insertNode(t.remove()),u.insertAfterNode(t)},contains:u||r.webkit?function(n){var t=this.$;return n.type!=1?t.contains(n.getParent().$):t!=n.$&&t.contains(n.$)}:function(n){return!!(this.$.compareDocumentPosition(n.$)&16)},focus:function(){try{this.$.focus()}catch(n){}},getHtml:function(){var n=this.$.innerHTML;return u?n.replace(/<\?[^>]*>/g,""):n},getOuterHtml:function(){var n=this,t;return n.$.outerHTML?n.$.outerHTML.replace(/<\?[^>]*>/,""):(t=n.$.ownerDocument.createElement("div"),t.appendChild(n.$.cloneNode(!0)),t.innerHTML)},setHtml:function(n){return this.$.innerHTML=n},setText:function(n){return o.prototype.setText=this.$.innerText!=undefined?function(n){return this.$.innerText=n}:function(n){return this.$.textContent=n},this.setText(n)},getAttribute:function(){var n=function(n){return this.$.getAttribute(n,2)};return u&&(r.ie7Compat||r.ie6Compat)?function(t){var i=this,r,u,f;switch(t){case"class":t="className";break;case"tabindex":return(r=n.call(i,t))!==0&&i.$.tabIndex===0&&(r=null),r;case"checked":return u=i.$.attributes.getNamedItem(t),f=u.specified?u.nodeValue:i.$.checked,f?"checked":null;case"hspace":return i.$.hspace;case"style":return i.$.style.cssText}return n.call(i,t)}:n}(),getChildren:function(){return new i.nodeList(this.$.childNodes)},getComputedStyle:u?function(n){return this.$.currentStyle[t.cssStyleToDomStyle(n)]}:function(n){return this.getWindow().$.getComputedStyle(this.$,"").getPropertyValue(n)},getDtd:function(){var n=h[this.getName()];return this.getDtd=function(){return n},n},getElementsByTag:c.prototype.getElementsByTag,getTabIndex:u?function(){var n=this.$.tabIndex;return n!==0||h.$tabIndex[this.getName()]||parseInt(this.getAttribute("tabindex"),10)===0||(n=-1),n}:r.webkit?function(){var n=this.$.tabIndex;return n==undefined&&(n=parseInt(this.getAttribute("tabindex"),10),isNaN(n)&&(n=-1)),n}:function(){return this.$.tabIndex},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var n=this.$.nodeName.toLowerCase(),t;return u&&(t=this.$.scopeName,t!="HTML"&&(n=t.toLowerCase()+":"+n)),(this.getName=function(){return n})()},getValue:function(){return this.$.value},getFirst:function(n){var r=this.$.firstChild,t=r&&new i.node(r);return t&&n&&!n(t)&&(t=t.getNext(n)),t},getLast:function(n){var r=this.$.lastChild,t=r&&new i.node(r);return t&&n&&!n(t)&&(t=t.getPrevious(n)),t},getStyle:function(n){return this.$.style[t.cssStyleToDomStyle(n)]},is:function(){for(var t=this.getName(),n=0;n<arguments.length;n++)if(arguments[n]==t)return!0;return!1},isEditable:function(){var n=this.getName(),t=!h.$nonEditable[n]&&(h[n]||h.span);return t&&t["#"]},isIdentical:function(n){var i,t;if(this.getName()!=n.getName())return!1;var r=this.$.attributes,f=n.$.attributes,e=r.length,o=f.length;if(!u&&e!=o)return!1;for(i=0;i<e;i++)if(t=r[i],(!u||t.specified&&t.nodeName!="_cke_expando")&&t.nodeValue!=n.getAttribute(t.nodeName))return!1;if(u)for(i=0;i<o;i++)if(t=f[i],t.specified&&t.nodeName!="_cke_expando"&&t.nodeValue!=this.getAttribute(t.nodeName))return!1;return!0},isVisible:function(){var t=!!this.$.offsetHeight&&this.getComputedStyle("visibility")!="hidden",i,u;return t&&(r.webkit||r.opera)&&(i=this.getWindow(),!i.equals(n.document.getWindow())&&(u=i.$.frameElement)&&(t=new o(u).isVisible())),t},hasAttributes:u&&(r.ie7Compat||r.ie6Compat)?function(){for(var i=this.$.attributes,t,n=0;n<i.length;n++){t=i[n];switch(t.nodeName){case"class":if(this.getAttribute("class"))return!0;case"_cke_expando":continue;default:if(t.specified)return!0}}return!1}:function(){var n=this.$.attributes;return n.length>1||n.length==1&&n[0].nodeName!="_cke_expando"},hasAttribute:function(n){var t=this.$.attributes.getNamedItem(n);return!!(t&&t.specified)},hide:function(){this.setStyle("display","none")},moveChildren:function(n,t){var i=this.$,r;if(n=n.$,i!=n)if(t)while(r=i.lastChild)n.insertBefore(i.removeChild(r),n.firstChild);else while(r=i.firstChild)n.appendChild(i.removeChild(r))},show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var n=function(n,t){return this.$.setAttribute(n,t),this};return u&&(r.ie7Compat||r.ie6Compat)?function(t,i){var r=this;return t=="class"?r.$.className=i:t=="style"?r.$.style.cssText=i:t=="tabindex"?r.$.tabIndex=i:t=="checked"?r.$.checked=i:n.apply(r,arguments),r}:n}(),setAttributes:function(n){for(var t in n)this.setAttribute(t,n[t]);return this},setValue:function(n){return this.$.value=n,this},removeAttribute:function(){var n=function(n){this.$.removeAttribute(n)};return u&&(r.ie7Compat||r.ie6Compat)?function(t){t=="class"?t="className":t=="tabindex"&&(t="tabIndex"),n.call(this,t)}:n}(),removeAttributes:function(n){for(var t=0;t<n.length;t++)this.removeAttribute(n[t])},removeStyle:function(n){var i=this;i.setStyle(n,""),i.$.style.removeAttribute&&i.$.style.removeAttribute(t.cssStyleToDomStyle(n)),i.$.style.cssText||i.removeAttribute("style")},setStyle:function(n,i){return this.$.style[t.cssStyleToDomStyle(n)]=i,this},setStyles:function(n){for(var t in n)this.setStyle(t,n[t]);return this},setOpacity:function(n){u?(n=Math.round(n*100),this.setStyle("filter",n>=100?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+n+")")):this.setStyle("opacity",n)},unselectable:r.gecko?function(){this.$.style.MozUserSelect="none"}:r.webkit?function(){this.$.style.KhtmlUserSelect="none"}:function(){if(u||r.opera){var t=this.$,n,i=0;for(t.unselectable="on";n=t.all[i++];)switch(n.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:n.unselectable="on"}}},getPositionedAncestor:function(){for(var n=this;n.getName()!="html";){if(n.getComputedStyle("position")!="static")return n;n=n.getParent()}return null},getDocumentPosition:function(n){var i=this,f=0,e=0,c=i.getDocument().getBody(),h=i.getDocument().$.compatMode=="BackCompat",v=i.getDocument(),k,d,t,y,g,s,a,nt,p;if(document.documentElement.getBoundingClientRect){var w=i.$.getBoundingClientRect(),tt=v.$,l=tt.documentElement,it=l.clientTop||c.$.clientTop||0,rt=l.clientLeft||c.$.clientLeft||0,b=!0;u&&(k=v.getDocumentElement().contains(i),d=v.getBody().contains(i),b=h&&d||!h&&k),b&&(f=w.left+(!h&&l.scrollLeft||c.$.scrollLeft),f-=rt,e=w.top+(!h&&l.scrollTop||c.$.scrollTop)-it)}else for(t=i,y=null;t&&!(t.getName()=="body"||t.getName()=="html");){for(f+=t.$.offsetLeft-t.$.scrollLeft,e+=t.$.offsetTop-t.$.scrollTop,t.equals(i)||(f+=t.$.clientLeft||0,e+=t.$.clientTop||0),s=y;s&&!s.equals(t);)f-=s.$.scrollLeft,e-=s.$.scrollTop,s=s.getParent();y=t,t=(g=t.$.offsetParent)?new o(g):null}return n&&(a=i.getWindow(),nt=n.getWindow(),!a.equals(nt)&&a.$.frameElement&&(p=new o(a.$.frameElement).getDocumentPosition(n),f+=p.x,e+=p.y)),document.documentElement.getBoundingClientRect||r.gecko&&!h&&(f+=i.$.clientLeft?1:0,e+=i.$.clientTop?1:0),{x:f,y:e}},scrollIntoView:function(n){var i=this,r=i.getWindow(),u=r.getViewPaneSize().height,t=u*-1,e,f;n?t+=u:(t+=i.$.offsetHeight||0,t+=parseInt(i.getComputedStyle("marginBottom")||0,10)||0),e=i.getDocumentPosition(),t+=e.y,t=t<0?0:t,f=r.getScrollPosition().y,(t>f||t<f-u)&&r.$.scrollTo(0,t)},setState:function(n){var t=this;switch(n){case 1:t.addClass("cke_on"),t.removeClass("cke_off"),t.removeClass("cke_disabled");break;case 0:t.addClass("cke_disabled"),t.removeClass("cke_off"),t.removeClass("cke_on");break;default:t.addClass("cke_off"),t.removeClass("cke_on"),t.removeClass("cke_disabled")}},getFrameDocument:function(){var n=this.$;try{n.contentWindow.document}catch(t){n.src=n.src,u&&r.version<7&&window.showModalDialog('javascript:document.write("<script>window.setTimeout(function(){window.close();},50);<\/script>")')}return n&&new c(n.contentWindow.document)},copyAttributes:function(n,t){var f=this,s=f.$.attributes,o,e,i,r;for(t=t||{},o=0;o<s.length;o++)(e=s[o],i=e.nodeName.toLowerCase(),i in t)||(i=="checked"&&(r=f.getAttribute(i))?n.setAttribute(i,r):(e.specified||u&&e.nodeValue&&i=="value")&&(r=f.getAttribute(i),r===null&&(r=e.nodeValue),n.setAttribute(i,r)));f.$.style.cssText!==""&&(n.$.style.cssText=f.$.style.cssText)},renameNode:function(n){var t=this,r,i;t.getName()!=n&&(r=t.getDocument(),i=new o(n,r),t.copyAttributes(i),t.moveChildren(i),t.$.parentNode.replaceChild(i.$,t.$),i.$._cke_expando=t.$._cke_expando,t.$=i.$)},getChild:function(n){var t=this.$;if(n.slice)while(n.length>0&&t)t=t.childNodes[n.shift()];else t=t.childNodes[n];return t?new i.node(t):null},getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){this.on("contextmenu",function(n){n.data.getTarget().hasClass("cke_enable_context_menu")||n.data.preventDefault()})}}),n.command=function(i,r){this.uiItems=[],this.exec=function(n){return this.state==0?!1:(this.editorFocus&&i.focus(),r.exec.call(this,i,n)!==!1)},t.extend(this,r,{modes:{wysiwyg:1},editorFocus:!0,state:2}),n.event.call(this)},n.command.prototype={enable:function(){var n=this;n.state==0&&n.setState(!n.preserveState||typeof n.previousState=="undefined"?2:n.previousState)},disable:function(){this.setState(0)},setState:function(n){var t=this;return t.state==n?!1:(t.previousState=t.state,t.state=n,t.fire("state"),!0)},toggleState:function(){var n=this;n.state==2?n.setState(1):n.state==1&&n.setState(2)}},n.event.implementOn(n.command.prototype,!0),n.ENTER_P=1,n.ENTER_BR=2,n.ENTER_DIV=3,n.config={customConfig:"config.js",autoUpdateElement:!0,baseHref:"",contentsCss:n.basePath+"contents.css",contentsLangDirection:"ltr",language:"",defaultLanguage:"en",enterMode:1,shiftEnterMode:2,corePlugins:"",docType:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',bodyId:"",bodyClass:"",fullPage:!1,height:200,plugins:"about,basicstyles,blockquote,button,clipboard,colorbutton,colordialog,contextmenu,div,elementspath,enterkey,entities,filebrowser,find,flash,font,format,forms,horizontalrule,htmldataprocessor,image,indent,justify,keystrokes,link,list,maximize,newpage,pagebreak,pastefromword,pastetext,popup,preview,print,removeformat,resize,save,scayt,smiley,showblocks,showborders,sourcearea,stylescombo,table,tabletools,specialchar,tab,templates,toolbar,undo,wysiwygarea,wsc",extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,theme:"default",skin:"kama",width:"",baseFloatZIndex:1e4},s=n.config,n.focusManager=function(n){return n.focusManager?n.focusManager:(this.hasFocus=!1,this._={editor:n},this)},n.focusManager.prototype={focus:function(){var t=this,i;t._.timer&&clearTimeout(t._.timer),t.hasFocus||(n.currentInstance&&n.currentInstance.focusManager.forceBlur(),i=t._.editor,i.container.getFirst().addClass("cke_focus"),t.hasFocus=!0,i.fire("focus"))},blur:function(){var n=this;n._.timer&&clearTimeout(n._.timer),n._.timer=setTimeout(function(){delete n._.timer,n.forceBlur()},100)},forceBlur:function(){if(this.hasFocus){var n=this._.editor;n.container.getFirst().removeClass("cke_focus"),this.hasFocus=!1,n.fire("blur")}}},function(){n.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,da:1,de:1,el:1,"en-au":1,"en-ca":1,"en-uk":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,is:1,it:1,ja:1,km:1,ko:1,lt:1,lv:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,sk:1,sl:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,uk:1,vi:1,"zh-cn":1,zh:1},load:function(t,i,r){t&&n.lang.languages[t]||(t=this.detect(i,t)),this[t]?r(t,this[t]):n.scriptLoader.load(n.getUrl("lang/"+t+".js"),function(){r(t,this[t])},this)},detect:function(t,i){var u=this.languages;i=i||navigator.userLanguage||navigator.language;var f=i.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),r=f[1],e=f[2];return u[r+"-"+e]?r=r+"-"+e:u[r]||(r=null),n.lang.detect=r?function(){return r}:function(n){return n},r||t}}}(),n.scriptLoader=function(){var i={},t={};return{load:function(r,f,e,s,h){var v=typeof r=="string",c;v&&(r=[r]),e||(e=n);var l=r.length,y=[],p=[],w=function(n){f&&(v?f.call(e,n):f.call(e,y,p))};if(l===0){w(!0);return}var b=function(t,i){(i?y:p).push(t),--l<=0&&(h&&n.document.getDocumentElement().removeStyle("cursor"),w(i))},a=function(n,r){var f,u;for(i[n]=1,f=t[n],delete t[n],u=0;u<f.length;u++)f[u](n,r)},k=function(r){var h,e;if(s!==!0&&i[r]){b(r,!0);return}(h=t[r]||(t[r]=[]),h.push(b),h.length>1)||(e=new o("script"),e.setAttributes({type:"text/javascript",src:r}),f&&(u?e.$.onreadystatechange=function(){(e.$.readyState=="loaded"||e.$.readyState=="complete")&&(e.$.onreadystatechange=null,a(r,!0))}:(e.$.onload=function(){setTimeout(function(){a(r,!0)},0)},e.$.onerror=function(){a(r,!1)})),e.appendTo(n.document.getHead()))};for(h&&n.document.getDocumentElement().setStyle("cursor","wait"),c=0;c<l;c++)k(r[c])},loadCode:function(t){var i=new o("script");i.setAttribute("type","text/javascript"),i.appendText(t),i.appendTo(n.document.getHead())}}}(),n.resourceManager=function(n,t){var i=this;i.basePath=n,i.fileName=t,i.registered={},i.loaded={},i.externals={},i._={waitingList:{}}},n.resourceManager.prototype={add:function(i,r){if(this.registered[i])throw'[CKEDITOR.resourceManager.add] The resource name "'+i+'" is already registered.';n.fire(i+t.capitalize(this.fileName)+"Ready",this.registered[i]=r||{})},get:function(n){return this.registered[n]||null},getPath:function(t){var i=this.externals[t];return n.getUrl(i&&i.dir||this.basePath+t+"/")},getFilePath:function(t){var i=this.externals[t];return n.getUrl(this.getPath(t)+(i&&i.file||this.fileName+".js"))},addExternal:function(n,t,i){var r,u;for(n=n.split(","),r=0;r<n.length;r++)u=n[r],this.externals[u]={dir:t,file:i}},load:function(i,r,u){var s,f,o;t.isArray(i)||(i=i?[i]:[]);var c=this.loaded,a=this.registered,l=[],e={},h={};for(s=0;s<i.length;s++)(f=i[s],f)&&(c[f]||a[f]?h[f]=this.get(f):(o=this.getFilePath(f),l.push(o),o in e||(e[o]=[]),e[o].push(f)));n.scriptLoader.load(l,function(n,t){var i,s,f,o;if(t.length)throw'[CKEDITOR.resourceManager.load] Resource name "'+e[t[0]].join(",")+'" was not found at "'+t[0]+'".';for(i=0;i<n.length;i++)for(s=e[n[i]],f=0;f<s.length;f++)o=s[f],h[o]=this.get(o),c[o]=1;r.call(u,h)},this)}},n.plugins=new n.resourceManager("plugins/","plugin"),f=n.plugins,f.load=t.override(f.load,function(n){return function(i,r,u){var f={},e=function(i){n.call(this,i,function(n){var h,c,i,o,s;t.extend(f,n),h=[];for(c in n)if(i=n[c],o=i&&i.requires,o)for(s=0;s<o.length;s++)f[o[s]]||h.push(o[s]);if(h.length)e.call(this,h);else{for(c in f)i=f[c],i.onLoad&&!i.onLoad._called&&(i.onLoad(),i.onLoad._called=1);r&&r.call(u||window,f)}},this)};e.call(this,i)}}),f.setLang=function(n,t,i){var r=this.get(n);r.lang[t]=i},function(){var t={},i=function(n,i){var u=function(){t[n]=1,i()},r=new o("img");r.on("load",u);r.on("error",u);r.setAttribute("src",n)};n.imageCacher={load:function(n,r){for(var o=n.length,e=function(){--o==0&&r()},f,u=0;u<n.length;u++)f=n[u],t[f]?e():i(f,e)}}}(),n.skins=function(){var r={},u={},i={},f=function(e,o,s,h){function g(n,t){return n.replace(/url\s*\(([\s'"]*)(.*?)([\s"']*)\)/g,function(n,i,r,u){return/^\/|^\w?:/.test(r)?n:"url("+t+i+r+u+")"})}var a=r[o],y,v,k,l,c,p;if(e.skin||(e.skin=a,a.init&&a.init(e)),y=function(t){for(var r=0;r<t.length;r++)t[r]=n.getUrl(i[o]+t[r])},!u[o]){if(v=a.preload,v&&v.length>0){y(v),n.imageCacher.load(v,function(){u[o]=1,f(e,o,s,h)});return}u[o]=1}if(s=a[s],k=!s||!!s._isLoaded,k)h&&h();else{if(l=s._pending||(s._pending=[]),l.push(h),l.length>1)return;var w=!s.css||!s.css.length,b=!s.js||!s.js.length,d=function(){if(w&&b){s._isLoaded=1;for(var n=0;n<l.length;n++)l[n]&&l[n]()}};if(!w){if(c=s.css,t.isArray(c))for(y(c),p=0;p<c.length;p++)n.document.appendStyleSheet(c[p]);else c=g(c,n.getUrl(i[o])),n.document.appendStyleText(c);s.css=c,w=1}b||(y(s.js),n.scriptLoader.load(s.js,function(){b=1,d()})),d()}};return{add:function(t,u){r[t]=u,u.skinPath=i[t]||(i[t]=n.getUrl("skins/"+t+"/"))},load:function(t,u,e){var o=t.skinName,s=t.skinPath;r[o]?f(t,o,u,e):(i[o]=s,n.scriptLoader.load(s+"skin.js",function(){f(t,o,u,e)}))}}}(),n.themes=new n.resourceManager("themes/","theme"),n.ui=function(n){return n.ui?n.ui:(this._={handlers:{},items:{},editor:n},this)},e=n.ui,e.prototype={add:function(n,t,i){this._.items[n]={type:t,command:i.command||null,args:Array.prototype.slice.call(arguments,2)}},create:function(n){var i=this,t=i._.items[n],r=t&&i._.handlers[t.type],u=t&&t.command&&i._.editor.getCommand(t.command),f=r&&r.create.apply(i,t.args);return u&&u.uiItems.push(f),f},addHandler:function(n,t){this._.handlers[n]=t}},function(){function k(){var n,t=this._.commands,r=this.mode,i;for(i in t)n=t[i],n[n.modes[r]?"enable":"disable"]()}var c=0,u=function(){var t="editor"+ ++c;return n.instances&&n.instances[t]?u():t},h={},i=function(t){var r=t.config.customConfig,u;return r?(r=n.getUrl(r),u=h[r]||(h[r]={}),u.fn?(u.fn.call(t,t.config),n.getUrl(t.config.customConfig)!=r&&i(t)||t.fireOnce("customConfigLoaded")):n.scriptLoader.load(r,function(){u.fn=n.editorConfig?n.editorConfig:function(){},i(t)}),!0):!1},l=function(n,r){n.on("customConfigLoaded",function(){if(r){if(r.on)for(var i in r.on)n.on(i,r.on[i]);t.extend(n.config,r,!0),delete n.config.on}a(n)});r&&r.customConfig!=undefined&&(n.config.customConfig=r.customConfig),i(n)||n.fireOnce("customConfigLoaded")},a=function(t){var r=t.config.skin.split(","),i=r[0],u=n.getUrl(r[1]||"skins/"+i+"/");t.skinName=i,t.skinPath=u,t.skinClass="cke_skin_"+i,t.fireOnce("configLoaded"),p(t)},v=function(i){n.lang.load(i.config.language,i.config.defaultLanguage,function(n,u){i.langCode=n,i.lang=t.prototypedCopy(u),r.gecko&&r.version<10900&&i.lang.dir=="rtl"&&(i.lang.dir="ltr"),y(i)})},y=function(i){var e=i.config,r=e.plugins,o=e.extraPlugins,s=e.removePlugins,u;o&&(u=new RegExp("(?:^|,)(?:"+o.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),r=r.replace(u,"")+(","+o)),s&&(u=new RegExp("(?:^|,)(?:"+s.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),r=r.replace(u,"")),f.load(r.split(","),function(r){var o=[],s=[],l=[],h;i.plugins=r;for(h in r){var e=r[h],c=e.lang,a=f.getPath(h),u=null;e.path=a,c&&(u=t.indexOf(c,i.langCode)>=0?i.langCode:c[0],e.lang[u]?(t.extend(i.lang,e.lang[u]),u=null):l.push(n.getUrl(a+"lang/"+u+".js"))),s.push(u),o.push(e)}n.scriptLoader.load(l,function(){for(var f=["beforeInit","init","afterInit"],r,u,n=0;n<f.length;n++)for(r=0;r<o.length;r++)u=o[r],n===0&&s[r]&&u.lang&&t.extend(i.lang,u.lang[s[r]]),u[f[n]]&&u[f[n]](i);i.fire("pluginsLoaded"),w(i)})})},p=function(t){n.skins.load(t,"editor",function(){v(t)})},w=function(t){var i=t.config.theme;n.themes.load(i,function(){var r=t.theme=n.themes.get(i);r.path=n.themes.getPath(i),r.build(t),t.config.autoUpdateElement&&b(t)})},b=function(n){var r=n.element,i;if(n.elementMode==1&&r.is("textarea")&&(i=r.$.form&&new o(r.$.form),i)){function r(){n.updateElement()}i.on("submit",r);i.$.submit.nodeName||(i.$.submit=t.override(i.$.submit,function(t){return function(){n.updateElement(),t.apply?t.apply(this,arguments):t()}}));n.on("destroy",function(){i.removeListener("submit",r)})}};n.editor.prototype._init=function(){var i=this,r=o.get(i._.element),f=i._.instanceConfig;if(delete i._.element,delete i._.instanceConfig,i._.commands={},i._.styles=[],i.element=r,i.name=r&&i.elementMode==1&&(r.getId()||r.getNameAtt())||u(),i.name in n.instances)throw'[CKEDITOR.editor] The instance "'+i.name+'" already exists.';i.config=t.prototypedCopy(s),i.ui=new e(i),i.focusManager=new n.focusManager(i),n.fire("instanceCreated",null,i);i.on("mode",k,null,null,1);l(i,f)}}(),t.extend(n.editor.prototype,{addCommand:function(t,i){return this._.commands[t]=new n.command(this,i)},addCss:function(n){this._.styles.push(n)},destroy:function(t){var i=this;t||i.updateElement(),i.theme.destroy(i),i.fire("destroy"),n.remove(i),n.fire("instanceDestroyed",null,i)},execCommand:function(n,t){var i=this.getCommand(n),r={name:n,commandData:t,command:i};return i&&i.state!=0&&this.fire("beforeCommandExec",r)!==!0&&(r.returnValue=i.exec(r.commandData),!i.async&&this.fire("afterCommandExec",r)!==!0)?r.returnValue:!1},getCommand:function(n){return this._.commands[n]},getData:function(){var t=this,n,i;return t.fire("beforeGetData"),n=t._.data,typeof n!="string"&&(i=t.element,n=i&&t.elementMode==1?i.is("textarea")?i.getValue():i.getHtml():""),n={dataValue:n},t.fire("getData",n),n.dataValue},getSnapshot:function(){var t=this.fire("getSnapshot"),n;return typeof t!="string"&&(n=this.element,n&&this.elementMode==1&&(t=n.is("textarea")?n.getValue():n.getHtml())),t},loadSnapshot:function(n){this.fire("loadSnapshot",n)},setData:function(n,t){if(t)this.on("dataReady",function(n){n.removeListener(),t.call(n.editor)});var i={dataValue:n};this.fire("setData",i),this._.data=i.dataValue,this.fire("afterSetData",i)},insertHtml:function(n){this.fire("insertHtml",n)},insertElement:function(n){this.fire("insertElement",n)},checkDirty:function(){return this.mayBeDirty&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this.mayBeDirty&&(this._.previousValue=this.getSnapshot())},updateElement:function(){var i=this,r=i.element,n;r&&i.elementMode==1&&(n=i.getData(),i.config.htmlEncodeOutput&&(n=t.htmlEncode(n)),r.is("textarea")?r.setValue(n):r.setHtml(n))}});n.on("loaded",function(){var i=n.editor._pending,t;if(i)for(delete n.editor._pending,t=0;t<i.length;t++)i[t]._init()});n.htmlParser=function(){this._={htmlPartsRegex:new RegExp("<(?:(?:\\/([^>]+)>)|(?:!--([\\S|\\s]*?)-->)|(?:([^\\s>]+)\\s*((?:(?:[^\"'>]+)|(?:\"[^\"]*\")|(?:'[^']*'))*)\\/?>))","g")}},function(){var t=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,i={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};n.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(n){for(var f=this,e,r,o=0,u,a,v,l,y;e=f._.htmlPartsRegex.exec(n);){if(a=e.index,a>o)if(v=n.substring(o,a),u)u.push(v);else f.onText(v);if(o=f._.htmlPartsRegex.lastIndex,r=e[1]){if(r=r.toLowerCase(),u&&h.$cdata[r]){f.onCDATA(u.join(""));u=null}if(!u){f.onTagClose(r);continue}}if(u){u.push(e[0]);continue}if(r=e[3]){r=r.toLowerCase();var p={},s,c=e[4],w=!!(c&&c.charAt(c.length-1)=="/");if(c)while(s=t.exec(c))l=s[1].toLowerCase(),y=s[2]||s[3]||s[4]||"",p[l]=!y&&i[l]?l:y;f.onTagOpen(r,p,w);!u&&h.$cdata[r]&&(u=[]);continue}if(r=e[2])f.onComment(r)}if(n.length>o)f.onText(n.substring(o,n.length))}}}(),n.htmlParser.comment=function(n){this.value=n,this._={isBlockLike:!1}},n.htmlParser.comment.prototype={type:8,writeHtml:function(n,t){var i=this.value;if(t){if(!(i=t.onComment(i,this)))return;if(typeof i!="string"){i.parent=this.parent,i.writeHtml(n,t);return}}n.comment(i)}},function(){n.htmlParser.text=function(n){this.value=n,this._={isBlockLike:!1}},n.htmlParser.text.prototype={type:3,writeHtml:function(n,t){var i=this.value;(!t||(i=t.onText(i,this)))&&n.text(i)}}}(),function(){n.htmlParser.cdata=function(n){this.value=n},n.htmlParser.cdata.prototype={type:3,writeHtml:function(n){n.write(this.value)}}}(),n.htmlParser.fragment=function(){this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},function(){var r={colgroup:1,dd:1,dt:1,li:1,option:1,p:1,td:1,tfoot:1,th:1,thead:1,tr:1},u=t.extend({table:1,ul:1,ol:1,dl:1},h.table,h.ul,h.ol,h.dl),i=h.$list,f=h.$listItem;n.htmlParser.fragment.fromHtml=function(e,o){function k(n){var t;if(c.length>0)for(t=0;t<c.length;t++){var i=c[t],r=i.name,u=h[r],f=s.name&&h[s.name];f&&!f[r]||n&&u&&!u[n]&&h[n]||(i=i.clone(),i.parent=s,s=i,c.splice(t,1),t--)}}function v(n,i,r){var f,c,a,e,u,v;if(i=i||s||w,o&&!i.type&&(f=n.attributes&&(c=n.attributes._cke_real_element_type)?c:n.name,f&&!(f in h.$body)&&!(f in h.$nonBodyContent))){a=s,s=i;l.onTagOpen(o,{});i=s,r&&(s=a)}n._.isBlockLike&&n.name!="pre"&&(e=n.children.length,u=n.children[e-1],u&&u.type==3&&((v=t.rtrim(u.value))?u.value=v:n.children.length=e-1)),i.add(n),n.returnPoint&&(s=n.returnPoint,delete n.returnPoint)}var l=new n.htmlParser,w=new n.htmlParser.fragment,c=[],s=w,y=!1,p,a,b;for(l.onTagOpen=function(t,e,o){var a=new n.htmlParser.element(t,e),w,d,g,nt,tt,b;if(a.isUnknown&&o&&(a.isEmpty=!0),h.$removeEmpty[t]){c.push(a);return}if(t=="pre")y=!0;else if(t=="br"&&y){s.add(new n.htmlParser.text("\n"));return}if(w=s.name,d=w&&(h[w]||(s._.isBlockLike?h.div:h.span)),d&&!a.isUnknown&&!s.isUnknown&&!d[t]&&(g=!1,t in i&&w in i?(tt=s.children,b=tt[tt.length-1],b&&b.name in f||v(b=new n.htmlParser.element("li"),s),p=s,nt=b):t==w?v(s,s.parent):(u[w]?p||(p=s):(v(s,s.parent,!0),r[w]||c.unshift(s)),g=!0),s=nt?nt:s.returnPoint||s.parent,g)){l.onTagOpen.apply(this,arguments);return}k(t),a.parent=s,a.returnPoint=p,p=0,a.isEmpty?v(a):s=a},l.onTagClose=function(n){for(var u,i=c.length-1;i>=0;i--)if(n==c[i].name){c.splice(i,1);return}for(var r=[],f=[],t=s;t.type&&t.name!=n;)t._.isBlockLike||f.unshift(t),r.push(t),t=t.parent;if(t.type){for(i=0;i<r.length;i++)u=r[i],v(u,u.parent);s=t,s.name=="pre"&&(y=!1),v(t,t.parent),t==s&&(s=s.parent),c=c.concat(f)}n=="body"&&(o=!1)},l.onText=function(i){if(s._.hasInlineStarted||y||(i=t.ltrim(i),i.length!==0)){if(k(),o&&(!s.type||s.name=="body")&&t.trim(i))this.onTagOpen(o,{});y||(i=i.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),s.add(new n.htmlParser.text(i))}},l.onCDATA=function(t){s.add(new n.htmlParser.cdata(t))},l.onComment=function(t){s.add(new n.htmlParser.comment(t))},l.parse(e);s.type;){if(a=s.parent,b=s,o&&(!a.type||a.name=="body")&&!h.$body[b.name]){s=a;l.onTagOpen(o,{});a=s}a.add(b),s=a}return w},n.htmlParser.fragment.prototype={add:function(n){var i=this,u=i.children.length,r=u>0&&i.children[u-1]||null;if(r){if(n._.isBlockLike&&r.type==3&&(r.value=t.rtrim(r.value),r.value.length===0)){i.children.pop(),i.add(n);return}r.next=n}n.previous=r,n.parent=i,i.children.push(n),i._.hasInlineStarted=n.type==3||n.type==1&&!n._.isBlockLike},writeHtml:function(t,i){var r;this.filterChildren=function(){var t=new n.htmlParser.basicWriter,u;this.writeChildrenHtml.call(this,t,i,!0),u=t.getHtml(),this.children=new n.htmlParser.fragment.fromHtml(u).children,r=1},!this.name&&i&&i.onFragment(this),this.writeChildrenHtml(t,r?null:i)},writeChildrenHtml:function(n,t){for(var i=0;i<this.children.length;i++)this.children[i].writeHtml(n,t)}}}(),n.htmlParser.element=function(n,t){var r=this;r.name=n,r.attributes=t||(t={}),r.children=[];var u=t._cke_real_element_type||n,i=h,f=!!(i.$nonBodyContent[u]||i.$block[u]||i.$listItem[u]||i.$tableContent[u]||i.$nonEditable[u]||u=="br"),e=!!i.$empty[n];r.isEmpty=e,r.isUnknown=!i[n],r._={isBlockLike:f,hasInlineStarted:e||!f}},function(){var t=function(n,t){return n=n[0],t=t[0],n<t?-1:n>t?1:0};n.htmlParser.element.prototype={type:1,add:n.htmlParser.fragment.prototype.add,clone:function(){return new n.htmlParser.element(this.name,this.attributes)},writeHtml:function(i,r){var o=this.attributes,u=this,f=u.name,e,s,c,a,l,h,y,v;if(u.filterChildren=function(){if(!a){var t=new n.htmlParser.basicWriter;n.htmlParser.fragment.prototype.writeChildrenHtml.call(u,t,r),u.children=new n.htmlParser.fragment.fromHtml(t.getHtml()).children,a=1}},r){for(;;){if(!(f=r.onElementName(f)))return;if(u.name=f,!(u=r.onElement(u)))return;if(u.parent=this.parent,u.name==f)break;if(u.type!=1){u.writeHtml(i,r);return}if(f=u.name,!f){this.writeChildrenHtml.call(u,i,a?null:r);return}}o=u.attributes}for(i.openTag(f,o),l=[],h=0;h<2;h++)for(e in o)if(s=e,c=o[e],h==1)l.push([e,c]);else if(r){for(;;)if(s=r.onAttributeName(e))if(s!=e){delete o[e],e=s;continue}else break;else{delete o[e];break}s&&((c=r.onAttribute(u,s,c))===!1?delete o[s]:o[s]=c)}for(i.sortAttributes&&l.sort(t),y=l.length,h=0;h<y;h++)v=l[h],i.attribute(v[0],v[1]);i.openTagClose(f,u.isEmpty),u.isEmpty||(this.writeChildrenHtml.call(u,i,a?null:r),i.closeTag(f))},writeChildrenHtml:function(){n.htmlParser.fragment.prototype.writeChildrenHtml.apply(this,arguments)}}}(),function(){function u(n,t){for(var r,i=0;n&&i<t.length;i++)r=t[i],n=n.replace(r[0],r[1]);return n}function r(n,t,i){var r,u,o,e,f;if(typeof t=="function"&&(t=[t]),o=n.length,e=t&&t.length,e){for(r=0;r<o&&n[r].pri<i;r++);for(u=e-1;u>=0;u--)f=t[u],f&&(f.pri=i,n.splice(r,0,f))}}function f(n,t,r){var u,f;if(t)for(u in t)f=n[u],n[u]=i(f,t[u],r),f||n.$length++}function i(n,t,i){if(t)return t.pri=i,n?(n.splice?r(n,t,i):(n=n.pri>i?[t,n]:[n,t],n.filter=e),n):(t.filter=t,t)}function e(n){for(var u=typeof n=="object",r,t,i=0;i<this.length;i++)if(r=this[i],t=r.apply(window,arguments),typeof t!="undefined"){if(t===!1)return!1;if(u&&t!=n)return t}return null}n.htmlParser.filter=t.createClass({$:function(n){this._={elementNames:[],attributeNames:[],elements:{$length:0},attributes:{$length:0}},n&&this.addRules(n,10)},proto:{addRules:function(n,t){var u=this;typeof t!="number"&&(t=10),r(u._.elementNames,n.elementNames,t),r(u._.attributeNames,n.attributeNames,t),f(u._.elements,n.elements,t),f(u._.attributes,n.attributes,t),u._.text=i(u._.text,n.text,t)||u._.text,u._.comment=i(u._.comment,n.comment,t)||u._.comment,u._.root=i(u._.root,n.root,t)||u._.root},onElementName:function(n){return u(n,this._.elementNames)},onAttributeName:function(n){return u(n,this._.attributeNames)},onText:function(n){var t=this._.text;return t?t.filter(n):n},onComment:function(n,t){var i=this._.comment;return i?i.filter(n,t):n},onFragment:function(n){var t=this._.root;return t?t.filter(n):n},onElement:function(n){for(var t=this,f=[t._.elements["^"],t._.elements[n.name],t._.elements.$],u,i,r=0;r<3;r++)if(u=f[r],u){if(i=u.filter(n,t),i===!1)return null;if(i&&i!=n)return t.onNode(i);if(n.parent&&!n.name)break}return n},onNode:function(t){var i=t.type;return i==1?this.onElement(t):i==3?new n.htmlParser.text(this.onText(t.value)):i==8?new n.htmlParser.comment(this.onComment(t.value)):null},onAttribute:function(n,t,i){var u=this._.attributes[t],r;if(u){if(r=u.filter(i,n,this),r===!1)return!1;if(typeof r!="undefined")return r}return i}}})}(),n.htmlParser.basicWriter=t.createClass({$:function(){this._={output:[]}},proto:{openTag:function(n){this._.output.push("<",n)},openTagClose:function(n,t){t?this._.output.push(" />"):this._.output.push(">")},attribute:function(n,t){this._.output.push(" ",n,'="',t,'"')},closeTag:function(n){this._.output.push("<\/",n,">")},text:function(n){this._.output.push(n)},comment:function(n){this._.output.push("<!--",n,"-->")},write:function(n){this._.output.push(n)},reset:function(){this._.output=[],this._.indent=!1},getHtml:function(n){var t=this._.output.join("");return n&&this.reset(),t}}}),delete n.loadFullCore,n.instances={},n.document=new c(document),n.add=function(t){n.instances[t.name]=t;t.on("focus",function(){n.currentInstance!=t&&(n.currentInstance=t,n.fire("currentInstance"))});t.on("blur",function(){n.currentInstance==t&&(n.currentInstance=null,n.fire("currentInstance"))})},n.remove=function(t){delete n.instances[t.name]},n.TRISTATE_ON=1,n.TRISTATE_OFF=2,n.TRISTATE_DISABLED=0,i.comment=t.createClass({base:i.node,$:function(n,t){typeof n=="string"&&(n=(t?t.$:document).createComment(n)),this.base(n)},proto:{type:8,getOuterHtml:function(){return"<!--"+this.$.nodeValue+"-->"}}}),function(){var n={address:1,blockquote:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,li:1,dt:1,de:1},t={body:1,div:1,table:1,tbody:1,tr:1,td:1,th:1,caption:1,form:1},r=function(n){for(var r=n.getChildren(),i,t=0,u=r.count();t<u;t++)if(i=r.getItem(t),i.type==1&&h.$block[i.getName()])return!0;return!1};i.elementPath=function(i){for(var o=this,s=null,h=null,c=[],f=i,e;f;){if(f.type==1&&(o.lastElement||(o.lastElement=f),e=f.getName(),u&&f.$.scopeName!="HTML"&&(e=f.$.scopeName.toLowerCase()+":"+e),h||(!s&&n[e]&&(s=f),t[e]&&(s||e!="div"||r(f)?h=f:s=f)),c.push(f),e=="body"))break;f=f.getParent()}o.block=s,o.blockLimit=h,o.elements=c}}(),i.elementPath.prototype={compare:function(n){var i=this.elements,r=n&&n.elements,t;if(!r||i.length!=r.length)return!1;for(t=0;t<i.length;t++)if(!i[t].equals(r[t]))return!1;return!0}},i.text=function(n,t){typeof n=="string"&&(n=(t?t.$:document).createTextNode(n)),this.$=n},i.text.prototype=new i.node,t.extend(i.text.prototype,{type:3,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},split:function(n){var t=this,f,e,o,s;return u&&n==t.getLength()?(f=t.getDocument().createText(""),f.insertAfter(t),f):(e=t.getDocument(),o=new i.text(t.$.splitText(n),e),r.ie8&&(s=new i.text("",e),s.insertAfter(o),s.remove()),o)},substring:function(n,t){return typeof t!="number"?this.$.nodeValue.substr(n):this.$.nodeValue.substring(n,t)}}),i.documentFragment=function(t){t=t||n.document,this.$=t.$.createDocumentFragment()},t.extend(i.documentFragment.prototype,o.prototype,{type:11,insertAfterNode:function(n){n=n.$,n.parentNode.insertBefore(this.$,n.nextSibling)}},!0,{append:1,appendBogus:1,getFirst:1,getLast:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),function(){function n(n,t){var e,o,s,h,c;if(this._.end)return null;var i,r=this.range,u,l=this.guard,f=this.type,a=n?"getPreviousSourceNode":"getNextSourceNode";if(!this._.start&&(this._.start=1,r.trim(),r.collapsed))return this.end(),null;for(n||this._.guardLTR||(e=r.endContainer,o=e.getChild(r.endOffset),this._.guardLTR=function(n,t){return(!t||!e.equals(n))&&(!o||!n.equals(o))&&(n.type!=1||!t||n.getName()!="body")}),n&&!this._.guardRTL&&(s=r.startContainer,h=r.startOffset>0&&s.getChild(r.startOffset-1),this._.guardRTL=function(n,t){return(!t||!s.equals(n))&&(!h||!n.equals(h))&&(n.type!=1||!t||n.getName()!="body")}),c=n?this._.guardRTL:this._.guardLTR,u=l?function(n,t){return c(n,t)===!1?!1:l(n,t)}:c,this.current?i=this.current[a](!1,f,u):n?(i=r.endContainer,r.endOffset>0?(i=i.getChild(r.endOffset-1),u(i)===!1&&(i=null)):i=u(i)===!1?null:i.getPreviousSourceNode(!0,f,u)):(i=r.startContainer,i=i.getChild(r.startOffset),i?u(i)===!1&&(i=null):i=u(r.startContainer)===!1?null:r.startContainer.getNextSourceNode(!0,f,u));i&&!this._.end;){if(this.current=i,this.evaluator&&this.evaluator(i)===!1){if(t&&this.evaluator)return!1}else if(!t)return i;i=i[a](!1,f,u)}return this.end(),this.current=null}function r(t){for(var i,r=null;i=n.call(this,t);)r=i;return r}var f,e;i.walker=t.createClass({$:function(n){this.range=n,this._={}},proto:{end:function(){this._.end=1},next:function(){return n.call(this)},previous:function(){return n.call(this,!0)},checkForward:function(){return n.call(this,!1,!0)!==!1},checkBackward:function(){return n.call(this,!0,!0)!==!1},lastForward:function(){return r.call(this)},lastBackward:function(){return r.call(this,!0)},reset:function(){delete this.current,this._={}}}}),f={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},e={hr:1},o.prototype.isBlockBoundary=function(n){var i=t.extend({},e,n||{});return f[this.getComputedStyle("display")]||i[this.getName()]},i.walker.blockBoundary=function(n){return function(t){return!(t.type==1&&t.isBlockBoundary(n))}},i.walker.listItemBoundary=function(){return this.blockBoundary({br:1})},i.walker.bookmarkContents=function(){},i.walker.bookmark=function(n,t){function i(n){return n&&n.getName&&n.getName()=="span"&&n.hasAttribute("_fck_bookmark")}return function(r){var u,f;return u=r&&!r.getName&&(f=r.getParent())&&i(f),u=n?u:u||i(r),t^u}},i.walker.whitespaces=function(n){return function(i){var r=i&&i.type==3&&!t.trim(i.getText());return n^r}},i.walker.invisible=function(n){var t=i.walker.whitespaces();return function(i){var r=t(i)||i.is&&!i.$.offsetHeight;return n^r}};var s=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,h=i.walker.whitespaces(!0),c=i.walker.bookmark(!1,!0),l=function(n){return c(n)&&h(n)};o.prototype.getBogus=function(){var n=this.getLast(l);return n&&(u?n.getText&&s.test(n.getText()):n.is&&n.is("br"))?n:!1}}(),i.range=function(n){var t=this;t.startContainer=null,t.startOffset=null,t.endContainer=null,t.endOffset=null,t.collapsed=!0,t.document=n},function(){function f(n){var r=!1,f=i.walker.bookmark(!0);return function(i){if(f(i))return!0;if(i.type==3){if(t.trim(i.getText()).length)return!1}else if(i.type==1&&!o[i.getName()]){if(n||u||i.getName()!="br"||r)return!1;r=!0}return!0}}function s(n){return n.type!=3&&n.getName()in h.$removeEmpty||!t.trim(n.getText())||n.getParent().hasAttribute("_fck_bookmark")}function e(n){return!c(n)&&!l(n)}var n=function(n){n.collapsed=n.startContainer&&n.endContainer&&n.startContainer.equals(n.endContainer)&&n.startOffset==n.endOffset},r=function(n,t,i){var s,y,h,k,c,e,o,d,r,g,p,l,v,a,tt;n.optimizeBookmark();var u=n.startContainer,f=n.endContainer,w=n.startOffset,nt=n.endOffset,b,it;for(f.type==3?f=f.split(nt):f.getChildCount()>0&&(nt>=f.getChildCount()?(f=f.append(n.document.createText("")),it=!0):f=f.getChild(nt)),u.type==3?(u.split(w),u.equals(f)&&(f=u.getNext())):w?w>=u.getChildCount()?(u=u.append(n.document.createText("")),b=!0):u=u.getChild(w).getPrevious():(u=u.getFirst().insertBeforeMe(n.document.createText("")),b=!0),s=u.getParents(),y=f.getParents(),h=0;h<s.length;h++)if(k=s[h],c=y[h],!k.equals(c))break;for(e=i,p=h;p<s.length;p++){for(o=s[p],e&&!o.equals(u)&&(d=e.append(o.clone())),r=o.getNext();r;){if(r.equals(y[p])||r.equals(f))break;g=r.getNext(),t==2?e.append(r.clone(!0)):(r.remove(),t==1&&e.append(r)),r=g}e&&(e=d)}for(e=i,l=h;l<y.length;l++){if(o=y[l],t>0&&!o.equals(f)&&(d=e.append(o.clone())),!s[l]||o.$.parentNode!=s[l].$.parentNode)for(r=o.getPrevious();r;){if(r.equals(s[l])||r.equals(u))break;g=r.getPrevious(),t==2?e.$.insertBefore(r.$.cloneNode(!0),e.$.firstChild):(r.remove(),t==1&&e.$.insertBefore(r.$,e.$.firstChild)),r=g}e&&(e=d)}t==2?(v=n.startContainer,v.type==3&&(v.$.data+=v.$.nextSibling.data,v.$.parentNode.removeChild(v.$.nextSibling)),a=n.endContainer,a.type==3&&a.$.nextSibling&&(a.$.data+=a.$.nextSibling.data,a.$.parentNode.removeChild(a.$.nextSibling))):(k&&c&&(u.$.parentNode!=k.$.parentNode||f.$.parentNode!=c.$.parentNode)&&(tt=c.getIndex(),b&&c.$.parentNode==u.$.parentNode&&tt--,n.setStart(c.getParent(),tt)),n.collapse(!0)),b&&u.remove(),it&&f.$.parentNode&&f.remove()},o={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},c=new i.walker.whitespaces,l=new i.walker.bookmark;i.range.prototype={clone:function(){var n=this,t=new i.range(n.document);return t.startContainer=n.startContainer,t.startOffset=n.startOffset,t.endContainer=n.endContainer,t.endOffset=n.endOffset,t.collapsed=n.collapsed,t},collapse:function(n){var t=this;n?(t.endContainer=t.startContainer,t.endOffset=t.startOffset):(t.startContainer=t.endContainer,t.startOffset=t.endOffset),t.collapsed=!0},cloneContents:function(){var n=new i.documentFragment(this.document);return this.collapsed||r(this,2,n),n},deleteContents:function(){this.collapsed||r(this,0)},extractContents:function(){var n=new i.documentFragment(this.document);return this.collapsed||r(this,1,n),n},createBookmark:function(n){var r=this,i,u,e,f;return i=r.document.createElement("span"),i.setAttribute("_fck_bookmark",1),i.setStyle("display","none"),i.setHtml("&nbsp;"),n&&(e="cke_bm_"+t.getNextNumber(),i.setAttribute("id",e+"S")),r.collapsed||(u=i.clone(),u.setHtml("&nbsp;"),n&&u.setAttribute("id",e+"E"),f=r.clone(),f.collapse(),f.insertNode(u)),f=r.clone(),f.collapse(!0),f.insertNode(i),u?(r.setStartAfter(i),r.setEndBefore(u)):r.moveToPosition(i,4),{startNode:n?e+"S":i,endNode:n?e+"E":u,serializable:n}},createBookmark2:function(n){var f=this,i=f.startContainer,r=f.endContainer,e=f.startOffset,o=f.endOffset,t,u;if(!i||!r)return{start:0,end:0};if(n){for(i.type==1&&(t=i.getChild(e),t&&t.type==3&&e>0&&t.getPrevious().type==3&&(i=t,e=0));i.type==3&&(u=i.getPrevious())&&u.type==3;)i=u,e+=u.getLength();if(!f.isCollapsed)for(r.type==1&&(t=r.getChild(o),t&&t.type==3&&o>0&&t.getPrevious().type==3&&(r=t,o=0));r.type==3&&(u=r.getPrevious())&&u.type==3;)r=u,o+=u.getLength()}return{start:i.getAddress(n),end:f.isCollapsed?null:r.getAddress(n),startOffset:e,endOffset:o,normalized:n,is2:!0}},moveToBookmark:function(n){var t=this;if(n.is2){var e=t.document.getByAddress(n.start,n.normalized),o=n.startOffset,r=n.end&&t.document.getByAddress(n.end,n.normalized),s=n.endOffset;t.setStart(e,o),r?t.setEnd(r,s):t.collapse(!0)}else{var u=n.serializable,f=u?t.document.getById(n.startNode):n.startNode,i=u?t.document.getById(n.endNode):n.endNode;t.setStartBefore(f),f.remove(),i?(t.setEndBefore(i),i.remove()):t.collapse(!0)}},getBoundaryNodes:function(){var u=this,n=u.startContainer,t=u.endContainer,f=u.startOffset,e=u.endOffset,r;if(n.type==1)if(r=n.getChildCount(),r>f)n=n.getChild(f);else if(r<1)n=n.getPreviousSourceNode();else{for(n=n.$;n.lastChild;)n=n.lastChild;n=new i.node(n),n=n.getNextSourceNode()||n}if(t.type==1)if(r=t.getChildCount(),r>e)t=t.getChild(e).getPreviousSourceNode(!0);else if(r<1)t=t.getPreviousSourceNode();else{for(t=t.$;t.lastChild;)t=t.lastChild;t=new i.node(t)}return n.getPosition(t)&2&&(n=t),{startNode:n,endNode:t}},getCommonAncestor:function(n,t){var i=this,r=i.startContainer,f=i.endContainer,u;return u=r.equals(f)?n&&r.type==1&&i.startOffset==i.endOffset-1?r.getChild(i.startOffset):r:r.getCommonAncestor(f),t&&!u.is?u.getParent():u},optimize:function(){var t=this,n=t.startContainer,i=t.startOffset;n.type!=1&&(i?i>=n.getLength()&&t.setStartAfter(n):t.setStartBefore(n)),n=t.endContainer,i=t.endOffset,n.type!=1&&(i?i>=n.getLength()&&t.setEndAfter(n):t.setEndBefore(n))},optimizeBookmark:function(){var t=this,i=t.startContainer,n=t.endContainer;i.is&&i.is("span")&&i.hasAttribute("_fck_bookmark")&&t.setStartAt(i,3),n&&n.is&&n.is("span")&&n.hasAttribute("_fck_bookmark")&&t.setEndAt(n,4)},trim:function(n,t){var u=this,r=u.startContainer,e=u.startOffset,o=u.collapsed,s,i,f;(!n||o)&&r&&r.type==3&&(e?e>=r.getLength()?(e=r.getIndex()+1,r=r.getParent()):(s=r.split(e),e=r.getIndex()+1,r=r.getParent(),!o&&u.startContainer.equals(u.endContainer)&&u.setEnd(s,u.endOffset-u.startOffset)):(e=r.getIndex(),r=r.getParent()),u.setStart(r,e),o&&u.collapse(!0)),i=u.endContainer,f=u.endOffset,t||o||!i||i.type!=3||(f?f>=i.getLength()?(f=i.getIndex()+1,i=i.getParent()):(i.split(f),f=i.getIndex()+1,i=i.getParent()):(f=i.getIndex(),i=i.getParent()),u.setEnd(i,f))},enlarge:function(n){var g,nt,tt,p,a;switch(n){case 1:if(this.collapsed)return;var w=this.getCommonAncestor(),v=this.document.getBody(),b,k,u,r,c,e=!1,l,o,f=this.startContainer,y=this.startOffset;for(f.type==3?(y&&(f=!t.trim(f.substring(0,y)).length&&f,e=!!f),f&&((r=f.getPrevious())||(u=f.getParent()))):(y&&(r=f.getChild(y-1)||f.getLast()),r||(u=f));u||r;){if(u&&!r){if(!c&&u.equals(w)&&(c=!0),!v.contains(u))break;e&&u.getComputedStyle("display")=="inline"||(e=!1,c?b=u:this.setStartBefore(u)),r=u.getPrevious()}while(r){if(l=!1,r.type==3)o=r.getText(),/[^\s\ufeff]/.test(o)&&(r=null),l=/[\s\ufeff]$/.test(o);else if(r.$.offsetWidth>0&&!r.getAttribute("_fck_bookmark"))if(e&&h.$removeEmpty[r.getName()]){if(o=r.getText(),/[^\s\ufeff]/.test(o)){for(g=r.$.all||r.$.getElementsByTagName("*"),nt=0;tt=g[nt++];)if(!h.$removeEmpty[tt.nodeName.toLowerCase()]){r=null;break}}else r=null;r&&(l=!!o.length)}else r=null;if(l&&(e?c?b=u:u&&this.setStartBefore(u):e=!0),r){if(p=r.getPrevious(),!u&&!p){u=r,r=null;break}r=p}else u=null}u&&(u=u.getParent())}for(f=this.endContainer,y=this.endOffset,u=r=null,c=e=!1,f.type==3?(f=!t.trim(f.substring(y)).length&&f,e=!(f&&f.getLength()),f&&((r=f.getNext())||(u=f.getParent()))):(r=f.getChild(y),r||(u=f));u||r;){if(u&&!r){if(!c&&u.equals(w)&&(c=!0),!v.contains(u))break;e&&u.getComputedStyle("display")=="inline"||(e=!1,c?k=u:u&&this.setEndAfter(u)),r=u.getNext()}while(r){if(l=!1,r.type==3)o=r.getText(),/[^\s\ufeff]/.test(o)&&(r=null),l=/^[\s\ufeff]/.test(o);else if(r.$.offsetWidth>0&&!r.getAttribute("_fck_bookmark"))if(e&&h.$removeEmpty[r.getName()]){if(o=r.getText(),/[^\s\ufeff]/.test(o)){for(g=r.$.all||r.$.getElementsByTagName("*"),nt=0;tt=g[nt++];)if(!h.$removeEmpty[tt.nodeName.toLowerCase()]){r=null;break}}else r=null;r&&(l=!!o.length)}else r=null;if(l&&e&&(c?k=u:this.setEndAfter(u)),r){if(p=r.getNext(),!u&&!p){u=r,r=null;break}r=p}else u=null}u&&(u=u.getParent())}b&&k&&(w=b.contains(k)?k:b,this.setStartBefore(w),this.setEndAfter(w));break;case 2:case 3:a=new i.range(this.document),v=this.document.getBody(),a.setStartAt(v,1),a.setEnd(this.startContainer,this.startOffset);var d=new i.walker(a),s,it,ut=i.walker.blockBoundary(n==3?{br:1}:null),rt=function(n){var t=ut(n);return t||(s=n),t},ft=function(n){var t=rt(n);return!t&&n.is&&n.is("br")&&(it=n),t};d.guard=rt,u=d.lastBackward(),s=s||v,this.setStartAt(s,!s.is("br")&&(!u&&this.checkStartOfBlock()||u&&s.contains(u))?1:4),a=this.clone(),a.collapse(),a.setEndAt(v,2),d=new i.walker(a),d.guard=n==3?ft:rt,s=null,u=d.lastForward(),s=s||v,this.setEndAt(s,!u&&this.checkEndOfBlock()||u&&s.contains(u)?2:3),it&&this.setEndAfter(it)}},insertNode:function(n){var t=this;t.optimizeBookmark(),t.trim(!1,!0);var i=t.startContainer,u=t.startOffset,r=i.getChild(u);r?n.insertBefore(r):i.append(n),n.getParent().equals(t.endContainer)&&t.endOffset++,t.setStartBefore(n)},moveToPosition:function(n,t){this.setStartAt(n,t),this.collapse(!0)},selectNodeContents:function(n){this.setStart(n,0),this.setEnd(n,n.type==3?n.getLength():n.getChildCount())},setStart:function(t,i){var r=this;r.startContainer=t,r.startOffset=i,r.endContainer||(r.endContainer=t,r.endOffset=i),n(r)},setEnd:function(t,i){var r=this;r.endContainer=t,r.endOffset=i,r.startContainer||(r.startContainer=t,r.startOffset=i),n(r)},setStartAfter:function(n){this.setStart(n.getParent(),n.getIndex()+1)},setStartBefore:function(n){this.setStart(n.getParent(),n.getIndex())},setEndAfter:function(n){this.setEnd(n.getParent(),n.getIndex()+1)},setEndBefore:function(n){this.setEnd(n.getParent(),n.getIndex())},setStartAt:function(t,i){var r=this;switch(i){case 1:r.setStart(t,0);break;case 2:t.type==3?r.setStart(t,t.getLength()):r.setStart(t,t.getChildCount());break;case 3:r.setStartBefore(t);break;case 4:r.setStartAfter(t)}n(r)},setEndAt:function(t,i){var r=this;switch(i){case 1:r.setEnd(t,0);break;case 2:t.type==3?r.setEnd(t,t.getLength()):r.setEnd(t,t.getChildCount());break;case 3:r.setEndBefore(t);break;case 4:r.setEndAfter(t)}n(r)},fixBlock:function(n,t){var i=this,f=i.createBookmark(),r=i.document.createElement(t);return i.collapse(n),i.enlarge(2),i.extractContents().appendTo(r),r.trim(),u||r.appendBogus(),i.insertNode(r),i.moveToBookmark(f),r},splitBlock:function(n){var t=this,h=new i.elementPath(t.startContainer),c=new i.elementPath(t.endContainer),l=h.blockLimit,a=c.blockLimit,r=h.block,f=c.block,e=null,o,s;return l.equals(a)?(n!="br"&&(r||(r=t.fixBlock(!0,n),f=new i.elementPath(t.endContainer).block),f||(f=t.fixBlock(!1,n))),o=r&&t.checkStartOfBlock(),s=f&&t.checkEndOfBlock(),t.deleteContents(),r&&r.equals(f)&&(s?(e=new i.elementPath(t.startContainer),t.moveToPosition(f,4),f=null):o?(e=new i.elementPath(t.startContainer),t.moveToPosition(r,3),r=null):(f=t.splitElement(r),u||r.is("ul","ol")||r.appendBogus())),{previousBlock:r,nextBlock:f,wasStartOfBlock:o,wasEndOfBlock:s,elementPath:e}):null},splitElement:function(n){var t=this,r,i;return t.collapsed?(t.setEndAt(n,2),r=t.extractContents(),i=n.clone(!1),r.appendTo(i),i.insertAfter(n),t.moveToPosition(n,4),i):null},checkBoundaryOfElement:function(n,t){var u=this.clone(),r,f;return u[t==1?"setStartAt":"setEndAt"](n,t==1?1:2),r=new i.walker(u),f=!1,r.evaluator=s,r[t==1?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var n=this,o=n.startContainer,s=n.startOffset,h,u,r,e;return s&&o.type==3&&(h=t.ltrim(o.substring(0,s)),h.length)?!1:(n.trim(),u=new i.elementPath(n.startContainer),r=n.clone(),r.collapse(!0),r.setStartAt(u.block||u.blockLimit,1),e=new i.walker(r),e.evaluator=f(!0),e.checkBackward())},checkEndOfBlock:function(){var n=this,o=n.endContainer,h=n.endOffset,s,u,r,e;return o.type==3&&(s=t.rtrim(o.substring(h)),s.length)?!1:(n.trim(),u=new i.elementPath(n.endContainer),r=n.clone(),r.collapse(!1),r.setEndAt(u.block||u.blockLimit,2),e=new i.walker(r),e.evaluator=f(!1),e.checkForward())},moveToElementEditablePosition:function(n,t){for(var i;n&&n.type==1;){if(i=n.isEditable(),i)this.moveToPosition(n,t?2:1);else if(h.$inline[n.getName()])return this.moveToPosition(n,t?4:3),!0;if(n=h.$empty[n.getName()]?n[t?"getPrevious":"getNext"](e):n[t?"getLast":"getFirst"](e),n&&n.type==3)return this.moveToPosition(n,t?4:3),!0}return i},moveToElementEditStart:function(n){return this.moveToElementEditablePosition(n)},moveToElementEditEnd:function(n){return this.moveToElementEditablePosition(n,!0)},getEnclosedNode:function(){var r=this.clone(),t=new i.walker(r),u=i.walker.bookmark(!0),f=i.walker.whitespaces(!0),e=function(n){return f(n)&&u(n)},n;return r.evaluator=e,n=t.next(),t.reset(),n&&n.equals(t.previous())?n:null},getTouchedStartNode:function(){var n=this.startContainer;return this.collapsed||n.type!=1?n:n.getChild(this.startOffset)||n},getTouchedEndNode:function(){var n=this.endContainer;return this.collapsed||n.type!=1?n:n.getChild(this.endOffset-1)||n}}}(),n.POSITION_AFTER_START=1,n.POSITION_BEFORE_END=2,n.POSITION_BEFORE_START=3,n.POSITION_AFTER_END=4,n.ENLARGE_ELEMENT=1,n.ENLARGE_BLOCK_CONTENTS=2,n.ENLARGE_LIST_ITEM_CONTENTS=3,n.START=1,n.END=2,n.STARTEND=3,function(){var i=u&&r.version<7,f=u&&r.version==7,e=i?n.basePath+"images/spacer.gif":f?"about:blank":"data:image/png;base64,",t=o.createFromHtml('<div style="width:0px;height:0px;position:absolute;left:-10000px;background-image:url('+e+')"><\/div>',n.document);t.appendTo(n.document.getHead());try{r.hc=t.getComputedStyle("background-image")=="none"}catch(s){r.hc=!1}r.hc&&(r.cssClass+=" cke_hc"),t.remove()}(),f.load(s.corePlugins.split(","),function(){var t,i;if(n.status="loaded",n.fire("loaded"),t=n._.pending,t)for(delete n._.pending,i=0;i<t.length;i++)n.add(t[i])}),n.skins.add("kama",function(){var i=[],f="cke_ui_color";return u&&r.version<7&&i.push("icons.png","images/sprites_ie6.png","images/dialog_sides.gif"),{preload:i,editor:{css:["editor.css"]},dialog:{css:["dialog.css"]},templates:{css:["templates.css"]},margins:[0,0,0,0],init:function(i){function l(n){var t=n.getById(f);return t||(t=n.getHead().append("style"),t.setAttribute("id",f),t.setAttribute("type","text/css")),t}function s(n,t,i){for(var f,s,e,o=0;o<n.length;o++)if(r.webkit)for(s=0;s<t.length;s++){for(e=t[s][1],f=0;f<i.length;f++)e=e.replace(i[f][0],i[f][1]);n[o].$.sheet.addRule(t[s][0],e)}else{for(e=t,f=0;f<i.length;f++)e=e.replace(i[f][0],i[f][1]);u?n[o].$.styleSheet.cssText+=e:n[o].$.innerHTML+=e}}var o,h;i.config.width&&!isNaN(i.config.width)&&(i.config.width-=12);var c=[],e="/* UI Color Support */.cke_skin_kama .cke_menuitem .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_label,.cke_skin_kama .cke_menuitem a:focus .cke_label,.cke_skin_kama .cke_menuitem a:active .cke_label{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_label{\tbackground-color: transparent !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuseparator{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover,.cke_skin_kama .cke_menuitem a:focus,.cke_skin_kama .cke_menuitem a:active{\tbackground-color: $color !important;}";if(r.webkit)for(e=e.split("}").slice(0,-1),o=0;o<e.length;o++)e[o]=e[o].split("{");h=/\$color/g,t.extend(i,{uiColor:null,getUiColor:function(){return this.uiColor},setUiColor:function(u){var o,y=l(n.document),f=".cke_editor_"+t.escapeCssSelector(i.name),a=[f+" .cke_wrapper",f+"_dialog .cke_dialog_contents",f+"_dialog a.cke_dialog_tab",f+"_dialog .cke_dialog_footer"].join(","),v="background-color: $color !important;";return o=r.webkit?[[a,v]]:a+"{"+v+"}",(this.setUiColor=function(n){var t=[[h,n]];i.uiColor=n,s([y],o,t),s(c,e,t)})(u)}});i.on("menuShow",function(n){var f=n.data[0],u=f.element.getElementsByTag("iframe").getItem(0).getFrameDocument(),t,r;u.getById("cke_ui_color")||(t=l(u),c.push(t),r=i.getUiColor(),r&&s([t],e,[[h,r]]))});i.config.uiColor&&i.setUiColor(i.config.uiColor)}}}()),function(){function t(){n.dialog.on("resize",function(n){var t=n.data,r=t.width,u=t.height,i=t.dialog,f=i.parts.contents;t.skin=="kama"&&(f.setStyles({width:r+"px",height:u+"px"}),setTimeout(function(){var t=i.parts.dialog.getChild([0,0,0]),r=t.getChild(0),n=t.getChild(2);n.setStyle("width",r.$.offsetWidth+"px"),n=t.getChild(7),n.setStyle("width",r.$.offsetWidth-28+"px"),n=t.getChild(4),n.setStyle("height",r.$.offsetHeight-45+"px"),n=t.getChild(5),n.setStyle("height",r.$.offsetHeight-45+"px")},100))})}n.dialog?t():n.on("dialogPluginReady",t)}(),f.add("about",{init:function(t){var i=t.addCommand("about",new n.dialogCommand("about"));i.modes={wysiwyg:1,source:1},i.canUndo=!1,t.ui.addButton("About",{label:t.lang.about.title,command:"about"}),n.dialog.add("about",this.path+"dialogs/about.js")}}),f.add("basicstyles",{requires:["styles","button"],init:function(t){var i=function(i,r,u,f){var e=new n.style(f);t.attachStyleStateChange(e,function(n){t.getCommand(u).setState(n)}),t.addCommand(u,new n.styleCommand(e)),t.ui.addButton(i,{label:r,command:u})},r=t.config,u=t.lang;i("Bold",u.bold,"bold",r.coreStyles_bold),i("Italic",u.italic,"italic",r.coreStyles_italic),i("Underline",u.underline,"underline",r.coreStyles_underline),i("Strike",u.strike,"strike",r.coreStyles_strike),i("Subscript",u.subscript,"subscript",r.coreStyles_subscript),i("Superscript",u.superscript,"superscript",r.coreStyles_superscript)}}),s.coreStyles_bold={element:"strong",overrides:"b"},s.coreStyles_italic={element:"em",overrides:"i"},s.coreStyles_underline={element:"u"},s.coreStyles_strike={element:"strike"},s.coreStyles_subscript={element:"sub"},s.coreStyles_superscript={element:"sup"},function(){function n(n,t){var i=t.block||t.blockLimit;return!i||i.getName()=="body"?2:i.getAscendant("blockquote",!0)?1:2}function t(t){var i=t.editor,r=i.getCommand("blockquote");r.state=n(i,t.data.path),r.fire("state")}function r(n){for(var t=0,r=n.getChildCount(),i;t<r&&(i=n.getChild(t));t++)if(i.type==1&&i.isBlockBoundary())return!1;return!0}var e={exec:function(n){var ht=n.getCommand("blockquote").state,nt=n.getSelection(),a=nt&&nt.getRanges()[0],y,b,k,s,ft,t,e,d,tt,v,it,l,ct,et,c,h,rt,p,ot,w,ut,g,f,st,lt,at;if(a){if(y=nt.createBookmarks(),u){if(b=y[0].startNode,k=y[0].endNode,b&&b.getParent().getName()=="blockquote")for(s=b;s=s.getNext();)if(s.type==1&&s.isBlockBoundary()){b.move(s,!0);break}if(k&&k.getParent().getName()=="blockquote")for(s=k;s=s.getPrevious();)if(s.type==1&&s.isBlockBoundary()){k.move(s);break}}if(ft=a.createIterator(),ht==2){for(e=[];t=ft.getNextParagraph();)e.push(t);for(e.length<1&&(d=n.document.createElement(n.config.enterMode==1?"p":"div"),tt=y.shift(),a.insertNode(d),d.append(new i.text("",n.document)),a.moveToBookmark(tt),a.selectNodeContents(d),a.collapse(!0),tt=a.createBookmark(),e.push(d),y.unshift(tt)),v=e[0].getParent(),it=[],l=0;l<e.length;l++)t=e[l],v=v.getCommonAncestor(t.getParent());for(ct={table:1,tbody:1,tr:1,ol:1,ul:1};ct[v.getName()];)v=v.getParent();for(et=null;e.length>0;){for(t=e.shift();!t.getParent().equals(v);)t=t.getParent();t.equals(et)||it.push(t),et=t}while(it.length>0)if(t=it.shift(),t.getName()=="blockquote"){for(c=new i.documentFragment(n.document);t.getFirst();)c.append(t.getFirst().remove()),e.push(c.getLast());c.replace(t)}else e.push(t);for(h=n.document.createElement("blockquote"),h.insertBefore(e[0]);e.length>0;)t=e.shift(),h.append(t)}else if(ht==1){for(rt=[],p={};t=ft.getNextParagraph();){for(ot=null,w=null;t.getParent();){if(t.getParent().getName()=="blockquote"){ot=t.getParent(),w=t;break}t=t.getParent()}ot&&w&&!w.getCustomData("blockquote_moveout")&&(rt.push(w),o.setMarker(p,w,"blockquote_moveout",!0))}for(o.clearAllMarkers(p),ut=[],g=[],p={};rt.length>0;)f=rt.shift(),h=f.getParent(),f.getPrevious()?f.getNext()?(f.breakParent(f.getParent()),g.push(f.getNext())):f.remove().insertAfter(h):f.remove().insertBefore(h),h.getCustomData("blockquote_processed")||(g.push(h),o.setMarker(p,h,"blockquote_processed",!0)),ut.push(f);for(o.clearAllMarkers(p),l=g.length-1;l>=0;l--)h=g[l],r(h)&&h.remove();if(n.config.enterMode==2)for(st=!0;ut.length;)if(f=ut.shift(),f.getName()=="div"){for(c=new i.documentFragment(n.document),lt=st&&f.getPrevious()&&!(f.getPrevious().type==1&&f.getPrevious().isBlockBoundary()),lt&&c.append(n.document.createElement("br")),at=f.getNext()&&!(f.getNext().type==1&&f.getNext().isBlockBoundary());f.getFirst();)f.getFirst().remove().appendTo(c);at&&c.append(n.document.createElement("br")),c.replace(f),st=!1}}nt.selectBookmarks(y),n.focus()}}};f.add("blockquote",{init:function(n){n.addCommand("blockquote",e),n.ui.addButton("Blockquote",{label:n.lang.blockquote,command:"blockquote"});n.on("selectionChange",t)},requires:["domiterator"]})}(),f.add("button",{beforeInit:function(n){n.ui.addHandler(1,e.button.handler)}}),n.UI_BUTTON=1,e.button=function(n){t.extend(this,n,{title:n.label,className:n.className||n.command&&"cke_button_"+n.command||"",click:n.click||function(t){t.execCommand(n.command)}}),this._={}},e.button.handler={create:function(n){return new e.button(n)}},e.button.prototype={canGroup:!0,render:function(i,u){var o=r,c=this._.id="cke_"+t.getNextNumber(),a;this._.editor=i;var s={id:c,button:this,editor:i,focus:function(){var t=n.document.getById(c);t.focus()},execute:function(){this.button.click(i)}},v=t.addFunction(s.execute,s),l=e.button._.instances.push(s)-1,h="",f=this.command;if(this.modes)i.on("mode",function(){this.setState(this.modes[i.mode]?2:0)},this);else if(f&&(f=i.getCommand(f),f)){f.on("state",function(){this.setState(f.state)},this);h+="cke_"+(f.state==1?"on":f.state==0?"disabled":"off")}return f||(h+="cke_off"),this.className&&(h+=" "+this.className),u.push('<span class="cke_button">','<a id="',c,'" class="',h,'" href="javascript:void(\'',(this.title||"").replace("'",""),'\')" title="',this.title,'" tabindex="-1" hidefocus="true"'),(o.opera||o.gecko&&o.mac)&&u.push(' onkeypress="return false;"'),o.gecko&&u.push(' onblur="this.style.cssText = this.style.cssText;"'),u.push(' onkeydown="return CKEDITOR.ui.button._.keydown(',l,', event);" onfocus="return CKEDITOR.ui.button._.focus(',l,', event);" onclick="CKEDITOR.tools.callFunction(',v,', this); return false;"><span class="cke_icon"'),this.icon&&(a=(this.iconOffset||0)*-16,u.push(' style="background-image:url(',n.getUrl(this.icon),");background-position:0 "+a+'px;"')),u.push('><\/span><span class="cke_label">',this.label,"<\/span>"),this.hasArrow&&u.push('<span class="cke_buttonarrow"><\/span>'),u.push("<\/a>","<\/span>"),this.onRender&&this.onRender(),s},setState:function(t){var i=this,r;if(i._.state!=t){if(r=n.document.getById(i._.id),r){r.setState(t);var u=i.title,f=i._.editor.lang.common.unavailable,e=r.getChild(1);t==0&&(u=f.replace("%1",i.title)),e.setHtml(u)}i._.state=t}}},e.button._={instances:[],keydown:function(n,t){var r=e.button._.instances[n];if(r.onkey)return t=new i.event(t),r.onkey(r,t.getKeystroke())!==!1},focus:function(n,t){var u=e.button._.instances[n],f;return u.onfocus&&(f=u.onfocus(u,new i.event(t))!==!1),r.gecko&&r.version<10900&&t.preventBubble(),f}},e.prototype.addButton=function(n,t){this.add(n,1,t)},function(){function l(n,t,f){var s=this.document,a,l;if(!u||!s.getById("cke_pastebin")){var h=this.getSelection(),c=new i.range(s),e=new o(t=="text"?"textarea":"div",s);e.setAttribute("id","cke_pastebin"),r.webkit&&e.append(s.createText("")),s.getBody().append(e),u||t=="html"||e.setStyles({position:"absolute",left:"-1000px",top:h.getStartElement().getDocumentPosition().y+"px",width:"1px",height:"1px",overflow:"hidden"}),a=h.createBookmarks(),t=="text"?u?(l=s.getBody().$.createTextRange(),l.moveToElementText(e.$),l.execCommand("Paste"),n.data.preventDefault()):(s.$.designMode="off",e.$.focus()):(c.setStartAt(e,1),c.setEndAt(e,2),c.select(!0)),window.setTimeout(function(){t!="text"||u||(s.$.designMode="on"),e.remove();var n;e=r.webkit&&(n=e.getFirst())&&n.is&&n.hasClass("Apple-style-span")?n:e,h.selectBookmarks(a),f(e["get"+(t=="text"?"Value":"Html")]())},0)}}var e=function(n,t){var i=n.document,r=i.getBody(),u=!1,f=function(){u=!0};r.on(t,f);return i.$.execCommand(t),r.removeListener(t,f),u},c=u?function(n,t){return e(n,t)}:function(n,t){try{return n.document.$.execCommand(t)}catch(i){return!1}},t=function(n){this.type=n,this.canUndo=this.type=="cut"},s,h;t.prototype={exec:function(n){var t=c(n,this.type);return t||alert(n.lang.clipboard[this.type+"Error"]),t}},s={canUndo:!1,exec:u?function(n){return n.focus(),!n.document.getBody().fire("beforepaste")&&!e(n,"paste")?(n.fire("pasteDialog"),!1):void 0}:function(n){try{if(!n.document.getBody().fire("beforepaste")&&!n.document.$.execCommand("Paste",!1,null))throw 0;}catch(t){return setTimeout(function(){n.fire("pasteDialog")},0),!1}}},h=function(n){var t,i;if(this.mode=="wysiwyg")switch(n.data.keyCode){case 1086:case 2045:t=this.document.getBody(),!u&&t.fire("beforepaste")?n.cancel():(r.opera||r.gecko&&r.version<10900)&&t.fire("paste");return;case 1088:case 2046:i=this,this.fire("saveSnapshot"),setTimeout(function(){i.fire("saveSnapshot")},0)}},f.add("clipboard",{requires:["htmldataprocessor"],init:function(i){function e(n,t,r,u){var f=i.lang[t];i.addCommand(t,r),i.ui.addButton(n,{label:f,command:t}),i.addMenuItems&&i.addMenuItem(t,{label:f,command:t,group:"clipboard",order:u})}var f,o;i.on("paste",function(n){var t=n.data;t.html?i.insertHtml(t.html):t.text&&i.insertText(t.text)},null,null,1e3);i.on("pasteDialog",function(){setTimeout(function(){i.openDialog("paste")},0)});e("Cut","cut",new t("cut"),1),e("Copy","copy",new t("copy"),4),e("Paste","paste",s,8),n.dialog.add("paste",n.getUrl(this.path+"dialogs/paste.js"));i.on("key",h,i);f=i.config.forcePasteAsPlainText?"text":"html";i.on("contentDom",function(){var n=i.document.getBody();n.on(f=="text"&&u?"paste":"beforepaste",function(n){o||l.call(i,n,f,function(n){if(n){var t={};t[f]=n,i.fire("paste",t)}})})});if(i.contextMenu){function n(n){u&&n=="Paste"&&(o=1);var t=i.document.$.queryCommandEnabled(n)?2:0;return o=0,t}i.contextMenu.addListener(function(){return{cut:n("Cut"),copy:n("Cut"),paste:r.webkit?2:n("Paste")}})}}})}(),f.add("colorbutton",{requires:["panelbutton","floatpanel","styles"],init:function(i){function e(n,t,r){i.ui.add(n,4,{label:r,title:r,className:"cke_button_"+n.toLowerCase(),modes:{wysiwyg:1},panel:{css:i.skin.editor.css},onBlock:function(n,i){var u=n.addBlock(i),r;u.autoSize=!0,u.element.addClass("cke_colorblock"),u.element.setHtml(o(n,t)),r=u.keys,r[39]="next",r[9]="next",r[37]="prev",r[2009]="prev",r[32]="click"}})}function o(r,e){var o=[],a=f.colorButton_colors.split(","),c=t.addFunction(function(t,u){var o,e;if(t=="?"){o=arguments.callee;function n(t){this.removeListener("ok",n),this.removeListener("cancel",n),t.name=="ok"&&o(this.getContentElement("picker","selectedColor").getValue(),u)}i.openDialog("colordialog",function(){this.on("ok",n);this.on("cancel",n)});return}i.focus(),r.hide(),e=new n.style(f["colorButton_"+u+"Style"],t&&{color:t}),i.fire("saveSnapshot"),t?e.apply(i.document):e.remove(i.document),i.fire("saveSnapshot")}),s,h,l;for(o.push('<a class="cke_colorauto" _cke_focus=1 hidefocus=true title="',u.auto,'" onclick="CKEDITOR.tools.callFunction(',c,",null,'",e,"');return false;\" href=\"javascript:void('",u.auto,'\')"><table cellspacing=0 cellpadding=0 width="100%"><tr><td><span class="cke_colorbox" style="background-color:#000"><\/span><\/td><td colspan=7 align=center>',u.auto,'<\/td><\/tr><\/table><\/a><table cellspacing=0 cellpadding=0 width="100%">'),s=0;s<a.length;s++)s%8==0&&o.push("<\/tr><tr>"),h=a[s],l=i.lang.colors[h]||h,o.push('<td><a class="cke_colorbox" _cke_focus=1 hidefocus=true title="',l,'" onclick="CKEDITOR.tools.callFunction(',c,",'#",h,"','",e,"'); return false;\" href=\"javascript:void('",l,'\')"><span class="cke_colorbox" style="background-color:#',h,'"><\/span><\/a><\/td>');return f.colorButton_enableMore&&o.push('<\/tr><tr><td colspan=8 align=center><a class="cke_colormore" _cke_focus=1 hidefocus=true title="',u.more,'" onclick="CKEDITOR.tools.callFunction(',c,",'?','",e,"');return false;\" href=\"javascript:void('",u.more,"')\">",u.more,"<\/a><\/td>"),o.push("<\/tr><\/table>"),o.join("")}var f=i.config,u=i.lang.colorButton;r.hc||(e("TextColor","fore",u.textColorTitle),e("BGColor","back",u.bgColorTitle))}}),s.colorButton_enableMore=!0,s.colorButton_colors="000,800000,8B4513,2F4F4F,008080,000080,4B0082,696969,B22222,A52A2A,DAA520,006400,40E0D0,0000CD,800080,808080,F00,FF8C00,FFD700,008000,0FF,00F,EE82EE,A9A9A9,FFA07A,FFA500,FFFF00,00FF00,AFEEEE,ADD8E6,DDA0DD,D3D3D3,FFF0F5,FAEBD7,FFFFE0,F0FFF0,F0FFFF,F0F8FF,E6E6FA,FFF",s.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]},s.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}},function(){f.colordialog={init:function(t){t.addCommand("colordialog",new n.dialogCommand("colordialog")),n.dialog.add("colordialog",this.path+"dialogs/colordialog.js")}},f.add("colordialog",f.colordialog)}(),f.add("contextmenu",{requires:["menu"],beforeInit:function(n){n.contextMenu=new f.contextMenu(n),n.addCommand("contextMenu",{exec:function(){n.contextMenu.show(n.document.getBody())}})}}),f.contextMenu=t.createClass({$:function(n){this.id="cke_"+t.getNextNumber(),this.editor=n,this._.listeners=[],this._.functionId=t.addFunction(function(t){this._.panel.hide(),n.focus(),n.execCommand(t)},this)},_:{onMenu:function(i,r,f,e){var o=this._.menu,s=this.editor,h,c,v,l;o?(o.hide(),o.removeAll()):(o=this._.menu=new n.menu(s),o.onClick=t.bind(function(n){var t=!0;o.hide(),u&&o.onEscape(),n.onClick?n.onClick():n.command&&s.execCommand(n.command),t=!1},this),o.onEscape=function(){s.focus(),u&&s.getSelection().unlock(!0)});var y=this._.listeners,a=this.editor.getSelection(),p=a&&a.getStartElement();for(o.onHide=t.bind(function(){if(o.onHide=null,u){var n=s.getSelection();n&&n.unlock()}this.onHide&&this.onHide()},this),h=0;h<y.length;h++)if(c=y[h](p,a),c)for(v in c)l=this.editor.getMenuItem(v),l&&(l.state=c[v],o.add(l));o.items.length&&o.show(i,r||(s.lang.dir=="rtl"?2:1),f,e)}},proto:{addTarget:function(n,i){var f,e,s,o;if(r.opera){n.on("mousedown",function(t){var u,r;if(t=t.data,t.$.button!=2){t.getKeystroke()==1001&&n.fire("contextmenu",t);return}i&&(t.$.ctrlKey||t.$.metaKey)||(u=t.getTarget(),f||(r=u.getDocument(),f=r.createElement("input"),f.$.type="button",r.getBody().append(f)),f.setAttribute("style","position:absolute;top:"+(t.$.clientY-2)+"px;left:"+(t.$.clientX-2)+"px;width:5px;height:5px;opacity:0.01"))});n.on("mouseup",function(t){f&&(f.remove(),f=undefined,n.fire("contextmenu",t.data))})}n.on("contextmenu",function(n){var f=n.data,o;if(!i||!(r.webkit?e:f.$.ctrlKey||f.$.metaKey)){u&&(o=this.editor.getSelection(),o&&o.lock()),f.preventDefault();var s=f.getTarget().getDocument().getDocumentElement(),h=f.$.clientX,c=f.$.clientY;t.setTimeout(function(){this._.onMenu(s,null,h,c)},0,this)}},this);if(r.webkit){s=function(n){e=n.data.$.ctrlKey||n.data.$.metaKey},o=function(){e=0};n.on("keydown",s);n.on("keyup",o);n.on("contextmenu",o)}},addListener:function(n){this._.listeners.push(n)},show:function(t,i,r,u){this.editor.focus();this._.onMenu(t||n.document.getDocumentElement(),i,r||0,u||0)}}}),function(){f.add("div",{requires:["editingblock","domiterator"],init:function(t){var r=t.lang.div;t.addCommand("creatediv",new n.dialogCommand("creatediv")),t.addCommand("editdiv",new n.dialogCommand("editdiv")),t.addCommand("removediv",{exec:function(n){function s(n){var u=new i.elementPath(n),r=u.blockLimit,t=r.is("div")&&r;t&&!t.getAttribute("_cke_div_added")&&(e.push(t),t.setAttribute("_cke_div_added"))}for(var r=n.getSelection(),o=r&&r.getRanges(),u,h=r.createBookmarks(),f,e=[],t=0;t<o.length;t++)u=o[t],u.collapsed?s(r.getStartElement()):(f=new i.walker(u),f.evaluator=s,f.lastForward());for(t=0;t<e.length;t++)e[t].remove(!0);r.selectBookmarks(h)}}),t.ui.addButton("CreateDiv",{label:r.toolbar,command:"creatediv"}),t.addMenuItems&&(t.addMenuItems({editdiv:{label:r.edit,command:"editdiv",group:"div",order:1},removediv:{label:r.remove,command:"removediv",group:"div",order:5}}),t.contextMenu&&t.contextMenu.addListener(function(n){if(!n)return null;var r=new i.elementPath(n),t=r.blockLimit;return t&&t.getAscendant("div",!0)?{editdiv:2,removediv:2}:null})),n.dialog.add("creatediv",this.path+"dialogs/div.js"),n.dialog.add("editdiv",this.path+"dialogs/div.js")}})}(),function(){var u={toolbarFocus:{exec:function(t){var r=t._.elementsPath.idBase,i=n.document.getById(r+"0");i&&i.focus()}}},i='<span class="cke_empty">&nbsp;<\/span>';f.add("elementspath",{requires:["selection"],init:function(f){var o="cke_path_"+f.name,e,s=function(){return e||(e=n.document.getById(o)),e},h="cke_elementspath_"+t.getNextNumber()+"_";f._.elementsPath={idBase:h};f.on("themeSpace",function(n){n.data.space=="bottom"&&(n.data.html+='<div id="'+o+'" class="cke_path">'+i+"<\/div>")});f.on("selectionChange",function(n){for(var e=r,a=n.data.selection,t=a.getStartElement(),l=[],v=this._.elementsPath.list=[],o,u,c;t;){if(o=v.push(t)-1,u=t.getAttribute("_cke_real_element_type")?t.getAttribute("_cke_real_element_type"):t.getName(),c="",(e.opera||e.gecko&&e.mac)&&(c+=' onkeypress="return false;"'),e.gecko&&(c+=' onblur="this.style.cssText = this.style.cssText;"'),l.unshift('<a id="',h,o,'" href="javascript:void(\'',u,'\')" tabindex="-1" title="',f.lang.elementsPath.eleTitle.replace(/%1/,u),'"'+(r.gecko&&r.version<10900?' onfocus="event.preventBubble();"':"")+' hidefocus="true"  onkeydown="return CKEDITOR._.elementsPath.keydown(\'',this.name,"',",o,', event);"'+c," onclick=\"return CKEDITOR._.elementsPath.click('",this.name,"',",o,');">',u,"<\/a>"),u=="body")break;t=t.getParent()}s().setHtml(l.join("")+i)});f.on("contentDomUnload",function(){s().setHtml(i)});f.addCommand("elementsPathFocus",u.toolbarFocus)}})}(),n._.elementsPath={click:function(t,i){var r=n.instances[t],u;return r.focus(),u=r._.elementsPath.list[i],r.getSelection().selectElement(u),!1},keydown:function(t,r,u){var h=e.button._.instances[r],s=n.instances[t],o=s._.elementsPath.idBase,f;u=new i.event(u);switch(u.getKeystroke()){case 37:case 9:return(f=n.document.getById(o+(r+1)))||(f=n.document.getById(o+"0")),f.focus(),!1;case 39:case 2009:return(f=n.document.getById(o+(r-1)))||(f=n.document.getById(o+(s._.elementsPath.list.length-1))),f.focus(),!1;case 27:return s.focus(),!1;case 13:case 32:return this.click(t,r),!1}return!0}},function(){function l(n){return o(n,n.config.shiftEnterMode,!0)}function o(n,i,r){return n.mode!="wysiwyg"?!1:(i||(i=n.config.enterMode),setTimeout(function(){n.fire("saveSnapshot"),i==2||n.getSelection().getStartElement().hasAscendant("pre",!0)?c(n,i,null,r):t(n,i,null,r)},0),!0)}function s(n){for(var i=n.getSelection().getRanges(),t=i.length-1;t>0;t--)i[t].deleteContents();return i[0]}f.add("enterkey",{requires:["keystrokes","indent"],init:function(n){var t=n.specialKeys;t[13]=o,t[2013]=l}}),f.enterkey={enterBlock:function(n,t,r,f){var l,p,d,tt,v,g;r=r||s(n);var b=r.document,nt=t==3?"div":"p",y=r.splitBlock(nt);if(y){var c=y.previousBlock,o=y.nextBlock,k=y.wasStartOfBlock,w=y.wasEndOfBlock,a;if(o?(a=o.getParent(),a.is("li")&&(o.breakParent(a),o.move(o.getNext(),!0))):c&&(a=c.getParent())&&a.is("li")&&(c.breakParent(a),r.moveToElementEditStart(c.getNext()),c.move(c.getPrevious())),k||w){if(k&&w&&c.is("li")){n.execCommand("outdent");return}if(c?f||e.test(c.getName())||(l=c.clone()):o&&(l=o.clone()),l||(l=b.createElement(nt)),p=y.elementPath,p)for(d=0,tt=p.elements.length;d<tt;d++){if(v=p.elements[d],v.equals(p.block)||v.equals(p.blockLimit))break;h.$removeEmpty[v.getName()]&&(v=v.clone(),l.moveChildren(v),l.append(v))}u||l.appendBogus(),r.insertNode(l),u&&k&&(!w||!c.getChildCount())&&(r.moveToElementEditStart(w?c:l),r.select()),r.moveToElementEditStart(k&&!w?o:l)}else o.is("li")&&(a=o.getFirst(i.walker.invisible(!0)))&&a.is&&a.is("ul","ol")&&(u?b.createText(""):b.createElement("br")).insertBefore(a),o&&r.moveToElementEditStart(o);u||(o?(g=b.createElement("span"),g.setHtml("&nbsp;"),r.insertNode(g),g.scrollIntoView(),r.deleteContents()):l.scrollIntoView()),r.select()}},enterBr:function(n,f,o,h){var c,a;o=o||s(n);var l=o.document,k=f==3?"div":"p",w=o.checkEndOfBlock(),b=new i.elementPath(n.getSelection().getStartElement()),v=b.block,y=v&&b.block.getName(),p=!1;if(!h&&y=="li"){t(n,f,o,h);return}!h&&w&&e.test(y)?(l.createElement("br").insertAfter(v),r.gecko&&l.createText("").insertAfter(v),o.setStartAt(v.getNext(),u?3:1)):(p=y=="pre",c=p?l.createText(u?"\r":"\n"):l.createElement("br"),o.deleteContents(),o.insertNode(c),u||l.createText("").insertAfter(c),w&&!u&&c.getParent().appendBogus(),u||(c.getNext().$.nodeValue=""),u?o.setStartAt(c,4):o.setStartAt(c.getNext(),1),u||(a=null,r.gecko?a=l.createElement("br"):(a=l.createElement("span"),a.setHtml("&nbsp;")),a.insertBefore(c.getNext()),a.scrollIntoView(),a.remove())),o.collapse(!0),o.select(p)}};var n=f.enterkey,c=n.enterBr,t=n.enterBlock,e=/^h[1-6]$/}(),function(){function r(n){var i={},u=[],o={nbsp:"",shy:"",gt:">",lt:"<"},r,f,t,e;for(n=n.replace(/\b(nbsp|shy|gt|lt|amp)(?:,|$)/g,function(n,t){return i[o[t]]="&"+t+";",u.push(o[t]),""}),n=n.split(","),r=document.createElement("div"),r.innerHTML="&"+n.join(";&")+";",f=r.innerHTML,r=null,t=0;t<f.length;t++)e=f.charAt(t),i[e]="&"+n[t]+";",u.push(e);return i.regex=u.join(""),i}var n="nbsp,gt,lt,quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro",t="Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml",i="Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv";f.add("entities",{afterInit:function(u){var f=u.config,h,c,o,s,e;if(f.entities&&(h=u.dataProcessor,c=h&&h.htmlFilter,c)){o=n,f.entities_latin&&(o+=","+t),f.entities_greek&&(o+=","+i),f.entities_additional&&(o+=","+f.entities_additional),s=r(o),e="["+s.regex+"]",delete s.regex,f.entities_processNumerical&&(e="[^ -~]|"+e),e=new RegExp(e,"g");function u(n){return s[n]||"&#"+n.charCodeAt(0)+";"}c.addRules({text:function(n){return n.replace(e,u)}})}}})}(),s.entities=!0,s.entities_latin=!0,s.entities_greek=!0,s.entities_processNumerical=!1,s.entities_additional="#39",function(){function r(n,t){var r=[],i;if(t)for(i in t)r.push(i+"="+encodeURIComponent(t[i]));else return n;return n+(n.indexOf("?")!=-1?"&":"?")+r.join("&")}function i(n){n+="";var t=n.charAt(0).toUpperCase();return t+n.substr(1)}function o(){var u=this,f=u.getDialog(),n=f.getParentEditor(),e;n._.filebrowserSe=u;var o=n.config["filebrowser"+i(f.getName())+"WindowWidth"]||n.config.filebrowserWindowWidth||"80%",s=n.config["filebrowser"+i(f.getName())+"WindowHeight"]||n.config.filebrowserWindowHeight||"70%",t=u.filebrowser.params||{};t.CKEditor=n.name,t.CKEditorFuncNum=n._.filebrowserFn,t.langCode||(t.langCode=n.langCode),e=r(u.filebrowser.url,t),n.popup(e,o,s)}function s(){var n=this,t=n.getDialog(),i=t.getParentEditor();return(i._.filebrowserSe=n,!t.getContentElement(n["for"][0],n["for"][1]).getInputElement().$.value)?!1:t.getContentElement(n["for"][0],n["for"][1]).getAction()?!0:!1}function h(n,t,i){var u=i.params||{};u.CKEditor=n.name,u.CKEditorFuncNum=n._.filebrowserFn,u.langCode||(u.langCode=n.langCode),t.action=r(i.url,u),t.filebrowser=i}function u(n,t,r,f){var e,l,a,c;for(l in f)(e=f[l],(e.type=="hbox"||e.type=="vbox")&&u(n,t,r,e.children),e.filebrowser)&&(typeof e.filebrowser=="string"&&(a={action:e.type=="fileButton"?"QuickUpload":"Browse",target:e.filebrowser},e.filebrowser=a),e.filebrowser.action=="Browse"?(c=e.filebrowser.url||n.config["filebrowser"+i(t)+"BrowseUrl"]||n.config.filebrowserBrowseUrl,c&&(e.onClick=o,e.filebrowser.url=c,e.hidden=!1)):e.filebrowser.action=="QuickUpload"&&e["for"]&&(c=e.filebrowser.url||n.config["filebrowser"+i(t)+"UploadUrl"]||n.config.filebrowserUploadUrl,c&&(e.onClick=s,e.filebrowser.url=c,e.hidden=!1,h(n,r.getContents(e["for"][0]).get(e["for"][1]),e.filebrowser))))}function c(n,t){var u=t.getDialog(),f=t.filebrowser.target||null,i,r;n=n.replace(/#/g,"%23"),f&&(i=f.split(":"),r=u.getContentElement(i[0],i[1]),r&&(r.setValue(n),u.selectPage(i[0])))}function e(n,t,i){var u,r;if(i.indexOf(";")!==-1){for(u=i.split(";"),r=0;r<u.length;r++)if(e(n,t,u[r]))return!0;return!1}return n.getContents(t).get(i).filebrowser&&n.getContents(t).get(i).filebrowser.url}function l(n,t){var i=this,f=i._.filebrowserSe.getDialog(),r=i._.filebrowserSe["for"],u=i._.filebrowserSe.filebrowser.onSelect;(r&&f.getContentElement(r[0],r[1]).reset(),u&&u.call(i._.filebrowserSe,n,t)===!1)||(typeof t=="string"&&t&&alert(t),n&&c(n,i._.filebrowserSe))}f.add("filebrowser",{init:function(i){i._.filebrowserFn=t.addFunction(l,i);n.on("dialogDefinition",function(n){for(var t in n.data.definition.contents)u(n.editor,n.data.name,n.data.definition,n.data.definition.contents[t].elements),n.data.definition.contents[t].hidden&&n.data.definition.contents[t].filebrowser&&(n.data.definition.contents[t].hidden=!e(n.data.definition,n.data.definition.contents[t].id,n.data.definition.contents[t].filebrowser))})}})}(),f.add("find",{init:function(t){var u=f.find,i,r;t.ui.addButton("Find",{label:t.lang.findAndReplace.find,command:"find"}),i=t.addCommand("find",new n.dialogCommand("find")),i.canUndo=!1,t.ui.addButton("Replace",{label:t.lang.findAndReplace.replace,command:"replace"}),r=t.addCommand("replace",new n.dialogCommand("replace")),r.canUndo=!1,n.dialog.add("find",this.path+"dialogs/find.js"),n.dialog.add("replace",this.path+"dialogs/find.js")},requires:["styles"]}),s.find_highlight={element:"span",styles:{"background-color":"#004",color:"#fff"}},function(){function i(n){return e.test(n)?n+"px":n}function r(n){var t=n.attributes;return t.type=="application/x-shockwave-flash"||u.test(t.src||"")}function t(n,t){var r=n.createFakeParserElement(t,"cke_flash","flash",!0),u=r.attributes.style||"",f=t.attributes.width,e=t.attributes.height;return typeof f!="undefined"&&(u=r.attributes.style=u+"width:"+i(f)+";"),typeof e!="undefined"&&(u=r.attributes.style=u+"height:"+i(e)+";"),r}var u=/\.swf(?:$|\?)/i,e=/^\d+(?:\.\d+)?$/;f.add("flash",{init:function(t){t.addCommand("flash",new n.dialogCommand("flash")),t.ui.addButton("Flash",{label:t.lang.common.flash,command:"flash"}),n.dialog.add("flash",this.path+"dialogs/flash.js"),t.addCss("img.cke_flash{background-image: url("+n.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}"),t.addMenuItems&&t.addMenuItems({flash:{label:t.lang.flash.properties,command:"flash",group:"flash"}}),t.contextMenu&&t.contextMenu.addListener(function(n){if(n&&n.is("img")&&n.getAttribute("_cke_real_element_type")=="flash")return{flash:2}})},afterInit:function(n){var i=n.dataProcessor,u=i&&i.dataFilter;u&&u.addRules({elements:{"cke:object":function(i){var f=i.attributes,e=f.classid&&String(f.classid).toLowerCase(),u;if(!e){for(u=0;u<i.children.length;u++)if(i.children[u].name=="cke:embed")return r(i.children[u])?t(n,i):null;return null}return t(n,i)},"cke:embed":function(i){return r(i)?t(n,i):null}}},5)},requires:["fakeobjects"]})}(),t.extend(s,{flashEmbedTagOnly:!1,flashAddEmbedTag:!0,flashConvertOnEdit:!1}),function(){function t(t,i,r,u,f,e,o){for(var p=t.config,h=f.split(";"),l=[],c={},s=0;s<h.length;s++){var a={},v=h[s].split("/"),y=h[s]=v[0];a[r]=l[s]=v[1]||y,c[y]=new n.style(o,a)}t.ui.addRichCombo(i,{label:u.label,title:u.panelTitle,voiceLabel:u.voiceLabel,className:"cke_"+(r=="size"?"fontSize":"font"),multiSelect:!1,panel:{css:t.skin.editor.css.concat(p.contentsCss),voiceLabel:u.panelVoiceLabel},init:function(){var n,t;for(this.startGroup(u.panelTitle),n=0;n<h.length;n++)t=h[n],this.add(t,'<span style="font-'+r+":"+l[n]+'">'+t+"<\/span>",t)},onClick:function(n){t.focus(),t.fire("saveSnapshot");var i=c[n];this.getValue()==n?i.remove(t.document):i.apply(t.document),t.fire("saveSnapshot")},onRender:function(){t.on("selectionChange",function(n){for(var f=this.getValue(),o=n.data.path,r=o.elements,u,i,t=0;t<r.length;t++){u=r[t];for(i in c)if(c[i].checkElementRemovable(u,!0)){i!=f&&this.setValue(i);return}}this.setValue("",e)},this)}})}f.add("font",{requires:["richcombo","styles"],init:function(n){var i=n.config;t(n,"Font","family",n.lang.font,i.font_names,i.font_defaultLabel,i.font_style),t(n,"FontSize","size",n.lang.fontSize,i.fontSize_sizes,i.fontSize_defaultLabel,i.fontSize_style)}})}(),s.font_names="Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif",s.font_defaultLabel="",s.font_style={element:"span",styles:{"font-family":"#(family)"},overrides:[{element:"font",attributes:{face:null}}]},s.fontSize_sizes="8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px",s.fontSize_defaultLabel="",s.fontSize_style={element:"span",styles:{"font-size":"#(size)"},overrides:[{element:"font",attributes:{size:null}}]},f.add("format",{requires:["richcombo","styles"],init:function(t){for(var f=t.config,i=t.lang.format,o=f.format_tags.split(";"),r={},e,u=0;u<o.length;u++)e=o[u],r[e]=new n.style(f["format_"+e]);t.ui.addRichCombo("Format",{label:i.label,title:i.panelTitle,voiceLabel:i.voiceLabel,className:"cke_format",multiSelect:!1,panel:{css:t.skin.editor.css.concat(f.contentsCss),voiceLabel:i.panelVoiceLabel},init:function(){var n,t;this.startGroup(i.panelTitle);for(n in r)t=i["tag_"+n],this.add(n,"<"+n+">"+t+"<\/"+n+">",t)},onClick:function(n){t.focus(),t.fire("saveSnapshot"),r[n].apply(t.document),setTimeout(function(){t.fire("saveSnapshot")},0)},onRender:function(){t.on("selectionChange",function(n){var u=this.getValue(),f=n.data.path,i;for(i in r)if(r[i].checkActive(f)){i!=u&&this.setValue(i,t.lang.format["tag_"+i]);return}this.setValue("")},this)}})}}),s.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",s.format_p={element:"p"},s.format_div={element:"div"},s.format_pre={element:"pre"},s.format_address={element:"address"},s.format_h1={element:"h1"},s.format_h2={element:"h2"},s.format_h3={element:"h3"},s.format_h4={element:"h4"},s.format_h5={element:"h5"},s.format_h6={element:"h6"},f.add("forms",{init:function(t){var i=t.lang,r,u;t.addCss("form{border: 1px dotted #FF0000;padding: 2px;}"),r=function(r,u,f){t.addCommand(u,new n.dialogCommand(u)),t.ui.addButton(r,{label:i.common[r.charAt(0).toLowerCase()+r.slice(1)],command:u}),n.dialog.add(u,f)},u=this.path+"dialogs/",r("Form","form",u+"form.js"),r("Checkbox","checkbox",u+"checkbox.js"),r("Radio","radio",u+"radio.js"),r("TextField","textfield",u+"textfield.js"),r("Textarea","textarea",u+"textarea.js"),r("Select","select",u+"select.js"),r("Button","button",u+"button.js"),r("ImageButton","imagebutton",f.getPath("image")+"dialogs/image.js"),r("HiddenField","hiddenfield",u+"hiddenfield.js"),t.addMenuItems&&t.addMenuItems({form:{label:i.form.menu,command:"form",group:"form"},checkbox:{label:i.checkboxAndRadio.checkboxTitle,command:"checkbox",group:"checkbox"},radio:{label:i.checkboxAndRadio.radioTitle,command:"radio",group:"radio"},textfield:{label:i.textfield.title,command:"textfield",group:"textfield"},hiddenfield:{label:i.hidden.title,command:"hiddenfield",group:"hiddenfield"},imagebutton:{label:i.image.titleButton,command:"imagebutton",group:"imagebutton"},button:{label:i.button.title,command:"button",group:"button"},select:{label:i.select.title,command:"select",group:"select"},textarea:{label:i.textarea.title,command:"textarea",group:"textarea"}}),t.contextMenu&&(t.contextMenu.addListener(function(n){if(n&&n.hasAscendant("form",!0))return{form:2}}),t.contextMenu.addListener(function(n){var i,t;if(n){if(i=n.getName(),i=="select")return{select:2};if(i=="textarea")return{textarea:2};if(i=="input"){if(t=n.getAttribute("type"),t=="text"||t=="password")return{textfield:2};if(t=="button"||t=="submit"||t=="reset")return{button:2};if(t=="checkbox")return{checkbox:2};if(t=="radio")return{radio:2};if(t=="image")return{imagebutton:2}}if(i=="img"&&n.getAttribute("_cke_real_element_type")=="hiddenfield")return{hiddenfield:2}}}))},afterInit:function(n){if(u){var t=n.dataProcessor,i=t&&t.htmlFilter;i&&i.addRules({elements:{input:function(n){var t=n.attributes,i=t.type;(i=="checkbox"||i=="radio")&&t.value=="on"&&delete t.value}}})}},requires:["image"]}),u&&(o.prototype.hasAttribute=function(n){var t=this,r=t.$.attributes.getNamedItem(n),i;if(t.getName()=="input")switch(n){case"class":return t.$.className.length>0;case"checked":return!!t.$.checked;case"value":if(i=t.getAttribute("type"),i=="checkbox"||i=="radio")return t.$.value!="on"}return!!(r&&r.specified)}),function(){var t={canUndo:!1,exec:function(n){n.insertElement(n.document.createElement("hr"))}},n="horizontalrule";f.add(n,{init:function(i){i.addCommand(n,t),i.ui.addButton("HorizontalRule",{label:i.lang.horizontalrule,command:n})}})}(),function(){function v(n){for(var r=n.children.length,i=n.children[r-1];i&&i.type==3&&!t.trim(i.value);)i=n.children[--r];return i}function y(n,t){var r=n.children,i=v(n);i&&((t||!u)&&i.type==1&&i.name=="br"&&r.pop(),i.type==3&&b.test(i.value)&&r.pop())}function p(n){var t=v(n);return!t||t.type==1&&t.name=="br"}function k(t){y(t,!0),p(t)&&(u?t.add(new n.htmlParser.text("")):t.add(new n.htmlParser.element("br",{})))}function d(t){y(t),p(t)&&t.add(new n.htmlParser.text(""))}function ft(n){return n.replace(g,"$& _cke_saved_$1")}function et(n){return n.replace(nt,function(n){return"<cke:encoded>"+encodeURIComponent(n)+"<\/cke:encoded>"})}function ot(n){return n.replace(tt,function(n,t){return decodeURIComponent(t)})}function st(n){return n.replace(it,"$1cke:$2")}function ht(n){return n.replace(rt,"$1$2")}function ct(n){return n.replace(ut,"<cke:$1$2><\/cke:$1>")}function lt(n){return n.replace(/<!--(?!{cke_protected})[\s\S]+?-->/g,function(n){return"<!--"+i+"{C}"+encodeURIComponent(n).replace(/--/g,"%2D%2D")+"-->"})}function at(n){return n.replace(/<!--\{cke_protected\}\{C\}([\s\S]+?)-->/g,function(n,t){return decodeURIComponent(t)})}function vt(n,t){var r=[],f=/<\!--\{cke_temp(comment)?\}(\d*?)-->/g,e=[/<script[\s\S]*?<\/script>/gi,/<noscript[\s\S]*?<\/noscript>/gi].concat(t),u;for(n=n.replace(/<!--[\s\S]*?-->/g,function(n){return"<!--{cke_tempcomment}"+(r.push(n)-1)+"-->"}),u=0;u<e.length;u++)n=n.replace(e[u],function(n){return n=n.replace(f,function(n,t,i){return r[i]}),"<!--{cke_temp}"+(r.push(n)-1)+"-->"});return n.replace(f,function(n,t,u){return"<!--"+i+(t?"{C}":"")+encodeURIComponent(r[u]).replace(/--/g,"%2D%2D")+"-->"})}var b=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,i="{cke_protected}",s=h,e=t.extend({},s.$block,s.$listItem,s.$tableContent),r,w,c,l,a;for(r in e)"br"in s[r]||delete e[r];delete e.pre,w={attributeNames:[[/^on/,"_cke_pa_on"]]},c={elements:{}};for(r in e)c.elements[r]=k;l={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^_cke_(saved|pa)_/,""],[/^_cke.*/,""],["hidefocus",""]],elements:{$:function(n){var i=n.attributes,r,u,t;if(i){if(i.cke_temp)return!1;for(r=["name","href","src"],t=0;t<r.length;t++)u="_cke_saved_"+r[t],u in i&&delete i[r[t]]}return n},embed:function(n){var t=n.parent,i,r;t&&t.name=="object"&&(i=t.attributes.width,r=t.attributes.height,i&&(n.attributes.width=i),r&&(n.attributes.height=r))},param:function(n){return n.children=[],n.isEmpty=!0,n},a:function(n){if(!(n.children.length||n.attributes.name||n.attributes._cke_saved_name))return!1},body:function(n){delete n.attributes.spellcheck,delete n.attributes.contenteditable},style:function(n){var i=n.children[0];i&&i.value&&(i.value=t.trim(i.value)),n.attributes.type||(n.attributes.type="text/css")}},attributes:{"class":function(n){return t.ltrim(n.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}},comment:function(t){return t.substr(0,i.length)==i?(t=t.substr(i.length,3)=="{C}"?t.substr(i.length+3):t.substr(i.length),new n.htmlParser.cdata(decodeURIComponent(t))):t}},a={elements:{}};for(r in e)a.elements[r]=d;u&&(l.attributes.style=function(n){return n.toLowerCase()});var g=/<(?:a|area|img|input)[\s\S]*?\s((?:href|src|name)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+)))/gi,nt=/(?:<style(?=[ >])[^>]*>[\s\S]*<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,tt=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,it=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,rt=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,ut=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi;f.add("htmldataprocessor",{requires:["htmlwriter"],init:function(t){var i=t.dataProcessor=new n.htmlDataProcessor(t);i.writer.forceSimpleAmpersand=t.config.forceSimpleAmpersand,i.dataFilter.addRules(w),i.dataFilter.addRules(c),i.htmlFilter.addRules(l),i.htmlFilter.addRules(a)}}),n.htmlDataProcessor=function(t){var i=this;i.editor=t,i.writer=new n.htmlWriter,i.dataFilter=new n.htmlParser.filter,i.htmlFilter=new n.htmlParser.filter},n.htmlDataProcessor.prototype={toHtml:function(t,i){var r,f,u;return t=vt(t,this.editor.config.protectedSource),t=ft(t),t=et(t),t=st(t),t=ct(t),r=new o("div"),r.setHtml("a"+t),t=r.getHtml().substr(1),t=ht(t),t=ot(t),t=at(t),f=n.htmlParser.fragment.fromHtml(t,i),u=new n.htmlParser.basicWriter,f.writeHtml(u,this.dataFilter),t=u.getHtml(!0),lt(t)},toDataFormat:function(t,i){var r=this.writer,u=n.htmlParser.fragment.fromHtml(t,i);return r.reset(),u.writeHtml(r,this.htmlFilter),r.getHtml(!0)}}}(),s.forceSimpleAmpersand=!1,f.add("image",{init:function(t){var i="image";n.dialog.add(i,this.path+"dialogs/image.js"),t.addCommand(i,new n.dialogCommand(i)),t.ui.addButton("Image",{label:t.lang.common.image,command:i}),t.addMenuItems&&t.addMenuItems({image:{label:t.lang.image.menu,command:"image",group:"image"}}),t.contextMenu&&t.contextMenu.addListener(function(n){return!n||!n.is("img")||n.getAttribute("_cke_realelement")?null:{image:2}})}}),s.image_removeLinkByEmptyURL=!0,function(){function n(n,t){n.getCommand(this.name).setState(t)}function e(t){for(var u=this,s=t.data.path.elements,y,o,f=t.editor,v,c,h,l,a,e=0;e<s.length;e++){if(s[e].getName()=="li"){o=s[e];continue}if(r[s[e].getName()]){y=s[e];break}}if(y){if(u.name=="outdent")return n.call(u,f,2);while(o&&(o=o.getPrevious(i.walker.whitespaces(!0))))if(o.getName&&o.getName()=="li")return n.call(u,f,2);return n.call(u,f,0)}return!u.useIndentClasses&&u.name=="indent"?n.call(u,f,2):(v=t.data.path,c=v.block||v.blockLimit,!c)?n.call(u,f,0):u.useIndentClasses?(h=c.$.className.match(u.classNameRegex),l=0,h&&(h=h[1],l=u.indentClassMap[h]),u.name=="outdent"&&!l||u.name=="indent"&&l==f.config.indentClasses.length)?n.call(u,f,0):n.call(u,f,2):(a=parseInt(c.getStyle(u.indentCssProperty),10),isNaN(a)&&(a=0),a<=0)?n.call(u,f,0):n.call(u,f,2)}function s(n,t,i){for(var e=t.startContainer,s=t.endContainer,a,u,p,g,b,c;e&&!e.getParent().equals(i);)e=e.getParent();while(s&&!s.getParent().equals(i))s=s.getParent();if(e&&s){for(var y=e,l=[],nt=!1;!nt;)y.equals(s)&&(nt=!0),l.push(y),y=y.getNext();if(!(l.length<1)){for(a=i.getParents(!0),u=0;u<a.length;u++)if(a[u].getName&&r[a[u].getName()]){i=a[u];break}var tt=this.name=="indent"?1:-1,rt=l[0],k=l[l.length-1],d={},h=f.list.listToArray(i,d),ut=h[k.getCustomData("listarray_index")].indent;for(u=rt.getCustomData("listarray_index");u<=k.getCustomData("listarray_index");u++)h[u].indent+=tt;for(u=k.getCustomData("listarray_index")+1;u<h.length&&h[u].indent>ut;u++)h[u].indent+=tt;if(p=f.list.arrayToList(h,d,null,n.config.enterMode,0),this.name=="outdent"&&(g=i.getParent())&&g.is("li")){var it=p.listNode.getChildren(),v=[],ft=it.count(),w;for(u=ft-1;u>=0;u--)(w=it.getItem(u))&&w.is&&w.is("li")&&v.push(w)}if(p&&p.listNode.replace(i),v&&v.length)for(u=0;u<v.length;u++){for(b=v[u],c=b;(c=c.getNext())&&c.is&&c.getName()in r;)b.append(c);b.insertAfter(g)}o.clearAllMarkers(d)}}}function h(n,i){var e=this,s=i.createIterator(),c=n.config.enterMode,f,o,r,h,u;for(s.enforceRealBlocks=!0,s.enlargeBr=c!=2;f=s.getNextParagraph();)e.useIndentClasses?(o=f.$.className.match(e.classNameRegex),r=0,o&&(o=o[1],r=e.indentClassMap[o]),e.name=="outdent"?r--:r++,r=Math.min(r,n.config.indentClasses.length),r=Math.max(r,0),h=t.ltrim(f.$.className.replace(e.classNameRegex,"")),r<1?f.$.className=h:f.addClass(n.config.indentClasses[r-1])):(u=parseInt(f.getStyle(e.indentCssProperty),10),isNaN(u)&&(u=0),u+=(e.name=="indent"?1:-1)*n.config.indentOffset,u=Math.max(u,0),u=Math.ceil(u/n.config.indentOffset)*n.config.indentOffset,f.setStyle(e.indentCssProperty,u?u+n.config.indentUnit:""),f.getAttribute("style")===""&&f.removeAttribute("style"))}function u(n,t){var i=this,r;if(i.name=t,i.useIndentClasses=n.config.indentClasses&&n.config.indentClasses.length>0,i.useIndentClasses)for(i.classNameRegex=new RegExp("(?:^|\\s+)("+n.config.indentClasses.join("|")+")(?=$|\\s)"),i.indentClassMap={},r=0;r<n.config.indentClasses.length;r++)i.indentClassMap[n.config.indentClasses[r]]=r+1;else i.indentCssProperty=n.config.contentsLangDirection=="ltr"?"margin-left":"margin-right"}var r={ol:1,ul:1};u.prototype={exec:function(n){var i=n.getSelection(),u=i&&i.getRanges()[0],f,t;if(i&&u){for(f=i.createBookmarks(!0),t=u.getCommonAncestor();t&&!(t.type==1&&r[t.getName()]);)t=t.getParent();t?s.call(this,n,u,t):h.call(this,n,u),n.focus(),n.forceNextSelectionCheck(),i.selectBookmarks(f)}}},f.add("indent",{init:function(n){var i=new u(n,"indent"),r=new u(n,"outdent");n.addCommand("indent",i),n.addCommand("outdent",r),n.ui.addButton("Indent",{label:n.lang.indent,command:"indent"}),n.ui.addButton("Outdent",{label:n.lang.outdent,command:"outdent"});n.on("selectionChange",t.bind(e,i));n.on("selectionChange",t.bind(e,r))},requires:["domiterator","list"]})}(),t.extend(s,{indentOffset:40,indentUnit:"px",indentClasses:null}),function(){function u(n,t){var i=t.block||t.blockLimit,u;return!i||i.getName()=="body"?2:(u=i.getComputedStyle("text-align").replace(r,""),!u&&this.isDefaultAlign||u==this.value)?1:2}function i(n){var t=n.editor.getCommand(this.name);t.state=u.call(this,n.editor,n.data.path),t.fire("state")}function n(n,t,i){var r=this,f,u;if(r.name=t,r.value=i,f=n.config.contentsLangDirection,r.isDefaultAlign=i=="left"&&f=="ltr"||i=="right"&&f=="rtl",u=n.config.justifyClasses,u){switch(i){case"left":r.cssClassName=u[0];break;case"center":r.cssClassName=u[1];break;case"right":r.cssClassName=u[2];break;case"justify":r.cssClassName=u[3]}r.cssClassRegex=new RegExp("(?:^|\\s+)(?:"+u.join("|")+")(?=$|\\s)")}}var r=/(-moz-|-webkit-|start|auto)/i;n.prototype={exec:function(n){var r=this,u=n.getSelection(),f,h;if(u){var c=u.createBookmarks(),e=u.getRanges(),o=r.cssClassName,s,i;for(f=e.length-1;f>=0;f--)for(s=e[f].createIterator();i=s.getNextParagraph();)i.removeAttribute("align"),o?(h=i.$.className=t.ltrim(i.$.className.replace(r.cssClassRegex,"")),r.state!=2||r.isDefaultAlign?h||i.removeAttribute("class"):i.addClass(o)):r.state!=2||r.isDefaultAlign?i.removeStyle("text-align"):i.setStyle("text-align",r.value);n.focus(),n.forceNextSelectionCheck(),u.selectBookmarks(c)}}},f.add("justify",{init:function(r){var u=new n(r,"justifyleft","left"),f=new n(r,"justifycenter","center"),e=new n(r,"justifyright","right"),o=new n(r,"justifyblock","justify");r.addCommand("justifyleft",u),r.addCommand("justifycenter",f),r.addCommand("justifyright",e),r.addCommand("justifyblock",o),r.ui.addButton("JustifyLeft",{label:r.lang.justify.left,command:"justifyleft"}),r.ui.addButton("JustifyCenter",{label:r.lang.justify.center,command:"justifycenter"}),r.ui.addButton("JustifyRight",{label:r.lang.justify.right,command:"justifyright"}),r.ui.addButton("JustifyBlock",{label:r.lang.justify.block,command:"justifyblock"});r.on("selectionChange",t.bind(i,u));r.on("selectionChange",t.bind(i,e));r.on("selectionChange",t.bind(i,f));r.on("selectionChange",t.bind(i,o))},requires:["domiterator"]})}(),t.extend(s,{justifyClasses:null}),f.add("keystrokes",{beforeInit:function(t){t.keystrokeHandler=new n.keystrokeHandler(t),t.specialKeys={}},init:function(n){for(var i=n.config.keystrokes,r=n.config.blockedKeystrokes,u=n.keystrokeHandler.keystrokes,f=n.keystrokeHandler.blockedKeystrokes,t=0;t<i.length;t++)u[i[t][0]]=i[t][1];for(t=0;t<r.length;t++)f[r[t]]=1}}),n.keystrokeHandler=function(n){var t=this;return n.keystrokeHandler?n.keystrokeHandler:(t.keystrokes={},t.blockedKeystrokes={},t._={editor:n},t)},function(){var t,i=function(n){var e,u;n=n.data;var i=n.getKeystroke(),f=this.keystrokes[i],r=this._.editor;return(t=r.fire("key",{keyCode:i})===!0)||(f&&(e={from:"keystrokeHandler"},t=r.execCommand(f,e)!==!1),t||(u=r.specialKeys[i],t=u&&u(r)===!0,t||(t=!!this.blockedKeystrokes[i]))),t&&n.preventDefault(!0),!t},u=function(n){t&&(t=!1,n.data.preventDefault(!0))};n.keystrokeHandler.prototype={attach:function(n){n.on("keydown",i,this);if(r.opera||r.gecko&&r.mac)n.on("keypress",u,this)}}}(),s.blockedKeystrokes=[1066,1073,1085],s.keystrokes=[[4121,"toolbarFocus"],[4122,"elementsPathFocus"],[2121,"contextMenu"],[3121,"contextMenu"],[1090,"undo"],[1089,"redo"],[3090,"redo"],[1076,"link"],[1066,"bold"],[1073,"italic"],[1085,"underline"],[4109,"toolbarCollapse"]],f.add("link",{init:function(t){t.addCommand("link",new n.dialogCommand("link")),t.addCommand("anchor",new n.dialogCommand("anchor")),t.addCommand("unlink",new n.unlinkCommand),t.ui.addButton("Link",{label:t.lang.link.toolbar,command:"link"}),t.ui.addButton("Unlink",{label:t.lang.unlink,command:"unlink"}),t.ui.addButton("Anchor",{label:t.lang.anchor.toolbar,command:"anchor"}),n.dialog.add("link",this.path+"dialogs/link.js"),n.dialog.add("anchor",this.path+"dialogs/anchor.js"),t.addCss("img.cke_anchor{background-image: url("+n.getUrl(this.path+"images/anchor.gif")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 18px;height: 18px;}\na.cke_anchor{background-image: url("+n.getUrl(this.path+"images/anchor.gif")+");background-position: 0 center;background-repeat: no-repeat;border: 1px solid #a9a9a9;padding-left: 18px;}");t.on("selectionChange",function(n){var r=t.getCommand("unlink"),i=n.data.path.lastElement.getAscendant("a",!0);i&&i.getName()=="a"&&i.getAttribute("href")?r.setState(2):r.setState(0)});t.addMenuItems&&t.addMenuItems({anchor:{label:t.lang.anchor.menu,command:"anchor",group:"anchor"},link:{label:t.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:t.lang.unlink,command:"unlink",group:"link",order:5}}),t.contextMenu&&t.contextMenu.addListener(function(n){if(!n)return null;var t=n.is("img")&&n.getAttribute("_cke_real_element_type")=="anchor";if(!t){if(!(n=n.getAscendant("a",!0)))return null;t=n.getAttribute("name")&&!n.getAttribute("href")}return t?{anchor:2}:{link:2,unlink:2}})},afterInit:function(n){var t=n.dataProcessor,i=t&&t.dataFilter;i&&i.addRules({elements:{a:function(t){var i=t.attributes;if(i.name&&!i.href)return n.createFakeParserElement(t,"cke_anchor","anchor")}}})},requires:["fakeobjects"]}),n.unlinkCommand=function(){},n.unlinkCommand.prototype={exec:function(n){for(var i=n.getSelection(),e=i.createBookmarks(),r=i.getRanges(),f,u,t=0;t<r.length;t++)(f=r[t].getCommonAncestor(!0),u=f.getAscendant("a",!0),u)&&r[t].selectNodeContents(u);i.selectRanges(r),n.document.$.execCommand("unlink",!1,null),i.selectBookmarks(e)}},t.extend(s,{linkShowAdvancedTab:!0,linkShowTargetTab:!0}),function(){function c(n,t){n.getCommand(this.name).setState(t)}function p(n){for(var u=n.data.path,e=u.blockLimit,i=u.elements,f,t=0;t<i.length&&(f=i[t])&&!f.equals(e);t++)if(r[i[t].getName()])return c.call(this,n.editor,this.type==i[t].getName()?1:2);return c.call(this,n.editor,2)}function b(n,t,i,r){for(var l=f.list.listToArray(t.root,i),h=[],e,a,v,s,c,y,u=0;u<t.contents.length;u++)(e=t.contents[u],e=e.getAscendant("li",!0),e&&!e.getCustomData("list_item_processed"))&&(h.push(e),o.setMarker(i,e,"list_item_processed",!0));for(a=t.root.getDocument().createElement(this.type),u=0;u<h.length;u++)v=h[u].getCustomData("listarray_index"),l[v].parent=a;for(s=f.list.arrayToList(l,i,null,n.config.enterMode),y=s.listNode.getChildCount(),u=0;u<y&&(c=s.listNode.getChild(u));u++)c.getName()==this.type&&r.push(c);s.listNode.replace(t.root)}function k(n,t,i){var r=t.contents,a=t.root.getDocument(),e=[],h,o,f,c,v,y,s,p,l;for(r.length==1&&r[0].equals(t.root)&&(h=a.createElement("div"),r[0].moveChildren&&r[0].moveChildren(h),r[0].append(h),r[0]=h),o=t.contents[0].getParent(),f=0;f<r.length;f++)o=o.getCommonAncestor(r[f].getParent());for(f=0;f<r.length;f++)for(c=r[f];v=c.getParent();){if(v.equals(o)){e.push(c);break}c=v}if(!(e.length<1)){for(y=e[e.length-1].getNext(),s=a.createElement(this.type),i.push(s);e.length;)p=e.shift(),l=a.createElement("li"),p.moveChildren(l),p.remove(),l.appendTo(s),u||l.appendBogus();y?s.insertBefore(y):s.appendTo(o)}}function d(n,t,r){function k(r){!(h=v[r?"getFirst":"getLast"]())||h.is&&h.isBlockBoundary()||!(y=t.root[r?"getPrevious":"getNext"](i.walker.whitespaces(!0)))||y.is&&y.isBlockBoundary({br:1})||n.document.createElement("br")[r?"insertBefore":"insertAfter"](h)}for(var e=f.list.listToArray(t.root,r),c=[],s,l,a,p,w,b,v,h,y,u=0;u<t.contents.length;u++)(s=t.contents[u],s=s.getAscendant("li",!0),s&&!s.getCustomData("list_item_processed"))&&(c.push(s),o.setMarker(r,s,"list_item_processed",!0));for(l=null,u=0;u<c.length;u++)a=c[u].getCustomData("listarray_index"),e[a].indent=-1,l=a;for(u=l+1;u<e.length;u++)if(e[u].indent>e[u-1].indent+1){for(p=e[u-1].indent+1-e[u].indent,w=e[u].indent;e[u]&&e[u].indent>=w;)e[u].indent+=p,u++;u--}b=f.list.arrayToList(e,r,null,n.config.enterMode),v=b.listNode,k(!0),k(),v.replace(t.root)}function l(n,t){this.name=n,this.type=t}function g(n,t){for(var r,u=n.children,f=u.length,i=0;i<f;i++)if(r=u[i],r.name&&r.name in t)return i;return f}function w(t){return function(i){var o=i.children,h=g(i,e.$list),c=o[h],r=c&&c.previous,s,f;r&&(r.name&&r.name=="br"||r.value&&(s=r.value.match(a)))&&(f=r,s&&s.index||f!=o[0]?f.name=="br"?o.splice(h-1,1):f.value=f.value.replace(a,""):o[0]=t||u?new n.htmlParser.text(""):new n.htmlParser.element("br",{}))}}var r={ol:1,ul:1},e,a,v,s,y;f.list={listToArray:function(n,t,i,u,e){var l,v,h,s,a,y,c;if(!r[n.getName()])return[];for(u||(u=0),i||(i=[]),l=0,v=n.getChildCount();l<v;l++)if(h=n.getChild(l),h.$.nodeName.toLowerCase()=="li")for(s={parent:n,indent:u,contents:[]},e?s.grandparent=e:(s.grandparent=n.getParent(),s.grandparent&&s.grandparent.$.nodeName.toLowerCase()=="li"&&(s.grandparent=s.grandparent.getParent())),t&&o.setMarker(t,h,"listarray_index",i.length),i.push(s),a=0,y=h.getChildCount();a<y;a++)c=h.getChild(a),c.type==1&&r[c.getName()]?f.list.listToArray(c,t,i,u+1,s.grandparent):s.contents.push(c);return i},arrayToList:function(n,t,e,s){var l,a,k,d,g,nt,p;if(e||(e=0),!n||n.length<e+1)return null;for(var v=n[e].parent.getDocument(),w=new i.documentFragment(v),y=null,c=e,b=Math.max(n[e].indent,0),h=null,tt=s==1?"p":"div";;){if(l=n[c],l.indent==b){for(y&&n[c].parent.getName()==y.getName()||(y=n[c].parent.clone(!1,!0),w.append(y)),h=y.append(v.createElement("li")),a=0;a<l.contents.length;a++)h.append(l.contents[a].clone(!0,!0));c++}else if(l.indent==Math.max(b,0)+1)k=f.list.arrayToList(n,null,c,s),h.append(k.listNode),c=k.nextIndex;else if(l.indent==-1&&!e&&l.grandparent){for(h,h=r[l.grandparent.getName()]?v.createElement("li"):s!=2&&l.grandparent.getName()!="td"?v.createElement(tt):new i.documentFragment(v),a=0;a<l.contents.length;a++)h.append(l.contents[a].clone(!0,!0));h.type==11&&c!=n.length-1&&(h.getLast()&&h.getLast().type==1&&h.getLast().getAttribute("type")=="_moz"&&h.getLast().remove(),h.appendBogus()),h.type==1&&h.getName()==tt&&h.$.firstChild&&(h.trim(),d=h.getFirst(),d.type==1&&d.isBlockBoundary()&&(g=new i.documentFragment(v),h.moveChildren(g),h=g)),nt=h.$.nodeName.toLowerCase(),u||nt!="div"&&nt!="p"||h.appendBogus(),w.append(h),y=null,c++}else return null;if(n.length<=c||Math.max(n[c].indent,0)<b)break}if(t)for(p=w.getFirst();p;)p.type==1&&o.clearMarkers(t,p),p=p.getNextSourceNode();return{listNode:w,nextIndex:c}}},l.prototype={exec:function(n){var w,s,f,g,rt,h,e,t,y,p,lt,at;n.focus();var it=n.document,a=n.getSelection(),u=a&&a.getRanges();if(u&&!(u.length<1)){this.state==2&&(w=it.getBody(),w.trim(),w.getFirst()?(f=u.length==1&&u[0],g=f&&f.getEnclosedNode(),g&&g.is&&this.type==g.getName()&&c.call(this,n,1)):(s=it.createElement(n.config.enterMode==1?"p":n.config.enterMode==3?"div":"br"),s.appendTo(w),u=[new i.range(it)],s.is("br")?(u[0].setStartBefore(s),u[0].setEndAfter(s)):u[0].selectNodeContents(s),a.selectRanges(u)));for(var vt=a.createBookmarks(!0),nt=[],v={};u.length>0;){f=u.shift();var tt=f.getBoundaryNodes(),et=tt.startNode,ot=tt.endNode;for(et.type==1&&et.getName()=="td"&&f.setStartAt(tt.startNode,1),ot.type==1&&ot.getName()=="td"&&f.setEndAt(tt.endNode,2),rt=f.createIterator(),rt.forceBrBreak=this.state==2;h=rt.getNextParagraph();){var st=new i.elementPath(h),ht=st.elements,yt=ht.length,ut=null,ct=!1,ft=st.blockLimit,l;for(e=yt-1;e>=0&&(l=ht[e]);e--)if(r[l.getName()]&&ft.contains(l)){ft.removeCustomData("list_group_object"),t=l.getCustomData("list_group_object"),t?t.contents.push(h):(t={root:l,contents:[h]},nt.push(t),o.setMarker(v,l,"list_group_object",t)),ct=!0;break}ct||(y=ft,y.getCustomData("list_group_object")?y.getCustomData("list_group_object").contents.push(h):(t={root:y,contents:[h]},o.setMarker(v,y,"list_group_object",t),nt.push(t)))}}for(p=[];nt.length>0;)t=nt.shift(),this.state==2?r[t.root.getName()]?b.call(this,n,t,v,p):k.call(this,n,t,p):this.state==1&&r[t.root.getName()]&&d.call(this,n,t,v);for(e=0;e<p.length;e++)ut=p[e],at=this,(lt=function(n){var t=ut[n?"getPrevious":"getNext"](i.walker.whitespaces(!0));t&&t.getName&&t.getName()==at.type&&(t.remove(),t.moveChildren(ut,n?!0:!1))})(),lt(!0);o.clearAllMarkers(v),a.selectBookmarks(vt),n.focus()}}},e=h,a=/[\t\r\n ]*(?:&nbsp;|\xa0)$/,v={elements:{}};for(s in e.$listItem)v.elements[s]=w();y={elements:{}};for(s in e.$listItem)y.elements[s]=w(!0);f.add("list",{init:function(n){var i=new l("numberedlist","ol"),r=new l("bulletedlist","ul");n.addCommand("numberedlist",i),n.addCommand("bulletedlist",r),n.ui.addButton("NumberedList",{label:n.lang.numberedlist,command:"numberedlist"}),n.ui.addButton("BulletedList",{label:n.lang.bulletedlist,command:"bulletedlist"});n.on("selectionChange",t.bind(p,i));n.on("selectionChange",t.bind(p,r))},afterInit:function(n){var t=n.dataProcessor;t&&(t.dataFilter.addRules(v),t.htmlFilter.addRules(y))},requires:["domiterator"]})}(),function(){function i(n){var r,u,t,e,f,i;if(!n||n.type!=1||n.getName()!="form")return[];for(r=[],u=["style","className"],t=0;t<u.length;t++)e=u[t],f=n.$.elements.namedItem(e),f&&(i=new o(f),r.push([i,i.nextSibling]),i.remove());return r}function r(n,t){var i,r,u;if(n&&n.type==1&&n.getName()=="form"&&t.length>0)for(i=t.length-1;i>=0;i--)r=t[i][0],u=t[i][1],u?r.insertBefore(u):r.appendTo(n)}function t(n,t){var e=i(n),f={},u=n.$;return t||(f["class"]=u.className||"",u.className=""),f.inline=u.style.cssText||"",t||(u.style.cssText="position: static; overflow: visible"),r(e),f}function e(n,t){var f=i(n),u=n.$;"class"in t&&(u.className=t["class"]),"inline"in t&&(u.style.cssText=t.inline),r(f)}function s(n,t){return function(){var i=n.getViewPaneSize();t.resize(i.width,i.height,null,!0)}}f.add("maximize",{init:function(i){var l=i.lang,c=n.document,r=c.getWindow(),f,o,h,a=s(r,i),v=2;i.addCommand("maximize",{modes:{wysiwyg:1,source:1},editorFocus:!1,exec:function(){var s=i.container.getChild(0),b=i.getThemeSpace("contents"),k,y,n,d,g,w,p,it;if(i.mode=="wysiwyg"?(k=i.getSelection(),f=k&&k.getRanges(),o=r.getScrollPosition()):(y=i.textarea.$,f=!u&&[y.selectionStart,y.selectionEnd],o=[y.scrollLeft,y.scrollTop]),this.state==2){r.on("resize",a);for(h=r.getScrollPosition(),n=i.container;n=n.getParent();)n.setCustomData("maximize_saved_styles",t(n)),n.setStyle("z-index",i.config.baseFloatZIndex-1);b.setCustomData("maximize_saved_styles",t(b,!0)),s.setCustomData("maximize_saved_styles",t(s,!0)),u?c.$.documentElement.style.overflow=c.getBody().$.style.overflow="hidden":c.getBody().setStyles({overflow:"hidden",width:"0px",height:"0px"}),u?setTimeout(function(){r.$.scrollTo(0,0)},0):r.$.scrollTo(0,0),d=r.getViewPaneSize(),s.setStyle("position","absolute"),s.$.offsetLeft,s.setStyles({"z-index":i.config.baseFloatZIndex-1,left:"0px",top:"0px"}),i.resize(d.width,d.height,null,!0),g=s.getDocumentPosition(),s.setStyles({left:-1*g.x+"px",top:-1*g.y+"px"}),s.addClass("cke_maximized")}else if(this.state==1){for(r.removeListener("resize",a),w=[b,s],p=0;p<w.length;p++)e(w[p],w[p].getCustomData("maximize_saved_styles")),w[p].removeCustomData("maximize_saved_styles");for(n=i.container;n=n.getParent();)e(n,n.getCustomData("maximize_saved_styles")),n.removeCustomData("maximize_saved_styles");u?setTimeout(function(){r.$.scrollTo(h.x,h.y)},0):r.$.scrollTo(h.x,h.y),s.removeClass("cke_maximized"),i.fire("resize")}this.toggleState();var rt=this.uiItems[0],nt=this.state==2?l.maximize:l.minimize,tt=i.element.getDocument().getById(rt._.id);tt.getChild(1).setHtml(nt),tt.setAttribute("title",nt),tt.setAttribute("href",'javascript:void("'+nt+'");'),i.mode=="wysiwyg"?f?(i.getSelection().selectRanges(f),it=i.getSelection().getStartElement(),it&&it.scrollIntoView(!0)):r.$.scrollTo(o.x,o.y):(f&&(y.selectionStart=f[0],y.selectionEnd=f[1]),y.scrollLeft=o[0],y.scrollTop=o[1]),f=o=null,v=this.state},canUndo:!1}),i.ui.addButton("Maximize",{label:l.maximize,command:"maximize"});i.on("mode",function(){i.getCommand("maximize").setState(v)},null,null,100)}})}(),f.add("newpage",{init:function(n){n.addCommand("newpage",{modes:{wysiwyg:1,source:1},exec:function(n){var t=this;n.setData(n.config.newpage_html,function(){setTimeout(function(){n.fire("afterCommandExec",{name:t.name,command:t})},200)}),n.focus()},async:!0}),n.ui.addButton("NewPage",{label:n.lang.newPage,command:"newpage"})}}),s.newpage_html="",f.add("pagebreak",{init:function(t){t.addCommand("pagebreak",f.pagebreakCmd),t.ui.addButton("PageBreak",{label:t.lang.pagebreak,command:"pagebreak"}),t.addCss("img.cke_pagebreak{background-image: url("+n.getUrl(this.path+"images/pagebreak.gif")+");background-position: center center;background-repeat: no-repeat;clear: both;display: block;float: none;width: 100%;border-top: #999999 1px dotted;border-bottom: #999999 1px dotted;height: 5px;}")},afterInit:function(n){var t=n.dataProcessor,i=t&&t.dataFilter;i&&i.addRules({elements:{div:function(t){var r=t.attributes,u=r&&r.style,i=u&&t.children.length==1&&t.children[0],f=i&&i.name=="span"&&i.attributes.style;if(f&&/page-break-after\s*:\s*always/i.test(u)&&/display\s*:\s*none/i.test(f))return n.createFakeParserElement(t,"cke_pagebreak","div")}}})},requires:["fakeobjects"]}),f.pagebreakCmd={exec:function(n){var t=o.createFromHtml('<div style="page-break-after: always;"><span style="display: none;">&nbsp;<\/span><\/div>'),r,u,i;for(t=n.createFakeElement(t,"cke_pagebreak","div"),r=n.getSelection().getRanges(),i=0;i<r.length;i++)u=r[i],i>0&&(t=t.clone(!0)),u.splitBlock("p"),u.insertNode(t)}},function(){f.add("pastefromword",{init:function(t){var i=0,r=function(){setTimeout(function(){i=0},0)};t.addCommand("pastefromword",{canUndo:!1,exec:function(){if(i=1,t.execCommand("paste")===!1)t.on("dialogHide",function(n){n.removeListener(),r()})}}),t.ui.addButton("PasteFromWord",{label:t.lang.pastefromword.toolbar,command:"pastefromword"});t.on("paste",function(r){var u=r.data,f,e;(f=u.html)&&(i||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(f))&&(e=this.loadFilterRules(function(){e?t.fire("paste",u):(!t.config.pasteFromWordPromptCleanup||i||confirm(t.lang.pastefromword.confirmCleanup))&&(u.html=n.cleanWord(f,t))}),e&&r.cancel())},this)},loadFilterRules:function(t){var i=n.cleanWord,r;return i?t():(r=n.getUrl(s.pasteFromWordCleanupFile||this.path+"filter/default.js"),n.scriptLoader.load(r,t,null,!1,!0)),!i}})}(),function(){function i(n,t){if(u){var i=n.selection;i.type=="Control"&&i.clear(),i.createRange().pasteHTML(t)}else n.execCommand("inserthtml",!1,t)}function r(n,t,i,r){while(i--)f.enterkey[t==2?"enterBr":"enterBlock"](n,t,null,r)}var e={exec:function(n){var i=t.tryThese(function(){var n=window.clipboardData.getData("Text");if(!n)throw 0;return n},function(){var i,t,n,r;return window.netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect"),i=window.Components.classes["@mozilla.org/widget/clipboard;1"].getService(window.Components.interfaces.nsIClipboard),t=window.Components.classes["@mozilla.org/widget/transferable;1"].createInstance(window.Components.interfaces.nsITransferable),t.addDataFlavor("text/unicode"),i.getData(t,i.kGlobalClipboard),n={},r={},t.getTransferData("text/unicode",n,r),n=n.value.QueryInterface(window.Components.interfaces.nsISupportsString),n.data.substring(0,r.value/2)});if(i)n.fire("paste",{text:i});else return n.openDialog("pastetext"),!1;return!0}};f.add("pastetext",{init:function(t){var i="pastetext",r=t.addCommand(i,e);if(t.ui.addButton("PasteText",{label:t.lang.pasteText.button,command:i}),n.dialog.add(i,n.getUrl(this.path+"dialogs/pastetext.js")),t.config.forcePasteAsPlainText)t.on("beforeCommandExec",function(n){n.data.name=="paste"&&(t.execCommand("pastetext"),n.cancel())},null,null,0)},requires:["clipboard"]}),n.editor.prototype.insertText=function(n){var f;this.focus(),this.fire("saveSnapshot");var o=this.getSelection().getStartElement().hasAscendant("pre",!0)?2:this.config.enterMode,e=o==2,s=this.document.$,h=this,u;n=t.htmlEncode(n.replace(/\r\n|\r/g,"\n")),f=0,n.replace(/\n+/g,function(t,c){u=n.substring(f,c),f=c+t.length,u.length&&i(s,u);var l=t.length,a=e?0:Math.floor(l/2),v=e?l:l%2;r(h,o,a),r(h,2,v,e?!1:!0)}),u=n.substring(f,n.length),u.length&&i(s,u),this.fire("saveSnapshot")}}(),f.add("popup"),t.extend(n.editor.prototype,{popup:function(n,t,i){t=t||"80%",i=i||"70%",typeof t=="string"&&t.length>1&&t.substr(t.length-1,1)=="%"&&(t=parseInt(window.screen.width*parseInt(t,10)/100,10)),typeof i=="string"&&i.length>1&&i.substr(i.length-1,1)=="%"&&(i=parseInt(window.screen.height*parseInt(i,10)/100,10)),t<640&&(t=640),i<420&&(i=420);var u=parseInt((window.screen.height-i)/2,10),f=parseInt((window.screen.width-t)/2,10),e="location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,width="+t+",height="+i+",top="+u+",left="+f,r=window.open("",null,e,!0);if(!r)return!1;try{r.moveTo(f,u),r.resizeTo(t,i),r.focus(),r.location.href=n}catch(o){r=window.open(n,null,e,!0)}return!0}}),function(){var i={modes:{wysiwyg:1,source:1},canUndo:!1,exec:function(n){var f,s=n.config,c=s.baseHref?'<base href="'+s.baseHref+'"/>':"",l=r.isCustomDomain(),u,i,e,h,o;s.fullPage?f=n.getData().replace(/<head>/,"$&"+c).replace(/[^>]*(?=<\/title>)/,n.lang.preview):(u="<body ",i=n.document&&n.document.getBody(),i&&(i.getAttribute("id")&&(u+='id="'+i.getAttribute("id")+'" '),i.getAttribute("class")&&(u+='class="'+i.getAttribute("class")+'" ')),u+=">",f=n.config.docType+'<html dir="'+n.config.contentsLangDirection+'"><head>'+c+"<title>"+n.lang.preview+"<\/title>"+t.buildStyleHtml(n.config.contentsCss)+"<\/head>"+u+n.getData()+"<\/body><\/html>");var a=640,v=420,y=80;try{e=window.screen,a=Math.round(e.width*.8),v=Math.round(e.height*.7),y=Math.round(e.width*.1)}catch(p){}h="",l&&(window._cke_htmlToLoad=f,h='javascript:void( (function(){document.open();document.domain="'+document.domain+'";document.write( window.opener._cke_htmlToLoad );document.close();window.opener._cke_htmlToLoad = null;})() )'),o=window.open(h,null,"toolbar=yes,location=no,status=yes,menubar=yes,scrollbars=yes,resizable=yes,width="+a+",height="+v+",left="+y),l||(o.document.open(),o.document.write(f),o.document.close())}},n="preview";f.add(n,{init:function(t){t.addCommand(n,i),t.ui.addButton("Preview",{label:t.lang.preview,command:n})}})}(),f.add("print",{init:function(n){var t="print",i=n.addCommand(t,f.print);n.ui.addButton("Print",{label:n.lang.print,command:t})}}),f.print={exec:function(n){r.opera||(r.gecko?n.window.$.print():n.document.$.execCommand("Print"))},canUndo:!1,modes:{wysiwyg:!r.opera}},f.add("removeformat",{requires:["selection"],init:function(n){n.addCommand("removeFormat",f.removeformat.commands.removeformat),n.ui.addButton("RemoveFormat",{label:n.lang.removeFormat,command:"removeFormat"})}}),f.removeformat={commands:{removeformat:{exec:function(n){for(var e=n._.removeFormatRegex||(n._.removeFormatRegex=new RegExp("^(?:"+n.config.removeFormatTags.replace(/,/g,"|")+")$","i")),a=n._.removeAttributes||(n._.removeAttributes=n.config.removeFormatAttributes.split(",")),o=n.getSelection().getRanges(),r,t,l,u=0;r=o[u];u++)if(!r.collapsed){r.enlarge(1);var f=r.createBookmark(),s=f.startNode,h=f.endNode,c=function(n){for(var r=new i.elementPath(n),f=r.elements,t,u=1;t=f[u];u++){if(t.equals(r.block)||t.equals(r.blockLimit))break;e.test(t.getName())&&n.breakParent(t)}};for(c(s),c(h),t=s.getNextSourceNode(!0,1);t;){if(t.equals(h))break;l=t.getNextSourceNode(!1,1),t.getName()=="img"&&t.getAttribute("_cke_realelement")||(e.test(t.getName())?t.remove(!0):t.removeAttributes(a)),t=l}r.moveToBookmark(f)}n.getSelection().selectRanges(o)}}}},s.removeFormatTags="b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var",s.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",f.add("resize",{init:function(i){var r=i.config,u,f,e,o;if(r.resize_enabled){u=null;function s(n){var t=n.data.$.screenX-f.x,u=n.data.$.screenY-f.y,o=e.width+t*(i.lang.dir=="rtl"?-1:1),s=e.height+u;i.resize(Math.max(r.resize_minWidth,Math.min(o,r.resize_maxWidth)),Math.max(r.resize_minHeight,Math.min(s,r.resize_maxHeight)))}function h(){n.document.removeListener("mousemove",s),n.document.removeListener("mouseup",h),i.document&&(i.document.removeListener("mousemove",s),i.document.removeListener("mouseup",h))}o=t.addFunction(function(t){u||(u=i.getResizable()),e={width:u.$.offsetWidth||0,height:u.$.offsetHeight||0},f={x:t.screenX,y:t.screenY};n.document.on("mousemove",s);n.document.on("mouseup",h);if(i.document){i.document.on("mousemove",s);i.document.on("mouseup",h)}});i.on("themeSpace",function(n){n.data.space=="bottom"&&(n.data.html+='<div class="cke_resizer" title="'+t.htmlEncode(i.lang.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+o+', event)"><\/div>')},i,null,100)}}}),s.resize_minWidth=750,s.resize_minHeight=250,s.resize_maxWidth=3e3,s.resize_maxHeight=3e3,s.resize_enabled=!0,function(){var t={modes:{wysiwyg:1,source:1},exec:function(n){var t=n.element.$.form;if(t)try{t.submit()}catch(i){t.submit.click&&t.submit.click()}}},n="save";f.add(n,{init:function(i){var r=i.addCommand(n,t);r.modes={wysiwyg:!!i.element.$.form},i.ui.addButton("Save",{label:i.lang.save,command:n})}})}(),function(){function r(n,t){var r=!1,i;for(i in t)if(t[i]===n||t[i]==n){r=!0;break}return r}var i="scaytcheck",e="",h=null,s=function(){var i=this,o=function(){var r={},o,u,f,e,c;if(r.srcNodeRef=i.document.getWindow().$.frameElement,r.assocApp="CKEDITOR."+n.version+"@"+n.revision,r.customerid=i.config.scayt_customerid||"1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2",r.customDictionaryIds=i.config.scayt_customDictionaryIds,r.userDictionaryName=i.config.scayt_userDictionaryName,r.sLang=i.config.scayt_sLang||"en_US",n._scaytParams)for(o in n._scaytParams)r[o]=n._scaytParams[o];u=new window.scayt(r),f=t.instances[i.name],f&&(u.sLang=f.sLang,u.option(f.option()),u.paused=f.paused),t.instances[i.name]=u;var l=window.scayt.uiTags,s=[];for(e=0,c=4;e<c;e++)s.push(l[e]&&t.uiTabs[e]);t.uiTabs=s;try{u.setDisabled(h===!1)}catch(a){}i.fire("showScaytState")},r,f;i.on("contentDom",o);i.on("contentDomUnload",function(){for(var r=n.document.getElementsByTag("script"),t=0;t<r.count();t++){var i=r.getItem(t),u=i.getId(),f=i.getAttribute("src");u&&f&&u.match(/^dojoIoScript(\d+)$/i)&&f.match(/^https?:\/\/svc\.spellchecker\.net\/spellcheck\/script\/ssrv\.cgi/i)&&i.remove()}});i.on("beforeCommandExec",function(n){if((n.data.name=="source"||n.data.name=="newpage")&&i.mode=="wysiwyg"){var r=t.getScayt(i);r&&(h=r.paused=!r.disabled,r.destroy(),delete t.instances[i.name])}});i.on("destroy",function(){t.getScayt(i).destroy()});i.on("afterSetData",function(){t.isScaytEnabled(i)&&t.getScayt(i).refresh()});i.on("insertElement",function(){var n=t.getScayt(i);if(t.isScaytEnabled(i)){u&&i.getSelection().unlock(!0);try{n.refresh()}catch(r){}}},this,null,50);i.on("insertHtml",function(){var n=t.getScayt(i);if(t.isScaytEnabled(i)){u&&i.getSelection().unlock(!0);try{n.refresh()}catch(r){}}},this,null,50);i.on("scaytDialog",function(n){n.data.djConfig=window.djConfig,n.data.scayt_control=t.getScayt(i),n.data.tab=e,n.data.scayt=window.scayt});r=i.dataProcessor,f=r&&r.htmlFilter,f&&f.addRules({elements:{span:function(n){if(n.attributes.scayt_word&&n.attributes.scaytid)return delete n.name,n}}}),i.document&&o()};f.scayt={engineLoaded:!1,instances:{},getScayt:function(n){return this.instances[n.name]},isScaytReady:function(n){return this.engineLoaded===!0&&"undefined"!=typeof window.scayt&&this.getScayt(n)},isScaytEnabled:function(n){var t=this.getScayt(n);return t?t.disabled===!1:!1},loadEngine:function(i){var r;if(this.engineLoaded===!0)return s.apply(i);if(this.engineLoaded==-1)return n.on("scaytReady",function(){s.apply(i)});n.on("scaytReady",s,i);n.on("scaytReady",function(){this.engineLoaded=!0},this,null,0);this.engineLoaded=-1,r=document.location.protocol,r=r.search(/https?:/)!=-1?r:"http:";var u=i.config.scayt_srcUrl||r+"//svc.spellchecker.net/spellcheck3/lf/scayt/scayt21.js",f=t.parseUrl(u).path+"/";return n._djScaytConfig={baseUrl:f,addOnLoad:[function(){n.fireOnce("scaytReady")}],isDebug:!1},n.document.getHead().append(n.document.createElement("script",{attributes:{type:"text/javascript",src:u}})),null},parseUrl:function(n){var t;return n.match&&(t=n.match(/(.*)[\/\\](.*?\.\w+)$/))?{path:t[1],file:t[2]}:n}};var t=f.scayt,o=function(n,t,i,r,u,f,e){n.addCommand(r,u),n.addMenuItem(r,{label:i,command:r,group:f,order:e})},c={preserveState:!0,editorFocus:!1,exec:function(n){var i,r;if(t.isScaytReady(n))i=t.isScaytEnabled(n),this.setState(i?2:1),r=t.getScayt(n),r.setDisabled(i);else if(!n.config.scayt_autoStartup&&t.engineLoaded>=0){this.setState(0);n.on("showScaytState",function(){this.removeListener(),this.setState(t.isScaytEnabled(n)?1:2)},this);t.loadEngine(n)}}};f.add("scayt",{requires:["menubutton"],beforeInit:function(n){n.config.menu_groups="scayt_suggest,scayt_moresuggest,scayt_control,"+n.config.menu_groups},init:function(u){var v={},s={},p=u.addCommand(i,c),y,h,f,b,k,l,a,w;for(n.dialog.add(i,n.getUrl(this.path+"dialogs/options.js")),y=u.config.scayt_uiTabs||"1,1,1",h=[],y=y.split(","),f=0,b=3;f<b;f++)k=parseInt(y[f]||"1",10),h.push(k);if(l="scaytButton",u.addMenuGroup(l),a={},a.scaytToggle={label:u.lang.scayt.enable,command:i,group:l},h[0]==1&&(a.scaytOptions={label:u.lang.scayt.options,group:l,onClick:function(){e="options",u.openDialog(i)}}),h[1]==1&&(a.scaytLangs={label:u.lang.scayt.langs,group:l,onClick:function(){e="langs",u.openDialog(i)}}),h[2]==1&&(a.scaytDict={label:u.lang.scayt.dictionariesTab,group:l,onClick:function(){e="dictionaries",u.openDialog(i)}}),a.scaytAbout={label:u.lang.scayt.about,group:l,onClick:function(){e="about",u.openDialog(i)}},h[3]=1,t.uiTabs=h,u.addMenuItems(a),u.ui.add("Scayt",5,{label:u.lang.scayt.title,title:u.lang.scayt.title,className:"cke_button_scayt",onRender:function(){p.on("state",function(){this.setState(p.state)},this)},onMenu:function(){var n=t.isScaytEnabled(u);return u.getMenuItem("scaytToggle").label=u.lang.scayt[n?"disable":"enable"],{scaytToggle:2,scaytOptions:n&&t.uiTabs[0]?2:0,scaytLangs:n&&t.uiTabs[1]?2:0,scaytDict:n&&t.uiTabs[2]?2:0,scaytAbout:n&&t.uiTabs[3]?2:0}}}),u.contextMenu&&u.addMenuItems&&u.contextMenu.addListener(function(n){var h,y,e,i,b,l,p,k,d,g;if(!(t.isScaytEnabled(u)&&n)||(h=t.getScayt(u),y=h.getWord(n.$),!y))return null;var nt=h.getLang(),c=window.scayt.getSuggestion(y,nt);if(!c||!c.length)return null;for(f in v)delete u._.menuItems[f],delete u._.commands[f];for(f in s)delete u._.menuItems[f],delete u._.commands[f];v={},s={};var tt=u.config.scayt_moreSuggestions||"on",w=!1,a=u.config.scayt_maxSuggestions;for(typeof a!="number"&&(a=5),a||(a=c.length),e=u.config.scayt_contextCommands||"all",e=e.split("|"),i=0,b=c.length;i<b;i+=1)l="scayt_suggestion_"+c[i].replace(" ","_"),p=function(n,t){return{exec:function(){h.replace(n,t)}}}(n.$,c[i]),i<a?(o(u,"button_"+l,c[i],l,p,"scayt_suggest",i+1),{}[l]=2,s[l]=2):tt=="on"&&(o(u,"button_"+l,c[i],l,p,"scayt_moresuggest",i+1),v[l]=2,w=!0);return w&&(u.addMenuItem("scayt_moresuggest",{label:u.lang.scayt.moreSuggestions,group:"scayt_moresuggest",order:10,getItems:function(){return v}}),s.scayt_moresuggest=2),(r("all",e)||r("ignore",e))&&(k={exec:function(){h.ignore(n.$)}},o(u,"ignore",u.lang.scayt.ignore,"scayt_ignore",k,"scayt_control",1),s.scayt_ignore=2),(r("all",e)||r("ignoreall",e))&&(d={exec:function(){h.ignoreAll(n.$)}},o(u,"ignore_all",u.lang.scayt.ignoreAll,"scayt_ignore_all",d,"scayt_control",2),s.scayt_ignore_all=2),(r("all",e)||r("add",e))&&(g={exec:function(){window.scayt.addWordToUserDictionary(n.$)}},o(u,"add_word",u.lang.scayt.addWord,"scayt_add_word",g,"scayt_control",3),s.scayt_add_word=2),h.fireOnContextMenu&&h.fireOnContextMenu(u),s}),u.config.scayt_autoStartup){w=function(){u.removeListener("showScaytState",w),p.setState(t.isScaytEnabled(u)?1:2)};u.on("showScaytState",w);t.loadEngine(u)}}})}(),f.add("smiley",{requires:["dialog"],init:function(t){t.addCommand("smiley",new n.dialogCommand("smiley")),t.ui.addButton("Smiley",{label:t.lang.smiley.toolbar,command:"smiley"}),n.dialog.add("smiley",this.path+"dialogs/smiley.js")}}),s.smiley_path=n.basePath+"plugins/smiley/images/",s.smiley_images=["regular_smile.gif","sad_smile.gif","wink_smile.gif","teeth_smile.gif","confused_smile.gif","tounge_smile.gif","embaressed_smile.gif","omg_smile.gif","whatchutalkingabout_smile.gif","angry_smile.gif","angel_smile.gif","shades_smile.gif","devil_smile.gif","cry_smile.gif","lightbulb.gif","thumbs_down.gif","thumbs_up.gif","heart.gif","broken_heart.gif","kiss.gif","envelope.gif"],s.smiley_descriptions=[":)",":(",";)",":D",":/",":P","","","","","","","",";(","","","","","",":kiss",""],function(){var t=".%2 p,.%2 div,.%2 pre,.%2 address,.%2 blockquote,.%2 h1,.%2 h2,.%2 h3,.%2 h4,.%2 h5,.%2 h6{background-repeat: no-repeat;border: 1px dotted gray;padding-top: 8px;padding-left: 8px;}.%2 p{%1p.png);}.%2 div{%1div.png);}.%2 pre{%1pre.png);}.%2 address{%1address.png);}.%2 blockquote{%1blockquote.png);}.%2 h1{%1h1.png);}.%2 h2{%1h2.png);}.%2 h3{%1h3.png);}.%2 h4{%1h4.png);}.%2 h5{%1h5.png);}.%2 h6{%1h6.png);}",i=/%1/g,r=/%2/g,u={preserveState:!0,editorFocus:!1,exec:function(n){this.toggleState(),this.refresh(n)},refresh:function(n){var t=this.state==1?"addClass":"removeClass";n.document.getBody()[t]("cke_show_blocks")}};f.add("showblocks",{requires:["wysiwygarea"],init:function(f){var e=f.addCommand("showblocks",u);e.canUndo=!1,f.config.startupOutlineBlocks&&e.setState(1),f.addCss(t.replace(i,"background-image: url("+n.getUrl(this.path)+"images/block_").replace(r,"cke_show_blocks ")),f.ui.addButton("ShowBlocks",{label:f.lang.showBlocks,command:"showblocks"});f.on("mode",function(){e.state!=0&&e.refresh(f)});f.on("contentDom",function(){e.state!=0&&e.refresh(f)})}})}(),s.startupOutlineBlocks=!1,function(){var i="cke_show_border",u,o=(r.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th,","{","border : #d3d3d3 1px dotted","}"]:[".%1 table.%2,",".%1 table.%2 > tr > td, .%1 table.%2 > tr > th,",".%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,",".%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,",".%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th","{","border : #d3d3d3 1px dotted","}"]).join(""),e;u=o.replace(/%2/g,i).replace(/%1/g,"cke_show_borders "),e={preserveState:!0,editorFocus:!1,exec:function(n){this.toggleState(),this.refresh(n)},refresh:function(n){var t=this.state==1?"addClass":"removeClass";n.document.getBody()[t]("cke_show_borders")}},f.add("showborders",{requires:["wysiwygarea"],modes:{wysiwyg:1},init:function(n){var t=n.addCommand("showborders",e);t.canUndo=!1,n.config.startupShowBorders!==!1&&t.setState(1),n.addCss(u);n.on("mode",function(){t.state!=0&&t.refresh(n)},null,null,100);n.on("contentDom",function(){t.state!=0&&t.refresh(n)})},afterInit:function(r){var u=r.dataProcessor,f=u&&u.dataFilter,e=u&&u.htmlFilter;f&&f.addRules({elements:{table:function(n){var t=n.attributes,u=t["class"],r=parseInt(t.border,10);(!r||r<=0)&&(t["class"]=(u||"")+" "+i)}}}),e&&e.addRules({elements:{table:function(n){var t=n.attributes,r=t["class"];r&&(t["class"]=r.replace(i,"").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}});n.on("dialogDefinition",function(n){var u;if(n.editor==r&&(u=n.data.name,u=="table"||u=="tableProperties")){var e=n.data.definition,o=e.getContents("info"),f=o.get("txtBorder"),s=f.commit;f.commit=t.override(s,function(n){return function(t,r){n.apply(this,arguments);var u=parseInt(this.getValue(),10);r[!u||u<=0?"addClass":"removeClass"](i)}})}})}})}(),f.add("sourcearea",{requires:["editingblock"],init:function(n){var t=f.sourcearea;n.on("editingBlockReady",function(){var t,i;n.addMode("source",{load:function(f,e){var s,h;if(u&&r.version<8&&f.setStyle("position","relative"),n.textarea=t=new o("textarea"),t.setAttributes({dir:"ltr",tabIndex:-1}),t.addClass("cke_source"),t.addClass("cke_enable_context_menu"),s={width:r.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},u){if(!r.ie8Compat){i=function(){t.hide(),t.setStyle("height",f.$.clientHeight+"px"),t.show()};n.on("resize",i);n.on("afterCommandExec",function(n){n.data.name=="toolbarCollapse"&&i()});s.height=f.$.clientHeight+"px"}}else t.on("mousedown",function(n){n.data.stopPropagation()});f.setHtml(""),f.append(t),t.setStyles(s);t.on("blur",function(){n.focusManager.blur()});t.on("focus",function(){n.focusManager.focus()});n.mayBeDirty=!0,this.loadData(e),h=n.keystrokeHandler,h&&h.attach(t),setTimeout(function(){n.mode="source",n.fire("mode")},r.gecko||r.webkit?100:0)},loadData:function(i){t.setValue(i),n.fire("dataReady")},getData:function(){return t.getValue()},getSnapshotData:function(){return t.getValue()},unload:function(f){n.textarea=t=null,i&&n.removeListener("resize",i),u&&r.version<8&&f.removeStyle("position")},focus:function(){t.focus()}})});n.addCommand("source",t.commands.source),n.ui.addButton&&n.ui.addButton("Source",{label:n.lang.source,command:"source"});n.on("mode",function(){n.getCommand("source").setState(n.mode=="source"?1:2)})}}),f.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},exec:function(n){n.mode=="wysiwyg"&&n.fire("saveSnapshot"),n.getCommand("source").setState(0),n.setMode(n.mode=="source"?"wysiwyg":"source")},canUndo:!1}}},function(){function r(t){var i=[],r=t.element,u,f,e;if(r=="bdo"&&(r="span"),i=["<",r],u=t.attributes,u)for(f in u)i.push(" ",f,'="',u[f],'"');return(e=n.style.getStyleText(t))&&i.push(' style="',e,'"'),i.push(">",t.name,"<\/",r,">"),i.join("")}function e(n,t){var r=n.type,i=t.type;return r==i?0:r==3?-1:i==3?1:i==1?1:-1}f.add("stylescombo",{requires:["richcombo","styles"],init:function(t){var s=t.config,f=t.lang.stylesCombo,h=this.path,o;t.ui.addRichCombo("Styles",{label:f.label,title:f.panelTitle,voiceLabel:f.voiceLabel,className:"cke_styles",multiSelect:!0,panel:{css:t.skin.editor.css.concat(s.contentsCss),voiceLabel:f.panelVoiceLabel},init:function(){var i=this,t=s.stylesCombo_stylesSet.split(":"),u=t[1]?t.slice(1).join(":"):n.getUrl(h+"styles/"+t[0]+".js");t=t[0],n.loadStylesSet(t,u,function(t){var u,h,c=[],s,a,v,l;for(o={},s=0;s<t.length;s++)a=t[s],h=a.name,u=o[h]=new n.style(a),u._name=h,c.push(u);for(c.sort(e),s=0;s<c.length;s++)u=c[s],h=u._name,l=u.type,l!=v&&(i.startGroup(f["panelTitle"+String(l)]),v=l),i.add(h,u.type==3?h:r(u._.definition),h);i.commit(),i.onOpen()})},onClick:function(n){var r,u,f,e;if(t.focus(),t.fire("saveSnapshot"),r=o[n],u=t.getSelection(),r.type==3){f=u.getSelectedElement(),f&&r.applyToObject(f);return}e=new i.elementPath(u.getStartElement()),r.type==2&&r.checkActive(e)?r.remove(t.document):r.apply(t.document),t.fire("saveSnapshot")},onRender:function(){t.on("selectionChange",function(n){for(var f=this.getValue(),e=n.data.path,r=e.elements,u,i,t=0;t<r.length;t++){u=r[t];for(i in o)if(o[i].checkElementRemovable(u,!0)){i!=f&&this.setValue(i);return}}this.setValue("")},this)},onOpen:function(){var n=this,s,h,c;u&&t.focus();var l=t.getSelection(),r=l.getSelectedElement(),a=r&&r.getName(),v=new i.elementPath(r||l.getStartElement()),e=[0,0,0,0];n.showAll(),n.unmarkAll();for(s in o)h=o[s],c=h.type,c==3?r&&h.element==a?(h.checkElementRemovable(r,!0)&&n.mark(s),e[c]++):n.hideItem(s):(h.checkActive(v)&&n.mark(s),e[c]++);e[1]||n.hideGroup(f["panelTitle"+String(1)]),e[2]||n.hideGroup(f["panelTitle"+String(2)]),e[3]||n.hideGroup(f["panelTitle"+String(3)])}})}});var t={};n.addStylesSet=function(n,i){t[n]=i},n.loadStylesSet=function(i,r,u){var f=t[i];if(f){u(f);return}n.scriptLoader.load(r,function(){u(t[i])})}}(),s.stylesCombo_stylesSet="default",f.add("table",{init:function(t){var r=f.table,i=t.lang.table;t.addCommand("table",new n.dialogCommand("table")),t.addCommand("tableProperties",new n.dialogCommand("tableProperties")),t.ui.addButton("Table",{label:i.toolbar,command:"table"}),n.dialog.add("table",this.path+"dialogs/table.js"),n.dialog.add("tableProperties",this.path+"dialogs/table.js"),t.addMenuItems&&t.addMenuItems({table:{label:i.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:i.deleteTable,command:"tableDelete",group:"table",order:1}}),t.contextMenu&&t.contextMenu.addListener(function(n){if(!n)return null;var t=n.is("table")||n.hasAscendant("table");return t?{tabledelete:2,table:2}:null})}}),function(){function t(n){function p(n){r.length>0||n.type==1&&l.test(n.getName())&&!n.getCustomData("selected_cell")&&(o.setMarker(e,n,"selected_cell",!0),r.push(n))}for(var y=n.createBookmarks(),a=n.getRanges(),r=[],e={},f,s,h,c,v,t,u=0;u<a.length;u++)if(f=a[u],f.collapsed)s=f.getCommonAncestor(),h=s.getAscendant("td",!0)||s.getAscendant("th",!0),h&&r.push(h);else for(c=new i.walker(f),c.guard=p;v=c.next();)t=v.getParent(),t&&l.test(t.getName())&&!t.getCustomData("selected_cell")&&(o.setMarker(e,t,"selected_cell",!0),r.push(t));return o.clearAllMarkers(e),n.selectBookmarks(y),r}function d(n){for(var i=n.cells,t=0;t<i.length;t++)i[t].innerHTML="",u||new o(i[t]).appendBogus()}function a(n,t){var i=n.getStartElement().getAscendant("tr"),r;i&&(r=i.clone(!0),r.insertBefore(i),d(t?r.$:i.$))}function h(n){var f,u,r,e,s;if(n instanceof i.selection){for(f=t(n),u=[],r=0;r<f.length;r++)e=f[r].getParent(),u[e.$.rowIndex]=e;for(r=u.length;r>=0;r--)u[r]&&h(u[r])}else n instanceof o&&(s=n.getAscendant("table"),s.$.rows.length==1?s.remove():n.remove())}function v(n,t){var c=n.getStartElement(),i=c.getAscendant("td",!0)||c.getAscendant("th",!0),s,r,f,e,h;if(i)for(s=i.getAscendant("table"),r=i.$.cellIndex,f=0;f<s.$.rows.length;f++)(e=s.$.rows[f],e.cells.length<r+1)||(i=new o(e.cells[r].cloneNode(!1)),u||i.appendBogus(),h=new o(e.cells[r]),t?i.insertBefore(h):i.insertAfter(h))}function y(n){var f,r,s,e,u;if(n instanceof i.selection)for(f=t(n),r=f.length;r>=0;r--)f[r]&&y(f[r]);else if(n instanceof o)for(s=n.getAscendant("table"),e=n.$.cellIndex,r=s.$.rows.length-1;r>=0;r--){if(u=new o(s.$.rows[r]),!e&&u.$.cells.length==1){h(u);continue}u.$.cells[e]&&u.$.removeChild(u.$.cells[e])}}function p(n,t){var f=n.getStartElement(),i=f.getAscendant("td",!0)||f.getAscendant("th",!0),r;i&&(r=i.clone(),u||r.appendBogus(),t?r.insertBefore(i):r.insertAfter(i))}function w(n){var u,r;if(n instanceof i.selection)for(u=t(n),r=u.length-1;r>=0;r--)w(u[r]);else n instanceof o&&(n.getParent().getChildCount()==1?n.getParent().remove():n.remove())}function g(n){var t=n.getBogus();t&&t.remove(),n.trim()}function s(n,t){var r=new i.range(n.getDocument());r["moveToElementEdit"+(t?"End":"Start")](n)||(r.selectNodeContents(n),r.collapse(t?!1:!0)),r.select(!0)}function c(n){for(var s=n.$.rows,t=-1,i=[],u,e,o,c,l,f,h,r=0;r<s.length;r++)for(t++,i[t]||(i[t]=[]),u=-1,e=0;e<s[r].cells.length;e++){for(o=s[r].cells[e],u++;i[t][u];)u++;for(c=isNaN(o.colSpan)?1:o.colSpan,l=isNaN(o.rowSpan)?1:o.rowSpan,f=0;f<l;f++)for(i[t+f]||(i[t+f]=[]),h=0;h<c;h++)i[t+f][u+h]=s[r].cells[e];u+=c-1}return i}function r(n,t,i){var u=n[t],r;if(typeof i=="undefined")return u;for(r=0;u&&r<u.length;r++){if(i.is&&u[r]==i.$)return r;if(r==i)return new o(u[r])}return i.is?-1:null}function nt(n,t,i){for(var f=[],u,r=0;r<n.length;r++)if(u=n[r],typeof i=="undefined")f.push(u[t]);else{if(i.is&&u[t]==i.$)return r;if(r==i)return new o(u[t])}return typeof i=="undefined"?f:i.is?-1:null}function e(n,f,e){var a=t(n),it,k,l,tt,ut,ft,et;if((f?a.length!=1:a.length<2)||(it=n.getCommonAncestor())&&it.type==1&&it.is("table"))return!1;var h,s=a[0],ot=s.getAscendant("table"),y=c(ot),at=y.length,vt=y[0].length,v=s.getParent().$.rowIndex,b=r(y,v,s);if(f){try{k=y[f=="up"?v-1:f=="down"?v+1:v][f=="left"?b-1:f=="right"?b+1:b]}catch(bt){return!1}if(!k||s.$==k)return!1;a[f=="up"||f=="left"?"unshift":"push"](new o(k))}var yt=s.getDocument(),st=v,p=0,w=0,d=!e&&new i.documentFragment(yt),ht=0;for(l=0;l<a.length;l++){h=a[l];var pt=h.getParent(),rt=h.getFirst(),ct=h.$.colSpan,lt=h.$.rowSpan,nt=pt.$.rowIndex,wt=r(y,nt,h);ht+=ct*lt,w=Math.max(w,wt-b+ct),p=Math.max(p,nt-v+lt),e||((g(h),h.getChildren().count())&&(nt==st||!rt||rt.isBlockBoundary&&rt.isBlockBoundary({br:1})||(tt=d.getLast(i.walker.whitespaces(!0)),!tt||tt.is&&tt.is("br")||d.append(new o("br"))),h.moveChildren(d)),l?h.remove():h.setHtml("")),st=nt}if(e)return p*w==ht;for(d.moveChildren(s),u||s.appendBogus(),w>=vt?s.removeAttribute("rowSpan"):s.$.rowSpan=p,p>=at?s.removeAttribute("colSpan"):s.$.colSpan=w,ut=new i.nodeList(ot.$.rows),ft=ut.count(),l=ft-1;l>=0;l--)if(et=ut.getItem(l),!et.$.cells.length){et.remove(),ft++;continue}return s}function b(n,i){var tt=t(n),s,g,l,a,nt,p;if(tt.length>1)return!1;if(i)return!0;var e=tt[0],v=e.getParent(),it=v.getAscendant("table"),w=c(it),b=v.$.rowIndex,rt=r(w,b,e),k=e.$.rowSpan,f,h,y,d;if(k>1){for(h=Math.ceil(k/2),y=Math.floor(k/2),d=b+h,s=new o(it.$.rows[d]),g=r(w,d),f=e.clone(),a=0;a<g.length;a++)if(l=g[a],l.parentNode==s.$&&a>rt){f.insertBefore(new o(l));break}else l=null;l||s.append(f,!0)}else for(y=h=1,s=v.clone(),s.insertAfter(v),s.append(f=e.clone()),nt=r(w,b),p=0;p<nt.length;p++)nt[p].rowSpan++;return u||f.appendBogus(),e.$.rowSpan=h,f.$.rowSpan=y,h==1&&e.removeAttribute("rowSpan"),y==1&&f.removeAttribute("rowSpan"),f}function k(n,i){var v=t(n),a,h;if(v.length>1)return!1;if(i)return!0;var f=v[0],y=f.getParent(),w=y.getAscendant("table"),p=c(w),b=y.$.rowIndex,k=r(p,b,f),l=f.$.colSpan,e,o,s;if(l>1)o=Math.ceil(l/2),s=Math.floor(l/2);else for(s=o=1,a=nt(p,k),h=0;h<a.length;h++)a[h].colSpan++;return e=f.clone(),e.insertAfter(f),u||e.appendBogus(),f.$.colSpan=o,e.$.colSpan=s,o==1&&f.removeAttribute("colSpan"),s==1&&e.removeAttribute("colSpan"),e}var l=/^(?:td|th)$/,tt={thead:1,tbody:1,tfoot:1,td:1,tr:1,th:1};f.tabletools={init:function(i){var r=i.lang.table;i.addCommand("cellProperties",new n.dialogCommand("cellProperties")),n.dialog.add("cellProperties",this.path+"dialogs/tableCell.js"),i.addCommand("tableDelete",{exec:function(n){var t=n.getSelection(),u=t&&t.getStartElement(),i=u&&u.getAscendant("table",!0),r;i&&(t.selectElement(i),r=t.getRanges()[0],r.collapse(),t.selectRanges([r]),i.getParent().getChildCount()==1?i.getParent().remove():i.remove())}}),i.addCommand("rowDelete",{exec:function(n){var t=n.getSelection();h(t)}}),i.addCommand("rowInsertBefore",{exec:function(n){var t=n.getSelection();a(t,!0)}}),i.addCommand("rowInsertAfter",{exec:function(n){var t=n.getSelection();a(t)}}),i.addCommand("columnDelete",{exec:function(n){var t=n.getSelection();y(t)}}),i.addCommand("columnInsertBefore",{exec:function(n){var t=n.getSelection();v(t,!0)}}),i.addCommand("columnInsertAfter",{exec:function(n){var t=n.getSelection();v(t)}}),i.addCommand("cellDelete",{exec:function(n){var t=n.getSelection();w(t)}}),i.addCommand("cellMerge",{exec:function(n){s(e(n.getSelection()),!0)}}),i.addCommand("cellMergeRight",{exec:function(n){s(e(n.getSelection(),"right"),!0)}}),i.addCommand("cellMergeDown",{exec:function(n){s(e(n.getSelection(),"down"),!0)}}),i.addCommand("cellVerticalSplit",{exec:function(n){s(b(n.getSelection()))}}),i.addCommand("cellHorizontalSplit",{exec:function(n){s(k(n.getSelection()))}}),i.addCommand("cellInsertBefore",{exec:function(n){var t=n.getSelection();p(t,!0)}}),i.addCommand("cellInsertAfter",{exec:function(n){var t=n.getSelection();p(t)}}),i.addMenuItems&&i.addMenuItems({tablecell:{label:r.cell.menu,group:"tablecell",order:1,getItems:function(){var n=i.getSelection(),r=t(n);return{tablecell_insertBefore:2,tablecell_insertAfter:2,tablecell_delete:2,tablecell_merge:e(n,null,!0)?2:0,tablecell_merge_right:e(n,"right",!0)?2:0,tablecell_merge_down:e(n,"down",!0)?2:0,tablecell_split_vertical:b(n,!0)?2:0,tablecell_split_horizontal:k(n,!0)?2:0,tablecell_properties:r.length>0?2:0}}},tablecell_insertBefore:{label:r.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:r.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:r.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:r.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:r.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:r.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:r.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:r.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:r.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:r.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:2,tablerow_insertAfter:2,tablerow_delete:2}}},tablerow_insertBefore:{label:r.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:r.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:r.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:r.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:2,tablecolumn_insertAfter:2,tablecolumn_delete:2}}},tablecolumn_insertBefore:{label:r.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:r.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:r.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}}),i.contextMenu&&i.contextMenu.addListener(function(n){if(!n)return null;while(n){if(n.getName()in tt)return{tablecell:2,tablerow:2,tablecolumn:2};n=n.getParent()}return null})},getSelectedCells:t},f.add("tabletools",f.tabletools)}(),f.add("specialchar",{init:function(t){var i="specialchar";n.dialog.add(i,this.path+"dialogs/specialchar.js"),t.addCommand(i,new n.dialogCommand(i)),t.ui.addButton("SpecialChar",{label:t.lang.specialChar.toolbar,command:i})}}),function(){var n={exec:function(n){n.container.focusNext(!0)}},t={exec:function(n){n.container.focusPrevious(!0)}};f.add("tab",{requires:["keystrokes"],init:function(i){var u=i.keystrokeHandler.keystrokes,f,r;for(u[9]="tab",u[2009]="shiftTab",f=i.config.tabSpaces,r="";f--;)r+="";i.addCommand("tab",{exec:function(n){if(!n.fire("tab"))if(r.length>0)n.insertHtml(r);else return n.execCommand("blur");return!0}}),i.addCommand("shiftTab",{exec:function(n){return n.fire("shiftTab")?!0:n.execCommand("blurBack")}}),i.addCommand("blur",n),i.addCommand("blurBack",t)}})}(),o.prototype.focusNext=function(n){var u=this,h=u.$,o=u.getTabIndex(),f,s,i,e,t,r;if(o<=0)for(t=u.getNextSourceNode(n,1);t;){if(t.isVisible()&&t.getTabIndex()===0){i=t;break}t=t.getNextSourceNode(!1,1)}else for(t=u.getDocument().getBody().getFirst();t=t.getNextSourceNode(!1,1);){if(!f)if(!s&&t.equals(u)){if(s=!0,n){if(!(t=t.getNextSourceNode(!0,1)))break;f=1}}else s&&!u.contains(t)&&(f=1);if(t.isVisible()&&!((r=t.getTabIndex())<0)){if(f&&r==o){i=t;break}r>o&&(!i||!e||r<e)?(i=t,e=r):i||r!==0||(i=t,e=r)}}i&&i.focus()},o.prototype.focusPrevious=function(n){for(var u=this,h=u.$,o=u.getTabIndex(),f,s,r,e=0,i,t=u.getDocument().getBody().getLast();t=t.getPreviousSourceNode(!1,1);){if(!f)if(!s&&t.equals(u)){if(s=!0,n){if(!(t=t.getPreviousSourceNode(!0,1)))break;f=1}}else s&&!u.contains(t)&&(f=1);if(t.isVisible()&&!((i=t.getTabIndex())<0))if(o<=0){if(f&&i===0){r=t;break}i>e&&(r=t,e=i)}else{if(f&&i==o){r=t;break}i<o&&(!r||i>e)&&(r=t,e=i)}}r&&r.focus()},s.tabSpaces=0,function(){f.add("templates",{requires:["dialog"],init:function(t){n.dialog.add("templates",n.getUrl(this.path+"dialogs/templates.js")),t.addCommand("templates",new n.dialogCommand("templates")),t.ui.addButton("Templates",{label:t.lang.templates.button,command:"templates"})}});var t={},i={};n.addTemplates=function(n,i){t[n]=i},n.getTemplates=function(n){return t[n]},n.loadTemplates=function(t,r){for(var f=[],u=0;u<t.length;u++)i[t[u]]||(f.push(t[u]),i[t[u]]=1);f.length>0?n.scriptLoader.load(f,r):setTimeout(r,0)}}(),s.templates="default",s.templates_files=[n.getUrl("plugins/templates/templates/default.js")],s.templates_replaceContent=!0,function(){var i=function(){this.toolbars=[],this.focusCommandExecuted=!1},r;i.prototype.focus=function(){for(var i,r,n,t=0;i=this.toolbars[t++];)for(r=0;n=i.items[r++];)if(n.focus){n.focus();return}},r={toolbarFocus:{modes:{wysiwyg:1,source:1},exec:function(n){n.toolbox&&(n.toolbox.focusCommandExecuted=!0,u?setTimeout(function(){n.toolbox.focus()},100):n.toolbox.focus())}}},f.add("toolbar",{init:function(u){var f=function(n,t){switch(t){case 39:case 9:while((n=n.next||n.toolbar.next&&n.toolbar.next.items[0])&&!n.focus);return n?n.focus():u.toolbox.focus(),!1;case 37:case 2009:while((n=n.previous||n.toolbar.previous&&n.toolbar.previous.items[n.toolbar.previous.items.length-1])&&!n.focus);if(n)n.focus();else{var i=u.toolbox.toolbars[u.toolbox.toolbars.length-1].items;i[i.length-1].focus()}return!1;case 27:return u.focus(),!1;case 13:case 32:return n.execute(),!1}return!0};u.on("themeSpace",function(r){var o,v,s,b,k,y,a,d,h,l,p,w,g,c,tt,nt;if(r.data.space==u.config.toolbarLocation){for(u.toolbox=new i,o=['<div class="cke_toolbox"'],v=u.config.toolbarStartupExpanded!==!1,o.push(v?">":' style="display:none">'),b=u.toolbox.toolbars,k=u.config.toolbar instanceof Array?u.config.toolbar:u.config["toolbar_"+u.config.toolbar],y=0;y<k.length;y++)if(a=k[y],a){if(d="cke_"+t.getNextNumber(),h={id:d,items:[]},s&&(o.push("<\/div>"),s=0),a==="/"){o.push('<div class="cke_break"><\/div>');continue}for(o.push('<span id="',d,'" class="cke_toolbar"><span class="cke_toolbar_start"><\/span>'),l=b.push(h)-1,l>0&&(h.previous=b[l-1],h.previous.next=h),p=0;p<a.length;p++)g=a[p],w=g=="-"?e.separator:u.ui.create(g),w&&(w.canGroup?s||(o.push('<span class="cke_toolgroup">'),s=1):s&&(o.push("<\/span>"),s=0),c=w.render(u,o),l=h.items.push(c)-1,l>0&&(c.previous=h.items[l-1],c.previous.next=c),c.toolbar=h,c.onkey=f,c.onfocus=function(){u.toolbox.focusCommandExecuted||u.focus()});s&&(o.push("<\/span>"),s=0),o.push('<span class="cke_toolbar_end"><\/span><\/span>')}o.push("<\/div>"),u.config.toolbarCanCollapse&&(tt=t.addFunction(function(){u.execCommand("toolbarCollapse")}),nt="cke_"+t.getNextNumber(),u.addCommand("toolbarCollapse",{exec:function(t){var i=n.document.getById(nt),r=i.getPrevious(),u=t.getThemeSpace("contents"),f=r.getParent(),o=parseInt(u.$.style.height,10),s=f.$.offsetHeight,e;r.isVisible()?(r.hide(),i.addClass("cke_toolbox_collapser_min"),i.setAttribute("title",t.lang.toolbarExpand)):(r.show(),i.removeClass("cke_toolbox_collapser_min"),i.setAttribute("title",t.lang.toolbarCollapse)),e=f.$.offsetHeight-s,u.setStyle("height",o-e+"px")},modes:{wysiwyg:1,source:1}}),o.push('<a title="'+(v?u.lang.toolbarCollapse:u.lang.toolbarExpand)+'" id="'+nt+'" class="cke_toolbox_collapser'),v||o.push(" cke_toolbox_collapser_min"),o.push('" onclick="CKEDITOR.tools.callFunction('+tt+')"><\/a>')),r.data.html+=o.join("")}});u.addCommand("toolbarFocus",r.toolbarFocus)}})}(),e.separator={render:function(n,t){return t.push('<span class="cke_separator"><\/span>'),{}}},s.toolbarLocation="top",s.toolbar_Basic=[["Bold","Italic","-","NumberedList","BulletedList","-","Link","Unlink","-","About"]],s.toolbar_Full=[["Source","-","Save","NewPage","Preview","-","Templates"],["Cut","Copy","Paste","PasteText","PasteFromWord","-","Print","SpellChecker","Scayt"],["Undo","Redo","-","Find","Replace","-","SelectAll","RemoveFormat"],["Form","Checkbox","Radio","TextField","Textarea","Select","Button","ImageButton","HiddenField"],"/",["Bold","Italic","Underline","Strike","-","Subscript","Superscript"],["NumberedList","BulletedList","-","Outdent","Indent","Blockquote","CreateDiv"],["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"],["Link","Unlink","Anchor"],["Image","Flash","Table","HorizontalRule","Smiley","SpecialChar","PageBreak"],"/",["Styles","Format","Font","FontSize"],["TextColor","BGColor"],["Maximize","ShowBlocks","-","About"]],s.toolbar="Full",s.toolbarCanCollapse=!0,function(){function n(n){var t=this,i=n.getSelection();t.contents=n.getSnapshot(),t.bookmarks=i&&i.createBookmarks2(!0),u&&(t.contents=t.contents.replace(/\s+_cke_expando=".*?"/g,""))}function e(n){this.editor=n,this.reset()}var i;f.add("undo",{requires:["selection","wysiwygarea"],init:function(n){function i(n){t.enabled&&n.data.command.canUndo!==!1&&t.save()}var t=new e(n),r=n.addCommand("undo",{exec:function(){t.undo()&&(n.selectionChange(),this.fire("afterUndo"))},state:0,canUndo:!1}),u=n.addCommand("redo",{exec:function(){t.redo()&&(n.selectionChange(),this.fire("afterRedo"))},state:0,canUndo:!1});t.onChange=function(){r.setState(t.undoable()?2:0),u.setState(t.redoable()?2:0)};n.on("beforeCommandExec",i);n.on("afterCommandExec",i);n.on("saveSnapshot",function(){t.save()});n.on("contentDom",function(){n.document.on("keydown",function(n){n.data.$.ctrlKey||n.data.$.metaKey||t.type(n)})});n.on("beforeModeUnload",function(){n.mode=="wysiwyg"&&t.save(!0)});n.on("mode",function(){t.enabled=n.mode=="wysiwyg",t.onChange()});n.ui.addButton("Undo",{label:n.lang.undo,command:"undo"}),n.ui.addButton("Redo",{label:n.lang.redo,command:"redo"}),n.resetUndo=function(){t.reset(),n.fire("saveSnapshot")}}}),i=/\b(?:href|src|name)="[^"]*?"/gi,n.prototype={equals:function(n,f){var l=this.contents,a=n.contents,e,o,s,h,c;if(u&&(r.ie7Compat||r.ie6Compat)&&(l=l.replace(i,""),a=a.replace(i,"")),l!=a)return!1;if(f)return!0;if(e=this.bookmarks,o=n.bookmarks,e||o){if(!e||!o||e.length!=o.length)return!1;for(s=0;s<e.length;s++)if(h=e[s],c=o[s],h.startOffset!=c.startOffset||h.endOffset!=c.endOffset||!t.arrayCompare(h.start,c.start)||!t.arrayCompare(h.end,c.end))return!1}return!0}};var o={8:1,46:1},h={16:1,17:1,18:1},s={37:1,38:1,39:1,40:1};e.prototype={type:function(i){var r=i&&i.data.getKey(),l=r in h,f=r in o,a=this.lastKeystroke in o,v=f&&r==this.lastKeystroke,c=r in s,y=this.lastKeystroke in s,p=!f&&!c,w=f&&!v,b=!(l||this.typing)||p&&(a||y),e;(b||w)&&(e=new n(this.editor),t.setTimeout(function(){var n=this,t=n.editor.getSnapshot();u&&(t=t.replace(/\s+_cke_expando=".*?"/g,"")),e.contents!=t&&(n.typing=!0,n.save(!1,e,!1)||n.snapshots.splice(n.index+1,n.snapshots.length-n.index-1),n.hasUndo=!0,n.hasRedo=!1,n.typesCount=1,n.modifiersCount=1,n.onChange())},0,this)),this.lastKeystroke=r,f?(this.typesCount=0,this.modifiersCount++,this.modifiersCount>25&&(this.save(!1,null,!1),this.modifiersCount=1)):c||(this.modifiersCount=0,this.typesCount++,this.typesCount>25&&(this.save(!1,null,!1),this.typesCount=1))},reset:function(){var n=this;n.lastKeystroke=0,n.snapshots=[],n.index=-1,n.limit=n.editor.config.undoStackSize,n.currentImage=null,n.hasUndo=!1,n.hasRedo=!1,n.resetType()},resetType:function(){var n=this;n.typing=!1,delete n.lastKeystroke,n.typesCount=0,n.modifiersCount=0},fireChange:function(){var n=this;n.hasUndo=!!n.getNextImage(!0),n.hasRedo=!!n.getNextImage(!1),n.resetType(),n.onChange()},save:function(t,i,r){var u=this,f=u.snapshots;return(i||(i=new n(u.editor)),u.currentImage&&i.equals(u.currentImage,t))?!1:(f.splice(u.index+1,f.length-u.index-1),f.length==u.limit&&f.shift(),u.index=f.push(i)-1,u.currentImage=i,r!==!1&&u.fireChange(),!0)},restoreImage:function(n){var t=this,i;t.editor.loadSnapshot(n.contents),n.bookmarks?t.editor.getSelection().selectBookmarks(n.bookmarks):u&&(i=t.editor.document.getBody().$.createTextRange(),i.collapse(!0),i.select()),t.index=n.index,t.currentImage=n,t.fireChange()},getNextImage:function(n){var r=this,u=r.snapshots,f=r.currentImage,i,t;if(f)if(n){for(t=r.index-1;t>=0;t--)if(i=u[t],!f.equals(i,!0))return i.index=t,i}else for(t=r.index+1;t<u.length;t++)if(i=u[t],!f.equals(i,!0))return i.index=t,i;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){var n=this,t;return n.undoable()&&(n.save(!0),t=n.getNextImage(!0),t)?(n.restoreImage(t),!0):!1},redo:function(){var n=this,t;return n.redoable()&&(n.save(!0),n.redoable()&&(t=n.getNextImage(!1),t))?(n.restoreImage(t),!0):!1}}}(),s.undoStackSize=20,function(){function y(n){var r,i,e,f;this.mode=="wysiwyg"&&(this.focus(),this.fire("saveSnapshot"),r=this.getSelection(),i=n.data,this.dataProcessor&&(i=this.dataProcessor.toHtml(i)),u?(e=r.isLocked,e&&r.unlock(),f=r.getNative(),f.type=="Control"&&f.clear(),f.createRange().pasteHTML(i),e&&this.getSelection().lock()):this.document.$.execCommand("inserthtml",!1,i),t.setTimeout(function(){this.fire("saveSnapshot")},0,this))}function p(n){var i,c,e,u,r,l,o;if(this.mode=="wysiwyg"){this.focus(),this.fire("saveSnapshot");var s=n.data,a=s.getName(),p=h.$block[a],f=this.getSelection(),v=f.getRanges(),y=f.isLocked;for(y&&f.unlock(),u=v.length-1;u>=0;u--){if(i=v[u],i.deleteContents(),c=!u&&s||s.clone(!0),p)while((r=i.getCommonAncestor(!1,!0))&&(l=h[r.getName()])&&!(l&&l[a]))r.getName()in h.span?i.splitElement(r):i.checkStartOfBlock()&&i.checkEndOfBlock()?(i.setStartBefore(r),i.collapse(!0),r.remove()):i.splitBlock();i.insertNode(c),e||(e=c)}i.moveToPosition(e,4),o=e.getNextSourceNode(!0),o&&o.type==1&&i.moveToElementEditStart(o),f.selectRanges([i]),y&&this.getSelection().lock(),t.setTimeout(function(){this.fire("saveSnapshot")},0,this)}}function v(n){n.checkDirty()||setTimeout(function(){n.resetDirty()})}function b(n){return s(n)&&w(n)}function k(n){return n.type==3&&t.trim(n.getText()).match(/^(?:&nbsp;|\xa0)$/)}function d(n){var t=n.editor,p=n.data.path,w=p.blockLimit,d=n.data.selection,f=d.getRanges()[0],y=t.document.getBody(),g=t.config.enterMode,r,c,o,h,l;g!=2&&f.collapsed&&w.getName()=="body"&&!p.block&&(v(t),r=f.fixBlock(!0,t.config.enterMode==3?"div":"p"),u&&(c=r.getFirst(b),c&&k(c)&&c.remove()),r.getOuterHtml().match(a)&&(o=r.getPrevious(s),h=r.getNext(s),(o&&o.getName&&!(o.getName()in e)&&f.moveToElementEditStart(o)||h&&h.getName&&!(h.getName()in e)&&f.moveToElementEditStart(h))&&r.remove()),f.select(),u||t.selectionChange()),l=y.getLast(i.walker.whitespaces(!0)),l&&l.getName&&l.getName()in e&&(v(t),u?y.append(t.document.createText("")):y.appendBogus())}var e={table:1,pre:1},a=/\s*<(p|div|address|h\d|center)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\1>)?\s*(?=$|<\/body>)/gi,s=i.walker.whitespaces(!0),w=i.walker.bookmark(!1,!0),l;f.add("wysiwygarea",{requires:["editingblock"],init:function(f){var s=f.config.enterMode!=2?f.config.enterMode==3?"div":"p":!1,e;f.on("editingBlockReady",function(){var l,v,h,b,w,k,g,nt=r.isCustomDomain(),tt=function(i){h&&h.remove(),v&&v.remove(),k=0,h=o.createFromHtml('<iframe style="width:100%;height:100%" frameBorder="0"'+(nt?" src=\"javascript:void((function(){document.open();document.domain='"+document.domain+"';document.close();})())\"":"")+' tabIndex="-1" allowTransparency="true"><\/iframe>');h.on("load",function(n){n.removeListener();var t=h.getFrameDocument().$;t.open(),nt&&(t.domain=document.domain),t.write(i),t.close()});var e=f.lang.editorTitle.replace("%1",f.name);r.gecko?(l.setAttributes({role:"region",title:e}),h.setAttributes({role:"region",title:" "})):r.webkit?(h.setAttribute("title",e),h.setAttribute("name",e)):u&&(v=o.createFromHtml('<fieldset style="height:100%'+(u&&r.quirks?";position:relative":"")+'"><legend style="display:block;width:0;height:0;overflow:hidden;'+(u&&r.quirks?"position:absolute":"")+'">'+t.htmlEncode(e)+"<\/legend><\/fieldset>",n.document),h.appendTo(v),v.appendTo(l)),u||l.append(h)},it='<script id="cke_actscrpt" type="text/javascript">window.parent.CKEDITOR._["contentDomReady'+f.name+'"]( window );<\/script>',rt=function(t){var h,l,a,y;if(!k){k=1;var o=t.document,s=o.body,v=o.getElementById("cke_actscrpt");v.parentNode.removeChild(v),delete n._["contentDomReady"+f.name],s.spellcheck=!f.config.disableNativeSpellChecker,u?(s.hideFocus=!0,s.disabled=!0,s.contentEditable=!0,s.removeAttribute("disabled")):o.designMode="on";try{o.execCommand("enableObjectResizing",!1,!f.config.disableObjectResizing)}catch(p){}try{o.execCommand("enableInlineTableEditing",!1,!f.config.disableNativeTableHandles)}catch(d){}if(t=f.window=new i.window(t),o=f.document=new c(o),!(u||r.opera))o.on("mousedown",function(n){var t=n.data.getTarget();t.is("img","hr","input","textarea","select")&&f.getSelection().selectElement(t)});if(r.webkit){o.on("click",function(n){n.data.getTarget().is("input","select")&&n.data.preventDefault()});o.on("mouseup",function(n){n.data.getTarget().is("input","textarea")&&n.data.preventDefault()})}if(u&&o.$.compatMode=="CSS1Compat"){h=o.getDocumentElement();h.on("mousedown",function(n){n.data.getTarget().equals(h)&&e.focus()})}l=u||r.webkit?t:o;l.on("blur",function(){f.focusManager.blur()});l.on("focus",function(){var n,i,u;if(r.gecko){for(n=s;n.firstChild;)n=n.firstChild;!n.nextSibling&&"BR"==n.tagName&&n.hasAttribute("_moz_editor_bogus_node")&&(i=o.$.createEvent("KeyEvents"),i.initKeyEvent("keypress",!0,!0,t.$,!1,!1,!1,!1,0,32),o.$.dispatchEvent(i),u=o.getBody().getFirst(),f.config.enterMode==2?o.createElement("br",{attributes:{_moz_dirty:""}}).replace(u):u.remove())}f.focusManager.focus()});if(a=f.keystrokeHandler,a&&a.attach(o),u){o.on("keydown",function(n){var t=n.data.getKeystroke()==8&&f.getSelection().getSelectedElement();t&&(f.fire("saveSnapshot"),t.remove(),f.fire("saveSnapshot"),n.cancel())});if(o.$.compatMode=="CSS1Compat"){y={33:1,34:1};o.on("keydown",function(n){n.data.getKeystroke()in y&&setTimeout(function(){f.getSelection().scrollIntoView()},0)})}}f.contextMenu&&f.contextMenu.addTarget(o,f.config.browserContextMenuOnCtrl!==!1),setTimeout(function(){f.fire("contentDom"),g&&(f.mode="wysiwyg",f.fire("mode"),g=!1),b=!1,w&&(f.focus(),w=!1),setTimeout(function(){f.fire("dataReady")},0),u&&setTimeout(function(){if(f.document){var n=f.document.$.body;n.runtimeStyle.marginBottom="0px",n.runtimeStyle.marginBottom=""}},1e3)},0)}};f.addMode("wysiwyg",{load:function(n,t,i){l=n,u&&r.quirks&&n.setStyle("position","relative"),f.mayBeDirty=!0,g=!0,i?this.loadSnapshotData(t):this.loadData(t)},loadData:function(i){var e;b=!0;var r=f.config,o=r.fullPage,h=r.docType,u='<style type="text/css" cke_temp="1">'+f._.styles.join("\n")+"<\/style>";o||(u=t.buildStyleHtml(f.config.contentsCss)+u),e=r.baseHref?'<base href="'+r.baseHref+'" cke_temp="1" />':"",o&&(i=i.replace(/<!DOCTYPE[^>]*>/i,function(n){return f.docType=h=n,""})),f.dataProcessor&&(i=f.dataProcessor.toHtml(i,s)),o?(/<body[\s|>]/.test(i)||(i="<body>"+i),/<html[\s|>]/.test(i)||(i="<html>"+i+"<\/html>"),/<head[\s|>]/.test(i)||(i=i.replace(/<html[^>]*>/,"$&<head><title><\/title><\/head>")),e&&(i=i.replace(/<head>/,"$&"+e)),i=i.replace(/<\/head\s*>/,u+"$&"),i=h+i):i=r.docType+'<html dir="'+r.contentsLangDirection+'"><head>'+e+u+"<\/head><body"+(r.bodyId?' id="'+r.bodyId+'"':"")+(r.bodyClass?' class="'+r.bodyClass+'"':"")+">"+i+"<\/html>",i+=it,n._["contentDomReady"+f.name]=rt,tt(i)},getData:function(){var t=f.config,i=t.fullPage,r=i&&f.docType,u=h.getFrameDocument(),n=i?u.getDocumentElement().getOuterHtml():u.getBody().getHtml();return f.dataProcessor&&(n=f.dataProcessor.toDataFormat(n,s)),t.ignoreEmptyParagraph&&(n=n.replace(a,"")),r&&(n=r+"\n"+n),n},getSnapshotData:function(){return h.getFrameDocument().getBody().getHtml()},loadSnapshotData:function(n){h.getFrameDocument().getBody().setHtml(n)},unload:function(){f.window=f.document=h=l=w=null,f.fire("contentDomUnload")},focus:function(){var n,t;if(b)w=!0;else if(f.window){if(f.window.focus(),u)try{n=f.getSelection(),n=n&&n.getNative(),t=n&&n.type&&n.createRange(),t&&(n.empty(),t.select())}catch(i){}f.selectionChange()}}});f.on("insertHtml",y,null,null,20);f.on("insertElement",p,null,null,20);f.on("selectionChange",d,null,null,1)});if(u)f.on("uiReady",function(){e=f.container.append(o.createFromHtml('<input tabindex="-1" style="position:absolute; left:-10000">'));e.on("focus",function(){f.focus()})})}}),r.gecko&&(l=window.top,function(){var i=l.document.body;i?i.setAttribute("onpageshow",i.getAttribute("onpageshow")+";event.persisted && CKEDITOR.tools.callFunction("+t.addFunction(function(){var i=n.instances,r,t,u;for(u in i)r=i[u],t=r.document,t&&(t.$.designMode="off",t.$.designMode="on")})+")"):l.addEventListener("load",arguments.callee,!1)}())}(),s.disableObjectResizing=!1,s.disableNativeTableHandles=!0,s.disableNativeSpellChecker=!0,s.ignoreEmptyParagraph=!0,f.add("wsc",{init:function(t){var i="checkspell",u=t.addCommand(i,new n.dialogCommand(i));u.modes={wysiwyg:!r.opera&&document.domain==window.location.hostname},t.ui.addButton("SpellChecker",{label:t.lang.spellCheck.toolbar,command:i}),n.dialog.add(i,this.path+"dialogs/wsc.js")}}),s.wsc_customerId=s.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk",s.wsc_customLoaderScript=s.wsc_customLoaderScript||null,f.add("styles",{requires:["selection"]}),n.editor.prototype.attachStyleStateChange=function(n,t){var i=this._.styleStateChangeCallbacks;if(!i){i=this._.styleStateChangeCallbacks=[];this.on("selectionChange",function(n){for(var t,u,r=0;r<i.length;r++)t=i[r],u=t.style.checkActive(n.data.path)?1:2,t.state!==u&&(t.fn.call(this,u),t.state!==u)})}i.push({style:n,fn:t})},n.STYLE_BLOCK=1,n.STYLE_INLINE=2,n.STYLE_OBJECT=3,function(){function tt(n){var y=this,p=n.document,it,k,d,t,o,ut,l,w,a,ft,v,g,e,s,nt,tt;if(n.collapsed){it=c(y,p),n.insertNode(it),n.moveToPosition(it,2);return}var rt=y.element,et=y._.definition,ot,st=h[rt]||(ot=!0,h.span),lt=n.createBookmark();n.enlarge(1),n.trim();var ct=n.getBoundaryNodes(),b=ct.startNode,r=ct.endNode.getNextSourceNode(!0);for(r||(r=k=p.createText(""),r.insertAfter(n.endContainer)),d=r.getParent(),d&&d.getAttribute("_fck_bookmark")&&(r=d),r.equals(b)&&(r=r.getNextSourceNode(!0),r||(r=k=p.createText(""),r.insertAfter(b))),t=b;t;){if(l=!1,t.equals(r))t=null,l=!0;else{if(w=t.type,a=w==1?t.getName():null,a&&t.getAttribute("_fck_bookmark")){t=t.getNextSourceNode(!0);continue}if(!a||st[a]&&(t.getPosition(r)|12)==12)if(ft=t.getParent(),ft&&((ft.getDtd()||h.span)[rt]||ot)){if(o||a&&h.$removeEmpty[a]&&(t.getPosition(r)|12)!=12||(o=new i.range(p),o.setStartBefore(t)),w==3||w==1&&!t.getChildCount()){for(v=t;!v.$.nextSibling&&(g=v.getParent(),st[g.getName()])&&(g.getPosition(b)|10)==10;)v=g;o.setEndAfter(v),v.$.nextSibling||(l=!0),ut||(ut=w!=3||/[^\s\ufeff]/.test(t.getText()))}}else l=!0;else l=!0;t=t.getNextSourceNode()}if(l&&ut&&o&&!o.collapsed){for(e=c(y,p),s=o.getCommonAncestor();e&&s;){if(s.getName()==rt){for(nt in et.attributes)e.getAttribute(nt)==s.getAttribute(nt)&&e.removeAttribute(nt);for(tt in et.styles)e.getStyle(tt)==s.getStyle(tt)&&e.removeStyle(tt);if(!e.hasAttributes()){e=null;break}}s=s.getParent()}e&&(o.extractContents().appendTo(e),ht(y,e),o.insertNode(e),f(e),u||e.$.normalize()),o=null}}k&&k.remove(),n.moveToBookmark(lt)}function it(n){var y,u,c,l,o,r,b,k,p,h,w,d,t,v;if(n.enlarge(1),y=n.createBookmark(),u=y.startNode,n.collapsed){for(c=new i.elementPath(u.getParent()),o=0;o<c.elements.length&&(r=c.elements[o]);o++){if(r==c.block||r==c.blockLimit)break;this.checkElementRemovable(r)&&(b=n.checkBoundaryOfElement(r,2),k=!b&&n.checkBoundaryOfElement(r,1),k||b?(l=r,l.match=k?"start":"end"):(f(r),s(this,r)))}if(l){for(p=u,o=0;;o++){if(h=c.elements[o],h.equals(l))break;else if(h.match)continue;else h=h.clone();h.append(p),p=h}p[l.match=="start"?"insertBefore":"insertAfter"](l)}}else{w=y.endNode,d=this;function n(){for(var r=new i.elementPath(u.getParent()),f=new i.elementPath(w.getParent()),e=null,o=null,n,t=0;t<r.elements.length;t++){if(n=r.elements[t],n==r.block||n==r.blockLimit)break;d.checkElementRemovable(n)&&(e=n)}for(t=0;t<f.elements.length;t++){if(n=f.elements[t],n==f.block||n==f.blockLimit)break;d.checkElementRemovable(n)&&(o=n)}o&&w.breakParent(o),e&&u.breakParent(e)}for(n(),t=u.getNext();!t.equals(w);)v=t.getNextSourceNode(),t.type==1&&this.checkElementRemovable(t)&&(t.getName()==this.element?s(this,t):a(t,e(this)[t.getName()]),v.type==1&&v.contains(u)&&(n(),v=u.getNext())),t=v}n.moveToBookmark(y)}function rt(n){var f=n.createBookmark(!0),t=n.createIterator(),i,r,u;for(t.enforceRealBlocks=!0,r=n.document;i=t.getNextParagraph();)u=c(this,r),ut(i,u);n.moveToBookmark(f)}function ut(n,t){var i=t.is("pre"),r=n.is("pre"),u=i&&!r,f=!i&&r;u?t=st(n,t):f?t=ot(et(n),t):n.moveChildren(t),t.replace(n),i&&ft(t)}function ft(n){var t,i;(t=n.getPreviousSourceNode(!0,1))&&t.is&&t.is("pre")&&(i=r(t.getHtml(),/\n$/,"")+"\n\n"+r(n.getHtml(),/^\n/,""),u?n.$.outerHTML="<pre>"+i+"<\/pre>":n.setHtml(i),t.remove())}function et(n){var u=n.getName(),i=r(n.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+_fck_bookmark.*?\/span>))*\n(?!$)/gi,function(n,t,i){return t+"<\/pre>"+i+"<pre>"}),t=[];return i.replace(/<pre>([\s\S]*?)<\/pre>/gi,function(n,i){t.push(i)}),t}function r(n,t,i){var r="",u="";return n=n.replace(/(^<span[^>]+_fck_bookmark.*?\/span>)|(<span[^>]+_fck_bookmark.*?\/span>$)/gi,function(n,t,i){return t&&(r=t),i&&(u=i),""}),r+n.replace(t,i)+u}function ot(n,u){for(var s=new i.documentFragment(u.getDocument()),f,o,e=0;e<n.length;e++)f=n[e],f=f.replace(/(\r\n|\r)/g,"\n"),f=r(f,/^[ \t]*\n/,""),f=r(f,/\n$/,""),f=r(f,/^[ \t]+|[ \t]+$/g,function(n,i){return n.length==1?"&nbsp;":i?" "+t.repeat("&nbsp;",n.length-1):t.repeat("&nbsp;",n.length-1)+" "}),f=f.replace(/\n/g,"<br>"),f=f.replace(/[ \t]{2,}/g,function(n){return t.repeat("&nbsp;",n.length-1)+" "}),o=u.clone(),o.setHtml(f),s.append(o);return s}function st(n,t){var i=n.getHtml(),f;return i=r(i,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,""),i=i.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1"),i=i.replace(/([ \t\n\r]+|&nbsp;)/g," "),i=i.replace(/<br\b[^>]*>/gi,"\n"),u?(f=n.getDocument().createElement("div"),f.append(t),t.$.outerHTML="<pre>"+i+"<\/pre>",t=f.getFirst().remove()):t.setHtml(i),t}function s(n,t){function u(){for(var n in i)(n!="class"||t.getAttribute(n)==i[n])&&t.removeAttribute(n)}var r=n._.definition,i=r.attributes,o=r.styles,s=e(n),f;u();for(f in o)t.removeStyle(f);i=s[t.getName()],i&&u(),v(t)}function ht(n,t){for(var f=n._.definition,c=f.attributes,l=f.styles,o=e(n),r=t.getElementsByTag(n.element),u,h,i=r.count();--i>=0;)s(n,r.getItem(i));for(u in o)if(u!=n.element)for(r=t.getElementsByTag(u),i=r.count()-1;i>=0;i--)h=r.getItem(i),a(h,o[u])}function a(n,t){var u=t&&t.attributes,r,f,e,i;if(u)for(r=0;r<u.length;r++)f=u[r][0],(e=n.getAttribute(f))&&(i=u[r][1],(i===null||i.test&&i.test(e)||typeof i=="string"&&e==i)&&n.removeAttribute(f));v(n)}function v(n){if(!n.hasAttributes()){var t=n.getFirst(),i=n.getLast();n.remove(!0),t&&(f(t),i&&!t.equals(i)&&f(i))}}function f(n){n&&n.type==1&&h.$removeEmpty[n.getName()]&&(y(n,n.getNext(),!0),y(n,n.getPrevious()))}function y(n,t,i){var r,u;t&&t.type==1&&(r=t.getAttribute("_fck_bookmark"),r&&(t=i?t.getNext():t.getPrevious()),t&&t.type==1&&n.isIdentical(t)&&(u=i?n.getLast():n.getFirst(),r&&(i?t.getPrevious():t.getNext()).move(n,!i),t.moveChildren(n,!i),t.remove(),u&&f(u)))}function c(n,t){var r,u=n._.definition,i=n.element;return i=="*"&&(i="span"),r=new o(i,t),p(r,n)}function p(t,i){var f=i._.definition,r=f.attributes,e=n.style.getStyleText(f),u;if(r)for(u in r)t.setAttribute(u,r[u]);return e&&t.setAttribute("style",e),t}function b(n,t){for(var i in n)n[i]=n[i].replace(w,function(n,i){return t[i]})}function ct(t){var i=t._AC,r,u,f,e;if(i)return i;if(i={},r=0,u=t.attributes,u)for(f in u)r++,i[f]=u[f];return(e=n.style.getStyleText(t))&&(i.style||r++,i.style=e),i._length=r,t._AC=i}function e(n){var u,i,f,r,e,s,o,c,h;if(n._.overrides)return n._.overrides;if(u=n._.overrides={},i=n._.definition.overrides,i)for(t.isArray(i)||(i=[i]),f=0;f<i.length;f++)if(r=i[f],typeof r=="string"?e=r.toLowerCase():(e=r.element?r.element.toLowerCase():n.element,o=r.attributes),s=u[e]||(u[e]={}),o){c=s.attributes=s.attributes||[];for(h in o)c.push([h.toLowerCase(),o[h]])}return u}function k(n,t){var i,r;return t!==!1?(r=new o("span"),r.setAttribute("style",n),i=r.getAttribute("style")):i=n,i.replace(/\s*([;:])\s*/,"$1").replace(/([^\s;])$/,"$1;").replace(/,\s+/g,",").toLowerCase()}function d(n,t){for(var u=n.getSelection(),r=u.getRanges(),f=t?this.removeFromRange:this.applyToRange,i=0;i<r.length;i++)f.call(this,r[i]);u.selectRanges(r)}var g={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1},nt={a:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,ul:1},l=/\s*(?:;\s*|$)/,w;n.style=function(n,i){i&&(n=t.clone(n),b(n.attributes,i),b(n.styles,i));var r=this.element=(n.element||"*").toLowerCase();this.type=r=="#"||g[r]?1:nt[r]?3:2,this._={definition:n}},n.style.prototype={apply:function(n){d.call(this,n,!1)},remove:function(n){d.call(this,n,!0)},applyToRange:function(n){var t=this;return(t.applyToRange=t.type==2?tt:t.type==1?rt:null).call(t,n)},removeFromRange:function(n){return(this.removeFromRange=this.type==2?it:null).call(this,n)},applyToObject:function(n){p(n,this)},checkActive:function(n){var r,t,i;switch(this.type){case 1:return this.checkElementRemovable(n.block||n.blockLimit,!0);case 2:for(r=n.elements,t=0;t<r.length;t++)if((i=r[t],i!=n.block&&i!=n.blockLimit)&&this.checkElementRemovable(i,!0))return!0}return!1},checkElementRemovable:function(n,t){var c,i,r,s,h,u,o,f;if(!n)return!1;if(c=this._.definition,n.getName()==this.element){if(!t&&!n.hasAttributes())return!0;if(i=ct(c),i._length){for(r in i)if(r!="_length")if(s=n.getAttribute(r)||"",i[r]==(r=="style"?k(s,!1):s)){if(!t)return!0}else if(t)return!1;if(t)return!0}else return!0}if(h=e(this)[n.getName()],h){if(!(i=h.attributes))return!0;for(u=0;u<i.length;u++)if(r=i[u][0],o=n.getAttribute(r),o&&(f=i[u][1],f===null||typeof f=="string"&&o==f||f.test(o)))return!0}return!1}},n.style.getStyleText=function(n){var i=n._ST,t,r;if(i)return i;i=n.styles,t=n.attributes&&n.attributes.style||"",t.length&&(t=t.replace(l,";"));for(r in i)t+=(r+":"+i[r]).replace(l,";");return t.length&&(t=k(t)),n._ST=t},w=/#\((.+?)\)/g}(),n.styleCommand=function(n){this.style=n},n.styleCommand.prototype.exec=function(n){var t=this,i;return n.focus(),(i=n.document)&&(t.state==2?t.style.apply(i):t.state==1&&t.style.remove(i)),!!i},f.add("domiterator"),function(){function n(n){var t=this;arguments.length<1||(t.range=n,t.forceBrBreak=!1,t.enlargeBr=!0,t.enforceRealBlocks=!1,t._||(t._={}))}var f=/^[\r\n\t ]+$/,r=i.walker.bookmark();n.prototype={getNextParagraph:function(n){var e=this,h,o,l,tt,it,p,rt,c,k,ut,st,s,d,g,nt,b,ft,ct,et,v,ot,y;for(e._.lastNode||(o=e.range.clone(),o.enlarge(e.forceBrBreak||!e.enlargeBr?3:2),p=new i.walker(o),rt=i.walker.bookmark(!0,!0),p.evaluator=rt,e._.nextNode=p.next(),p=new i.walker(o),p.evaluator=rt,c=p.previous(),e._.lastNode=c.getNextSourceNode(!0),e._.lastNode&&e._.lastNode.type==3&&!t.trim(e._.lastNode.getText())&&e._.lastNode.getParent().isBlockBoundary()&&(k=new i.range(o.document),k.moveToPosition(e._.lastNode,4),k.checkEndOfBlock()&&(ut=new i.elementPath(k.endContainer),st=ut.block||ut.blockLimit,e._.lastNode=st.getNextSourceNode(!0))),e._.lastNode||(e._.lastNode=e._.docEndMarker=o.document.createText(""),e._.lastNode.insertAfter(c)),o=null),s=e._.nextNode,c=e._.lastNode,e._.nextNode=null;s;){var w=!1,a=s.type!=1,ht=!1;if(a)s.type==3&&f.test(s.getText())&&(a=!1);else if(d=s.getName(),s.isBlockBoundary(e.forceBrBreak&&{br:1})){if(d=="br")a=!0;else if(!o&&!s.getChildCount()&&d!="hr"){h=s,l=s.equals(c);break}o&&(o.setEndAt(s,3),d!="br"&&(e._.nextNode=s)),w=!0}else{if(s.getFirst()){o||(o=new i.range(e.range.document),o.setStartAt(s,3)),s=s.getFirst();continue}a=!0}if(a&&!o&&(o=new i.range(e.range.document),o.setStartAt(s,3)),l=(!w||a)&&s.equals(c),o&&!w)while(!s.getNext()&&!l){if(g=s.getParent(),g.isBlockBoundary(e.forceBrBreak&&{br:1})){w=!0,l=l||g.equals(c);break}s=g,a=!0,l=s.equals(c),ht=!0}if(a&&o.setEndAt(s,4),s=s.getNextSourceNode(ht,null,c),l=!s,(w||l)&&o)if(nt=o.getBoundaryNodes(),b=new i.elementPath(o.startContainer),nt.startNode.getParent().equals(b.blockLimit)&&r(nt.startNode)&&r(nt.endNode))o=null,e._.nextNode=null;else break;if(l)break}if(!h){if(!o)return e._.docEndMarker&&e._.docEndMarker.remove(),e._.nextNode=null,null;b=new i.elementPath(o.startContainer),ft=b.blockLimit,ct={div:1,th:1,td:1},h=b.block,!h&&!e.enforceRealBlocks&&ct[ft.getName()]&&o.checkStartOfBlock()&&o.checkEndOfBlock()?h=ft:!h||e.enforceRealBlocks&&h.getName()=="li"?(h=e.range.document.createElement(n||"p"),o.extractContents().appendTo(h),h.trim(),o.insertNode(h),tt=it=!0):h.getName()!="li"?o.checkStartOfBlock()&&o.checkEndOfBlock()||(h=h.clone(!1),o.extractContents().appendTo(h),h.trim(),et=o.splitBlock(),tt=!et.wasStartOfBlock,it=!et.wasEndOfBlock,o.insertNode(h)):l||(e._.nextNode=h.equals(c)?null:o.getBoundaryNodes().endNode.getNextSourceNode(!0,null,c))}return tt&&(v=h.getPrevious(),v&&v.type==1&&(v.getName()=="br"?v.remove():v.getLast()&&v.getLast().$.nodeName.toLowerCase()=="br"&&v.getLast().remove())),it&&(ot=i.walker.bookmark(!1,!0),y=h.getLast(),y&&y.type==1&&y.getName()=="br"&&(u||y.getPrevious(ot)||y.getNext(ot))&&y.remove()),e._.nextNode||(e._.nextNode=l||h.equals(c)?null:h.getNextSourceNode(!0,null,c)),h}},i.range.prototype.createIterator=function(){return new n(this)}}(),f.add("panelbutton",{requires:["button"],beforeInit:function(n){n.ui.addHandler(4,e.panelButton.handler)}}),n.UI_PANELBUTTON=4,function(){var i=function(n){var t=this,i=t._;if(i.state!=0){if(t.createPanel(n),i.on){i.panel.hide();return}i.panel.showBlock(t._.id,t.document.getById(t._.id),4)}};e.panelButton=t.createClass({base:e.button,$:function(t){var r=this,u=t.panel;delete t.panel,r.base(t),r.document=u&&u.parent&&u.parent.getDocument()||n.document,r.hasArrow=!0,r.click=i,r._={panelDefinition:u}},statics:{handler:{create:function(n){return new e.panelButton(n)}}},proto:{createPanel:function(t){var r=this._;if(!r.panel){var f=this._.panelDefinition||{},o=f.parent||n.document.getBody(),u=this._.panel=new e.floatPanel(t,o,f),i=this;if(u.onShow=function(){i.className&&this.element.getFirst().addClass(i.className+"_panel"),r.oldState=i._.state,i.setState(1),r.on=1,i.onOpen&&i.onOpen()},u.onHide=function(){i.className&&this.element.getFirst().removeClass(i.className+"_panel"),i.setState(r.oldState),r.on=0,i.onClose&&i.onClose()},u.onEscape=function(){u.hide(),i.document.getById(r.id).focus()},this.onBlock)this.onBlock(u,r.id);u.getBlock(r.id).onHide=function(){r.on=0,i.setState(2)}}}}})}(),f.add("floatpanel",{requires:["panel"]}),function(){function h(n,t,i,r,u){var h=t.getUniqueId()+"-"+i.getUniqueId()+"-"+n.skinName+"-"+n.lang.dir+(n.uiColor&&"-"+n.uiColor||"")+(r.css&&"-"+r.css||"")+(u&&"-"+u||""),s=f[h];return s||(s=f[h]=new e.panel(t,r),s.element=i.append(o.createFromHtml(s.renderHtml(n),t)),s.element.setStyles({display:"none",position:"absolute"})),s}var f={},s=!1;e.floatPanel=t.createClass({$:function(n,t,i,r){i.forceIFrame=!0;var u=t.getDocument(),f=h(n,u,t,i,r||0),e=f.element,o=e.getFirst().getFirst();this.element=e,this._={panel:f,parentElement:t,definition:i,document:u,iframe:o,children:[],dir:n.lang.dir}},proto:{addBlock:function(n,t){return this._.panel.addBlock(n,t)},addListBlock:function(n,t){return this._.panel.addListBlock(n,t)},getBlock:function(n){return this._.panel.getBlock(n)},showBlock:function(f,e,o,h,c){var a=this._.panel,k=a.showBlock(f),b;this.allowBlur(!1),s=!0;var v=this.element,y=this._.iframe,d=this._.definition,g=e.getDocumentPosition(v.getDocument()),p=this._.dir=="rtl",l=g.x+(h||0),w=g.y+(c||0);if(p&&(o==1||o==4)?l+=e.$.offsetWidth:p||o!=2&&o!=3||(l+=e.$.offsetWidth-1),(o==3||o==4)&&(w+=e.$.offsetHeight-1),this._.panel._.offsetParentId=e.getId(),v.setStyles({top:w+"px",left:"-3000px",opacity:"0",display:""}),!this._.blurSet){b=u?y:new i.window(y.$.contentWindow),n.event.useCapture=!0;b.on("blur",function(n){var t=this,i,r;t.allowBlur()&&((i=n.data.getTarget(),r=i.getWindow&&i.getWindow(),r&&r.equals(b))||!t.visible||t._.activeChild||s||t.hide())},this);b.on("focus",function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)},this);n.event.useCapture=!1,this._.blurSet=1}a.onEscape=t.bind(function(){this.onEscape&&this.onEscape()},this),t.setTimeout(function(){p&&(l-=v.$.offsetWidth);var n=t.bind(function(){var n,t;k.autoSize?(n=v.getFirst(),t=k.element.$.scrollHeight,u&&r.quirks&&t>0&&(t+=(n.$.offsetHeight||0)-(n.$.clientHeight||0)),n.setStyle("height",t+"px"),a._.currentBlock.element.setStyle("display","none").removeStyle("display")):v.getFirst().removeStyle("height");var f=a.element,e=f.getWindow(),o=e.getScrollPosition(),s=e.getViewPaneSize(),i={height:f.$.offsetHeight,width:f.$.offsetWidth};(p?l<0:l+i.width>s.width+o.x)&&(l+=i.width*(p?1:-1)),w+i.height>s.height+o.y&&(w-=i.height),v.setStyles({top:w+"px",left:l+"px",opacity:"1"})},this);a.isLoaded?n():a.onLoad=n,t.setTimeout(function(){if(d.voiceLabel&&r.gecko){var n=y.getParent();n.setAttribute("role","region"),n.setAttribute("title",d.voiceLabel),y.setAttribute("role","region"),y.setAttribute("title"," ")}y.$.contentWindow.focus(),this.allowBlur(!0)},0,this)},0,this),this.visible=1,this.onShow&&this.onShow.call(this),s=!1},hide:function(){var n=this;n.visible&&(!n.onHide||n.onHide.call(n)!==!0)&&(n.hideChild(),n.element.setStyle("display","none"),n.visible=0)},allowBlur:function(n){var t=this._.panel;return n!=undefined&&(t.allowBlur=n),t.allowBlur},showAsChild:function(n,i,u,f,e,o){(this._.activeChild!=n||n._.panel._.offsetParentId!=u.getId())&&(this.hideChild(),n.onHide=t.bind(function(){t.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=n,this._.focused=!1,n.showBlock(i,u,f,e,o),(r.ie7Compat||r.ie8&&r.ie6Compat)&&setTimeout(function(){n.element.getChild(0).$.style.cssText+=""},100))},hideChild:function(){var n=this._.activeChild;n&&(delete n.onHide,delete this._.activeChild,n.hide())}}});n.on("instanceDestroyed",function(){var r=t.isEmpty(n.instances),u,i;for(u in f)i=f[u],r?i.destroy():i.element.hide();r&&(f={})})}(),f.add("menu",{beforeInit:function(n){for(var i=n.config.menu_groups.split(","),r={},t=0;t<i.length;t++)r[i[t]]=t+1;n._.menuGroups=r,n._.menuItems={}},requires:["floatpanel"]}),t.extend(n.editor.prototype,{addMenuGroup:function(n,t){this._.menuGroups[n]=t||100},addMenuItem:function(t,i){this._.menuGroups[i.group]&&(this._.menuItems[t]=new n.menuItem(this,t,i))},addMenuItems:function(n){for(var t in n)this.addMenuItem(t,n[t])},getMenuItem:function(n){return this._.menuItems[n]}}),function(){function i(n){n.sort(function(n,t){return n.group<t.group?-1:n.group>t.group?1:n.order<t.order?-1:n.order>t.order?1:0})}n.menu=t.createClass({$:function(n,i){var r=this;r.id="cke_"+t.getNextNumber(),r.editor=n,r.items=[],r._.level=i||1},_:{showSubMenu:function(i){var r=this,u=r._.subMenu,s=r.items[i],e=s.getItems&&s.getItems(),o,f,h;if(!e){r._.panel.hideChild();return}u?u.removeAll():(u=r._.subMenu=new n.menu(r.editor,r._.level+1),u.parent=r,u.onClick=t.bind(r.onClick,r));for(o in e)f=r.editor.getMenuItem(o),f&&(f.state=e[o],u.add(f));h=r._.panel.getBlock(r.id).element.getDocument().getById(r.id+String(i)),u.show(h,2)}},proto:{add:function(n){n.order||(n.order=this.items.length),this.items.push(n)},removeAll:function(){this.items=[]},show:function(r,u,f,o){var a=this.items,c=this.editor,s=this._.panel,v=this._.element,y,h,b,l,w;s||(s=this._.panel=new e.floatPanel(this.editor,n.document.getBody(),{css:c.skin.editor.css,level:this._.level-1,className:c.skinClass+" cke_contextmenu"},this._.level),s.onEscape=t.bind(function(){this.onEscape&&this.onEscape(),this.hide()},this),s.onHide=t.bind(function(){this.onHide&&this.onHide()},this),y=s.addBlock(this.id),y.autoSize=!0,h=y.keys,h[40]="next",h[9]="next",h[38]="prev",h[2009]="prev",h[32]="click",h[39]="click",v=this._.element=y.element,v.addClass(c.skinClass),b=v.getDocument(),b.getBody().setStyle("overflow","hidden"),b.getElementsByTag("html").getItem(0).setStyle("overflow","hidden"),this._.itemOverFn=t.addFunction(function(n){var i=this;clearTimeout(i._.showSubTimeout),i._.showSubTimeout=t.setTimeout(i._.showSubMenu,c.config.menu_subMenuDelay,i,[n])},this),this._.itemOutFn=t.addFunction(function(){clearTimeout(this._.showSubTimeout)},this),this._.itemClickFn=t.addFunction(function(n){var t=this,i=t.items[n];if(i.state==0){t.hide();return}i.getItems?t._.showSubMenu(n):t.onClick&&t.onClick(i)},this)),i(a);var p=['<div class="cke_menu">'],k=a.length,d=k&&a[0].group;for(l=0;l<k;l++)w=a[l],d!=w.group&&(p.push('<div class="cke_menuseparator"><\/div>'),d=w.group),w.render(this,l,p);p.push("<\/div>"),v.setHtml(p.join("")),this.parent?this.parent._.panel.showAsChild(s,this.id,r,u,f,o):s.showBlock(this.id,r,u,f,o),c.fire("menuShow",[s])},hide:function(){this._.panel&&this._.panel.hide()}}})}(),n.menuItem=t.createClass({$:function(n,i,r){var u=this;t.extend(u,r,{order:0,className:"cke_button_"+i}),u.group=n._.menuGroups[u.group],u.editor=n,u.name=i},proto:{render:function(t,i,u){var f=this,c=t.id+String(i),e=typeof f.state=="undefined"?2:f.state,s=" cke_"+(e==1?"on":e==0?"disabled":"off"),o=f.label,h;e==0&&(o=f.editor.lang.common.unavailable.replace("%1",o)),f.className&&(s+=" "+f.className),u.push('<span class="cke_menuitem"><a id="',c,'" class="',s,'" href="javascript:void(\'',(f.label||"").replace("'",""),'\')" title="',f.label,'" tabindex="-1"_cke_focus=1 hidefocus="true"'),(r.opera||r.gecko&&r.mac)&&u.push(' onkeypress="return false;"'),r.gecko&&u.push(' onblur="this.style.cssText = this.style.cssText;"'),h=(f.iconOffset||0)*-16,u.push(' onmouseover="CKEDITOR.tools.callFunction(',t._.itemOverFn,",",i,');" onmouseout="CKEDITOR.tools.callFunction(',t._.itemOutFn,",",i,');" onclick="CKEDITOR.tools.callFunction(',t._.itemClickFn,",",i,'); return false;"><span class="cke_icon_wrapper"><span class="cke_icon"'+(f.icon?' style="background-image:url('+n.getUrl(f.icon)+");background-position:0 "+h+'px;"':"")+'><\/span><\/span><span class="cke_label">'),f.getItems&&u.push('<span class="cke_menuarrow"><\/span>'),u.push(o,"<\/span><\/a><\/span>")}}}),s.menu_subMenuDelay=400,s.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",function(){var t=function(n,t){return n._.modes&&n._.modes[t||n.mode]},i;f.add("editingblock",{init:function(u){if(u.config.editingBlock){u.on("themeSpace",function(n){n.data.space=="contents"&&(n.data.html+="<br>")});u.on("themeLoaded",function(){u.fireOnce("editingBlockReady")});u.on("uiReady",function(){u.setMode(u.config.startupMode)});u.on("afterSetData",function(){if(!i){function n(){i=!0,t(u).loadData(u.getData()),i=!1}if(u.mode)n();else u.on("mode",function(){n(),u.removeListener("mode",arguments.callee)})}});u.on("beforeGetData",function(){!i&&u.mode&&(i=!0,u.setData(t(u).getData()),i=!1)});u.on("getSnapshot",function(n){u.mode&&(n.data=t(u).getSnapshotData())});u.on("loadSnapshot",function(n){u.mode&&t(u).loadSnapshotData(n.data)});u.on("mode",function(t){var i,f;t.removeListener(),i=u.container,r.webkit&&r.version<528&&(f=u.config.tabIndex||u.element.getAttribute("tabindex")||0,i=i.append(o.createFromHtml('<input tabindex="'+f+'" style="position:absolute; left:-10000">')));i.on("focus",function(){u.focus()});u.config.startupFocus&&u.focus(),setTimeout(function(){u.fireOnce("instanceReady"),n.fire("instanceReady",null,u)})})}}}),n.editor.prototype.mode="",n.editor.prototype.addMode=function(n,t){t.name=n,(this._.modes||(this._.modes={}))[n]=t},n.editor.prototype.setMode=function(n){var i,r=this.getThemeSpace("contents"),e=this.checkDirty(),u,f;if(this.mode){if(n==this.mode)return;this.fire("beforeModeUnload"),u=t(this),i=u.getData(),u.unload(r),this.mode=""}if(r.setHtml(""),f=t(this,n),!f)throw'[CKEDITOR.editor.setMode] Unknown mode "'+n+'".';if(!e)this.on("mode",function(){this.resetDirty(),this.removeListener("mode",arguments.callee)});f.load(r,typeof i!="string"?this.getData():i)},n.editor.prototype.focus=function(){var n=t(this);n&&n.focus()}}(),s.startupMode="wysiwyg",s.startupFocus=!1,s.editingBlock=!0,function(){function v(){var n=this,t,u,r;try{if(t=n.getSelection(),!t)return;u=t.getStartElement(),r=new i.elementPath(u),r.compare(n._.selectionPreviousPath)||(n._.selectionPreviousPath=r,n.fire("selectionChange",{selection:t,path:r,element:u}))}catch(f){}}function e(){(h=!0,s)||(l.call(this),s=t.setTimeout(l,200,this))}function l(){s=null,h&&(t.setTimeout(v,0,this),h=!1)}var s,h,y={exec:function(n){switch(n.mode){case"wysiwyg":n.document.$.execCommand("SelectAll",!1,null)}},canUndo:!1},a;f.add("selection",{init:function(n){n.on("contentDom",function(){var f=n.document,i=f.getBody(),o,r;if(u){i.on("focusin",function(){if(o){try{o.select()}catch(n){}o=null}});n.window.on("focus",function(){r=!0,u()});i.on("beforedeactivate",function(){r=!1});i.on("mousedown",s);i.on("mouseup",function(){r=!0,setTimeout(function(){u(!0)},0)});i.on("keydown",s);i.on("keyup",function(){r=!0,u()});f.on("selectionchange",u);function s(){r=!1}function u(i){if(r){var s=n.document,f=s&&s.$.selection;if(i&&f&&f.type=="None"&&!s.$.queryCommandEnabled("InsertImage")){t.setTimeout(u,50,this,!0);return}o=f&&f.createRange(),e.call(n)}}}else{f.on("mouseup",e,n);f.on("keyup",e,n)}});n.addCommand("selectAll",y),n.ui.addButton("SelectAll",{label:n.lang.selectAll,command:"selectAll"}),n.selectionChange=e}}),n.editor.prototype.getSelection=function(){return this.document&&this.document.getSelection()},n.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},c.prototype.getSelection=function(){var n=new i.selection(this);return!n||n.isInvalid?null:n},n.SELECTION_NONE=1,n.SELECTION_TEXT=2,n.SELECTION_ELEMENT=3,i.selection=function(n){var t=this,r=n.getCustomData("cke_locked_selection"),i;return r?r:(t.document=n,t.isLocked=!1,t._={cache:{}},u&&(i=t.getNative().createRange(),(!i||i.item&&i.item(0).ownerDocument!=t.document.$||i.parentElement&&i.parentElement().ownerDocument!=t.document.$)&&(t.isInvalid=!0)),t)},a={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,th:1,thead:1,tfoot:1},i.selection.prototype={getNative:u?function(){return this._.cache.nativeSel||(this._.cache.nativeSel=this.document.$.selection)}:function(){return this._.cache.nativeSel||(this._.cache.nativeSel=this.document.getWindow().$.getSelection())},getType:u?function(){var t=this._.cache,n,i,r;if(t.type)return t.type;n=1;try{i=this.getNative(),r=i.type,r=="Text"&&(n=2),r=="Control"&&(n=3),i.createRange().parentElement&&(n=2)}catch(u){}return t.type=n}:function(){var u=this._.cache,t,i,n,r;return u.type?u.type:(t=2,i=this.getNative(),i?i.rangeCount==1&&(n=i.getRangeAt(0),r=n.startContainer,r==n.endContainer&&r.nodeType==1&&n.endOffset-n.startOffset==1&&a[r.childNodes[n.startOffset].nodeName.toLowerCase()]&&(t=3)):t=1,u.type=t)},getRanges:u?function(){var n=function(n,t){var u,f,i,r,o,s,e;for(n=n.duplicate(),n.collapse(t),u=n.parentElement(),f=u.childNodes,r=0;r<f.length;r++)if(o=f[r],o.nodeType==1){if(i=n.duplicate(),i.moveToElementText(o),i.collapse(),s=i.compareEndPoints("StartToStart",n),s>0)break;else if(s===0)return{container:u,offset:r};i=null}for(i||(i=n.duplicate(),i.moveToElementText(u),i.collapse(!1)),i.setEndPoint("StartToStart",n),e=i.text.replace(/(\r\n|\r)/g,"\n").length;e>0;)e-=f[--r].nodeValue.length;return e===0?{container:u,offset:r}:{container:f[r],offset:-e}};return function(){var r=this,e=r._.cache,u,l,s;if(e.ranges)return e.ranges;var c=r.getNative(),o=c&&c.createRange(),a=r.getType(),t;if(!c)return[];if(a==2)return t=new i.range(r.document),u=n(o,!0),t.setStart(new i.node(u.container),u.offset),u=n(o),t.setEnd(new i.node(u.container),u.offset),e.ranges=[t];if(a==3){for(l=r._.cache.ranges=[],s=0;s<o.length;s++){var v=o.item(s),h=v.parentNode,f=0;for(t=new i.range(r.document);f<h.childNodes.length&&h.childNodes[f]!=v;f++);t.setStart(new i.node(h),f),t.setEnd(new i.node(h),f+1),l.push(t)}return l}return e.ranges=[]}}():function(){var f=this._.cache,e,t,r,n,u;if(f.ranges)return f.ranges;if(e=[],t=this.getNative(),!t)return[];for(r=0;r<t.rangeCount;r++)n=t.getRangeAt(r),u=new i.range(this.document),u.setStart(new i.node(n.startContainer),n.startOffset),u.setEnd(new i.node(n.endContainer),n.endOffset),e.push(u);return f.ranges=e},getStartElement:function(){var f=this,e=f._.cache,n,s,t,i,h,r;if(e.startElement!==undefined)return e.startElement;s=f.getNative();switch(f.getType()){case 3:return f.getSelectedElement();case 2:if(t=f.getRanges()[0],t&&!t.collapsed){for(t.optimize();;)if(i=t.startContainer,h=t.startOffset,h!=(i.getChildCount?i.getChildCount():i.getLength())||i.isBlockBoundary())break;else t.setStartAfter(i);if(n=t.startContainer,n.type!=1)return n.getParent();if(n=n.getChild(t.startOffset),!n||n.type!=1)return t.startContainer;for(r=n.getFirst();r&&r.type==1;)n=r,r=r.getFirst();return n}u?(t=s.createRange(),t.collapse(!0),n=t.parentElement()):(n=s.anchorNode,n&&n.nodeType!=1&&(n=n.parentNode))}return e.startElement=n?new o(n):null},getSelectedElement:function(){var t=this._.cache,n,i,r;if(t.selectedElement!==undefined)return t.selectedElement;if(this.getType()==3)if(i=this.getNative(),u)try{n=i.createRange().item(0)}catch(f){}else r=i.getRangeAt(0),n=r.startContainer.childNodes[r.startOffset];return t.selectedElement=n?new o(n):null},lock:function(){var n=this;n.getRanges(),n.getStartElement(),n.getSelectedElement(),n._.cache.nativeSel={},n.isLocked=!0,n.document.setCustomData("cke_locked_selection",n)},unlock:function(n){var t=this,u=t.document,i=u.getCustomData("cke_locked_selection"),r,f;i&&(u.setCustomData("cke_locked_selection",null),n&&(r=i.getSelectedElement(),f=!r&&i.getRanges(),t.isLocked=!1,t.reset(),u.getBody().focus(),r?t.selectElement(r):t.selectRanges(f))),i&&n||(t.isLocked=!1,t.reset())},reset:function(){this._.cache={}},selectElement:function(n){var t=this,r,f;if(t.isLocked){r=new i.range(t.document),r.setStartBefore(n),r.setEndAfter(n),t._.cache.selectedElement=n,t._.cache.startElement=n,t._.cache.ranges=[r],t._.cache.type=3;return}if(u){t.getNative().empty();try{r=t.document.$.body.createControlRange(),r.addElement(n.$),r.select()}catch(e){r=t.document.$.body.createTextRange(),r.moveToElementText(n.$),r.select()}t.reset()}else r=t.document.$.createRange(),r.selectNode(n.$),f=t.getNative(),f.removeAllRanges(),f.addRange(r),t.reset()},selectRanges:function(n){var t=this,o,f;if(t.isLocked){t._.cache.selectedElement=null,t._.cache.startElement=n[0].getTouchedStartNode(),t._.cache.ranges=n,t._.cache.type=2;return}if(u)n[0]&&n[0].select(),t.reset();else{for(o=t.getNative(),o.removeAllRanges(),f=0;f<n.length;f++){var i=n[f],s=t.document.$.createRange(),e=i.startContainer;i.collapsed&&r.gecko&&r.version<10900&&e.type==1&&!e.getChildCount()&&e.appendText(""),s.setStart(e.$,i.startOffset),s.setEnd(i.endContainer.$,i.endOffset),o.addRange(s)}t.reset()}},createBookmarks:function(n){for(var s=[],f=this.getRanges(),h=f.length,t,e,o,u,r=0;r<h;r++)for(s.push(t=f[r].createBookmark(n,!0)),n=t.serializable,e=n?this.document.getById(t.startNode):t.startNode,o=n?this.document.getById(t.endNode):t.endNode,u=r+1;u<h;u++){var i=f[u],c=i.startContainer,l=i.endContainer;c.equals(e.getParent())&&i.startOffset++,c.equals(o.getParent())&&i.startOffset++,l.equals(e.getParent())&&i.endOffset++,l.equals(o.getParent())&&i.endOffset++}return s},createBookmarks2:function(n){for(var i=[],r=this.getRanges(),t=0;t<r.length;t++)i.push(r[t].createBookmark2(n));return i},selectBookmarks:function(n){for(var u=[],r,t=0;t<n.length;t++)r=new i.range(this.document),r.moveToBookmark(n[t]),u.push(r);return this.selectRanges(u),this},getCommonAncestor:function(){var n=this.getRanges(),t=n[0].startContainer,i=n[n.length-1].endContainer;return t.getCommonAncestor(i)},scrollIntoView:function(){var n=this.getStartElement();n.scrollIntoView()}}}(),function(){var n=i.walker.whitespaces(!0),t=/\ufeff|\u00a0/;i.range.prototype.select=u?function(i){var r=this,l=r.collapsed,h,o,a=r.createBookmark(),u=a.startNode,e,f,c,s;l||(e=a.endNode),f=r.document.$.body.createTextRange(),f.moveToElementText(u.$),f.moveStart("character",1),e?(c=r.document.$.body.createTextRange(),c.moveToElementText(e.$),f.setEndPoint("EndToEnd",c),f.moveEnd("character",-1)):(s=u.getNext(n),h=!(s&&s.getText&&s.getText().match(t))&&(i||!u.hasPrevious()||u.getPrevious().is&&u.getPrevious().is("br")),o=r.document.createElement("span"),o.setHtml("&#65279;"),o.insertBefore(u),h&&r.document.createText("").insertBefore(u)),r.setStartBefore(u),u.remove(),l?(h?(f.moveStart("character",-1),f.select(),r.document.$.selection.clear()):f.select(),o.remove()):(r.setEndBefore(e),e.remove(),f.select())}:function(){var n=this,r=n.startContainer,t,u;n.collapsed&&r.type==1&&!r.getChildCount()&&r.append(new i.text("")),t=n.document.$.createRange(),t.setStart(r.$,n.startOffset);try{t.setEnd(n.endContainer.$,n.endOffset)}catch(f){if(f.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")>=0)n.collapse(!0),t.setEnd(n.endContainer.$,n.endOffset);else throw f;}u=n.document.getSelection().getNative(),u.removeAllRanges(),u.addRange(t)}}(),function(){var t={elements:{$:function(t){var o=t.attributes,s=o&&o._cke_realelement,h=s&&new n.htmlParser.fragment.fromHtml(decodeURIComponent(s)),r=h&&h.children[0],u,i,f,e;return r&&t.attributes._cke_resizable&&(u=t.attributes.style,u&&(i=/(?:^|\s)width\s*:\s*(\d+)/i.exec(u),f=i&&i[1],i=/(?:^|\s)height\s*:\s*(\d+)/i.exec(u),e=i&&i[1],f&&(r.attributes.width=f),e&&(r.attributes.height=e))),r}}};f.add("fakeobjects",{requires:["htmlwriter"],afterInit:function(n){var i=n.dataProcessor,r=i&&i.htmlFilter;r&&r.addRules(t)}})}(),n.editor.prototype.createFakeElement=function(t,i,r,u){var e=this.lang.fakeobjects,f={"class":i,src:n.getUrl("images/spacer.gif"),_cke_realelement:encodeURIComponent(t.getOuterHtml()),_cke_real_node_type:t.type,alt:e[r]||e.unknown};return r&&(f._cke_real_element_type=r),u&&(f._cke_resizable=u),this.document.createElement("img",{attributes:f})},n.editor.prototype.createFakeParserElement=function(t,i,r,u){var e=this.lang.fakeobjects,o,s=new n.htmlParser.basicWriter,f;return t.writeHtml(s),o=s.getHtml(),f={"class":i,src:n.getUrl("images/spacer.gif"),_cke_realelement:encodeURIComponent(o),_cke_real_node_type:t.type,alt:e[r]||e.unknown},r&&(f._cke_real_element_type=r),u&&(f._cke_resizable=u),new n.htmlParser.element("img",f)},n.editor.prototype.restoreRealElement=function(n){return n.getAttribute("_cke_real_node_type")!=1?null:o.createFromHtml(decodeURIComponent(n.getAttribute("_cke_realelement")),this.document)},f.add("richcombo",{requires:["floatpanel","listblock","button"],beforeInit:function(n){n.ui.addHandler(3,e.richCombo.handler)}}),n.UI_RICHCOMBO=3,e.richCombo=t.createClass({$:function(i){var u=this,r;t.extend(u,i,{title:i.label,modes:{wysiwyg:1}}),r=u.panel||{},delete u.panel,u.id=t.getNextNumber(),u.document=r&&r.parent&&r.parent.getDocument()||n.document,r.className=(r.className||"")+" cke_rcombopanel",u._={panelDefinition:r,items:{},state:2}},statics:{handler:{create:function(n){return new e.richCombo(n)}}},proto:{renderHtml:function(n){var t=[];return this.render(n,t),t.join("")},render:function(u,f){var e="cke_"+this.id,s=t.addFunction(function(n){var i=this,t=i._,r;if(t.state!=0){if(i.createPanel(u),t.on){t.panel.hide();return}t.committed||(t.list.commit(),t.committed=1),r=i.getValue(),r?t.list.mark(r):t.list.unmarkAll(),t.panel.showBlock(i.id,new o(n),4)}},this),h={id:e,combo:this,focus:function(){var t=n.document.getById(e).getChild(1);t.focus()},execute:s},c;u.on("mode",function(){this.setState(this.modes[u.mode]?2:0)},this);return c=t.addFunction(function(n,r){n=new i.event(n);var u=n.getKeystroke();switch(u){case 13:case 32:case 40:t.callFunction(s,r);break;default:h.onkey(h,u)}n.preventDefault()}),f.push('<span class="cke_rcombo">',"<span id=",e),this.className&&f.push(' class="',this.className,' cke_off"'),f.push("><span class=cke_label>",this.label,'<\/span><a hidefocus=true title="',this.title,'" tabindex="-1" href="javascript:void(\'',this.label,"')\""),(r.opera||r.gecko&&r.mac)&&f.push(' onkeypress="return false;"'),r.gecko&&f.push(' onblur="this.style.cssText = this.style.cssText;"'),f.push(' onkeydown="CKEDITOR.tools.callFunction( ',c,', event, this );" onclick="CKEDITOR.tools.callFunction(',s,', this); return false;"><span><span class="cke_accessibility">'+(this.voiceLabel?this.voiceLabel+" ":"")+'<\/span><span id="'+e+'_text" class="cke_text cke_inline_label">'+this.label+"<\/span><\/span><span class=cke_openbutton><\/span><\/a><\/span><\/span>"),this.onRender&&this.onRender(),h},createPanel:function(t){if(!this._.panel){var f=this._.panelDefinition,o=f.parent||n.document.getBody(),r=new e.floatPanel(t,o,f),u=r.addListBlock(this.id,this.multiSelect),i=this;r.onShow=function(){i.className&&this.element.getFirst().addClass(i.className+"_panel"),i.setState(1),u.focus(!i.multiSelect&&i.getValue()),i._.on=1,i.onOpen&&i.onOpen()},r.onHide=function(){i.className&&this.element.getFirst().removeClass(i.className+"_panel"),i.setState(2),i._.on=0,i.onClose&&i.onClose()},r.onEscape=function(){r.hide(),i.document.getById("cke_"+i.id).getFirst().getNext().focus()},u.onClick=function(n,t){i.document.getWindow().focus(),i.onClick&&i.onClick.call(i,n,t),t?i.setValue(n,i._.items[n]):i.setValue(""),r.hide()},this._.panel=r,this._.list=u,r.getBlock(this.id).onHide=function(){i._.on=0,i.setState(2)},this.init&&this.init()}},setValue:function(n,t){var i=this,r;i._.value=n,r=i.document.getById("cke_"+i.id+"_text"),n||t?r.removeClass("cke_inline_label"):(t=i.label,r.addClass("cke_inline_label")),r.setHtml(typeof t!="undefined"?t:n)},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(n){this._.list.mark(n)},hideItem:function(n){this._.list.hideItem(n)},hideGroup:function(n){this._.list.hideGroup(n)},showAll:function(){this._.list.showAll()},add:function(n,t,i){this._.items[n]=i||n,this._.list.add(n,t,i)},startGroup:function(n){this._.list.startGroup(n)},commit:function(){this._.list.commit()},setState:function(n){var t=this;t._.state!=n&&(t.document.getById("cke_"+t.id).setState(n),t._.state=n)}}}),e.prototype.addRichCombo=function(n,t){this.add(n,3,t)},f.add("htmlwriter"),n.htmlWriter=t.createClass({base:n.htmlParser.basicWriter,$:function(){var n=this,i,r;n.base(),n.indentationChars="\t",n.selfClosingEnd=" />",n.lineBreakChars="\n",n.forceSimpleAmpersand=!1,n.sortAttributes=!0,n._.indent=!1,n._.indentation="",n._.rules={},i=h;for(r in t.extend({},i.$nonBodyContent,i.$block,i.$listItem,i.$tableContent))n.setRules(r,{indent:!0,breakBeforeOpen:!0,breakAfterOpen:!0,breakBeforeClose:!i[r]["#"],breakAfterClose:!0});n.setRules("br",{breakAfterOpen:!0}),n.setRules("title",{indent:!1,breakAfterOpen:!1}),n.setRules("style",{indent:!1,breakBeforeClose:!0}),n.setRules("pre",{indent:!1})},proto:{openTag:function(n){var t=this,i=t._.rules[n];t._.indent?t.indentation():i&&i.breakBeforeOpen&&(t.lineBreak(),t.indentation()),t._.output.push("<",n)},openTagClose:function(n,t){var i=this,r=i._.rules[n];t?i._.output.push(i.selfClosingEnd):(i._.output.push(">"),r&&r.indent&&(i._.indentation+=i.indentationChars)),r&&r.breakAfterOpen&&i.lineBreak()},attribute:function(n,t){this.forceSimpleAmpersand&&(t=t.replace(/&amp;/,"&")),this._.output.push(" ",n,'="',t,'"')},closeTag:function(n){var t=this,i=t._.rules[n];i&&i.indent&&(t._.indentation=t._.indentation.substr(t.indentationChars.length)),t._.indent?t.indentation():i&&i.breakBeforeClose&&(t.lineBreak(),t.indentation()),t._.output.push("<\/",n,">"),i&&i.breakAfterClose&&t.lineBreak()},text:function(n){this._.indent&&(this.indentation(),n=t.ltrim(n)),this._.output.push(n)},comment:function(n){this._.indent&&this.indentation(),this._.output.push("<!--",n,"-->")},lineBreak:function(){var n=this;n._.output.length>0&&n._.output.push(n.lineBreakChars),n._.indent=!0},indentation:function(){this._.output.push(this._.indentation),this._.indent=!1},setRules:function(n,i){var r=this._.rules[n];r?t.extend(r,i,!0):this._.rules[n]=i}}}),f.add("menubutton",{requires:["button","contextmenu"],beforeInit:function(n){n.ui.addHandler(5,e.menuButton.handler)}}),n.UI_MENUBUTTON=5,function(){var i=function(i){var r=this._,u;if(r.state!==0){if(r.previousState=r.state,u=r.menu,u||(u=r.menu=new f.contextMenu(i),u.onHide=t.bind(function(){this.setState(r.previousState)},this),this.onMenu&&u.addListener(this.onMenu)),r.on){u.hide();return}this.setState(1),u.show(n.document.getById(this._.id),4)}};e.menuButton=t.createClass({base:e.button,$:function(n){var t=n.panel;delete n.panel,this.base(n),this.hasArrow=!0,this.click=i},statics:{handler:{create:function(n){return new e.menuButton(n)}}}})}(),n.DIALOG_RESIZE_NONE=0,n.DIALOG_RESIZE_WIDTH=1,n.DIALOG_RESIZE_HEIGHT=2,n.DIALOG_RESIZE_BOTH=3,function(){function p(n){return!!this._.tabs[n][0].$.offsetHeight}function w(){for(var n=this,f=n._.currentTabId,r=n._.tabIdList.length,u=t.indexOf(n._.tabIdList,f)+r,i=u-1;i>u-r;i--)if(p.call(n,n._.tabIdList[i%r]))return n._.tabIdList[i%r];return null}function b(){for(var n=this,f=n._.currentTabId,r=n._.tabIdList.length,u=t.indexOf(n._.tabIdList,f),i=u+1;i<u+r;i++)if(p.call(n,n._.tabIdList[i%r]))return n._.tabIdList[i%r];return null}function k(n,t,i){this.element=t,this.focusIndex=i,this.isFocusable=function(){return!t.getAttribute("disabled")&&t.isVisible()},this.focus=function(){n._.currentFocusIndex=this.focusIndex,this.element.focus()};t.on("keydown",function(n){n.data.getKeystroke()in{32:1,13:1}&&this.fire("click")});t.on("focus",function(){this.fire("mouseover")});t.on("blur",function(){this.fire("mouseout")})}function g(n,i){this._={dialog:n},t.extend(this,i)}function ut(t){function s(r){var f=t.getSize(),s=n.document.getWindow().getViewPaneSize(),h=r.data.$.screenX,c=r.data.$.screenY,v=h-o.x,y=c-o.y,l,a;o={x:h,y:c},i.x+=v,i.y+=y,l=i.x+u[3]<e?-u[3]:i.x-u[1]>s.width-f.width-e?s.width-f.width+u[1]:i.x,a=i.y+u[0]<e?-u[0]:i.y-u[2]>s.height-f.height-e?s.height-f.height+u[2]:i.y,t.move(l,a),r.data.preventDefault()}function h(){if(n.document.removeListener("mousemove",s),n.document.removeListener("mouseup",h),r.ie6Compat){var t=f.getChild(0).getFrameDocument();t.removeListener("mousemove",s),t.removeListener("mouseup",h)}}var o=null,i=null,l=t.getElement().getFirst(),c=t.getParentEditor(),e=c.config.dialog_magnetDistance,u=c.skin.margins||[0,0,0,0];typeof e=="undefined"&&(e=20);t.parts.title.on("mousedown",function(u){t._.updateSize=!0,o={x:u.data.$.screenX,y:u.data.$.screenY};n.document.on("mousemove",s);n.document.on("mouseup",h);if(i=t.getPosition(),r.ie6Compat){var e=f.getChild(0).getFrameDocument();e.on("mousemove",s);e.on("mouseup",h)}u.data.preventDefault()},t)}function ft(i){var l=i.definition,s=l.minWidth||0,h=l.minHeight||0,a=l.resizable,e=i.getParentEditor().skin.margins||[0,0,0,0],c=null,u=null,o=i._.editor.config.magnetDistance}n.dialog=function(e,o){function g(n){var t=h._.focusList,u=n?1:-1,r,i;if(!(t.length<1)){for(r=(h._.currentFocusIndex+u+t.length)%t.length,i=r;!t[i].isFocusable();)if(i=(i+u+t.length)%t.length,i==r)break;t[i].focus(),t[i].type=="text"&&t[i].select()}}function v(t){var i,u,r;h==n.dialog._.currentTop&&(i=t.data.getKeystroke(),a=0,i==9||i==2009?(u=i==2009,h._.tabBarMode?(r=u?w.call(h):b.call(h),h.selectPage(r),h._.tabs[r][0].focus()):g(!u),a=1):i!=4121||h._.tabBarMode?(i==37||i==39)&&h._.tabBarMode&&(r=i==37?w.call(h):b.call(h),h.selectPage(r),h._.tabs[r][0].focus(),a=1):(h._.tabBarMode=!0,h._.tabs[h._.currentTabId][0].focus(),a=1),a&&(t.stop(),t.data.preventDefault()))}function tt(n){a&&n.data.preventDefault()}var s=n.dialog._.dialogDefinitions[o],et,p,h,k,a,l,it,ot,nt,y;if(s=t.extend(s(e),rt),s=t.clone(s),s=new d(this,s),this.definition=s=n.fire("dialogDefinition",{name:o,definition:s},e).definition,et=n.document,p=e.theme.buildDialog(e),this._={editor:e,element:p.element,name:o,contentSize:{width:0,height:0},size:{width:0,height:0},updateSize:!1,contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=p.parts,this.parts.dialog.setStyles({position:r.ie6Compat?"absolute":"fixed",top:0,left:0,visibility:"hidden"}),n.event.call(this),s.onLoad)this.on("load",s.onLoad);if(s.onShow)this.on("show",s.onShow);if(s.onHide)this.on("hide",s.onHide);if(s.onOk)this.on("ok",function(n){s.onOk.call(this,n)===!1&&(n.data.hide=!1)});if(s.onCancel)this.on("cancel",function(n){s.onCancel.call(this,n)===!1&&(n.data.hide=!1)});h=this,k=function(n){var t=h._.contents,r=!1,i,u;for(i in t)for(u in t[i])if(r=n.call(this,t[i][u]),r)return};this.on("ok",function(n){k(function(t){if(t.validate){var i=t.validate(this);if(typeof i=="string"&&(alert(i),i=!1),i===!1)return t.select?t.select():t.focus(),n.data.hide=!1,n.stop(),!0}})},this,null,0);this.on("cancel",function(n){k(function(t){if(t.isChanged())return confirm(e.lang.common.confirmCancel)||(n.data.hide=!1),!0})},this,null,0);this.parts.close.on("click",function(){this.fire("cancel",{hide:!0}).hide!==!1&&this.hide()},this);this.on("show",function(){n.document.on("keydown",v,this,null,0);if(r.opera||r.gecko&&r.mac)n.document.on("keypress",tt,this);if(r.ie6Compat){var t=f.getChild(0).getFrameDocument();t.on("keydown",v,this,null,0)}});this.on("hide",function(){n.document.removeListener("keydown",v),(r.opera||r.gecko&&r.mac)&&n.document.removeListener("keypress",tt)});this.on("iframeAdded",function(n){var t=new c(n.data.iframe.$.contentWindow.document);t.on("keydown",v,this,null,0)});this.on("show",function(){var t=this,r,n,i;t._.hasFocus||(t._.currentFocusIndex=-1,g(!0),t._.editor.mode=="wysiwyg"&&u&&(r=e.document.$.selection,n=r.createRange(),n&&(n.parentElement&&n.parentElement().ownerDocument==e.document.$||n.item&&n.item(0).ownerDocument==e.document.$)&&(i=document.body.createTextRange(),i.moveToElementText(t.getElement().getFirst().$),i.collapse(!0),i.select())))},this,null,4294967295);if(r.ie6Compat)this.on("load",function(){var n=this.getElement(),t=n.getFirst();t.remove(),t.appendTo(n)},this);for(ut(this),ft(this),new i.text(s.title,n.document).appendTo(this.parts.title),l=0;l<s.contents.length;l++)this.addPage(s.contents[l]);it=/cke_dialog_tab(\s|$|_)/,ot=/cke_dialog_tab(\s|$)/;this.parts.tabs.on("click",function(n){var i=this,t=n.data.getTarget(),u=t,r;(it.test(t.$.className)||t.getName()=="a")&&(r=t.$.id.substr(0,t.$.id.lastIndexOf("_")),i.selectPage(r),i._.tabBarMode&&(i._.tabBarMode=!1,i._.currentFocusIndex=-1,g(!0)),n.data.preventDefault())},this);for(nt=[],y=n.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:s.buttons},nt).getChild(),this.parts.footer.setHtml(nt.join("")),l=0;l<y.length;l++)this._.buttons[y[l].id]=y[l];n.skins.load(e,"dialog")},n.dialog.prototype={resize:function(){return function(t,i){var r=this;r._.contentSize&&r._.contentSize.width==t&&r._.contentSize.height==i||(n.dialog.fire("resize",{dialog:r,skin:r._.editor.skinName,width:t,height:i},r._.editor),r._.contentSize={width:t,height:i},r._.updateSize=!0)}}(),getSize:function(){var n=this,i,t;return n._.updateSize?(i=n._.element.getFirst(),t=n._.size={width:i.$.offsetWidth||0,height:i.$.offsetHeight||0},n._.updateSize=!t.width||!t.height,t):n._.size},move:function(){var t;return function(i,r){var u=this,e=u._.element.getFirst(),f;(t===undefined&&(t=e.getComputedStyle("position")=="fixed"),t&&u._.position&&u._.position.x==i&&u._.position.y==r)||(u._.position={x:i,y:r},t||(f=n.document.getWindow().getScrollPosition(),i+=f.x,r+=f.y),e.setStyles({left:(i>0?i:0)+"px",top:(r>0?r:0)+"px"}))}}(),getPosition:function(){return t.extend({},this._.position)},show:function(){var s=this._.editor,e,i,f,o,h,c;if(s.mode=="wysiwyg"&&u&&(e=s.getSelection(),e&&e.lock()),i=this._.element,f=this.definition,!i.getParent()||!i.getParent().equals(n.document.getBody())){if(i.appendTo(n.document.getBody()),r.gecko&&r.version<10900&&(o=this.parts.dialog,o.setStyle("position","absolute"),setTimeout(function(){o.setStyle("position","fixed")},0)),this.resize(f.minWidth,f.minHeight),this.selectPage(this.definition.contents[0].id),this.reset(),n.dialog._.currentZIndex===null&&(n.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",n.dialog._.currentZIndex+=10),n.dialog._.currentTop===null){n.dialog._.currentTop=this,this._.parentDialog=null,et(this._.editor);i.on("keydown",nt);i.on(r.opera?"keypress":"keyup",tt);for(h in{keyup:1,keydown:1,keypress:1})i.on(h,it)}else this._.parentDialog=n.dialog._.currentTop,c=this._.parentDialog.getElement().getFirst(),c.$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),n.dialog._.currentTop=this;y(this,this,"\x1b",null,function(){this.getButton("cancel")&&this.getButton("cancel").click()}),this._.hasFocus=!1,t.setTimeout(function(){var t=n.document.getWindow().getViewPaneSize(),i=this.getSize();this.move((t.width-f.minWidth)/2,(t.height-i.height)/2),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),this.fire("show",{}),this._.editor.fire("dialogShow",this),this.foreach(function(n){n.setInitValue&&n.setInitValue()})},100,this)}},foreach:function(n){var t=this,i,r;for(i in t._.contents)for(r in t._.contents[i])n(t._.contents[i][r]);return t},reset:function(){var n=function(n){n.reset&&n.reset()};return function(){return this.foreach(n),this}}(),setupContent:function(){var n=arguments;this.foreach(function(t){t.setup&&t.setup.apply(t,n)})},commitContent:function(){var n=arguments;this.foreach(function(t){t.commit&&t.commit.apply(t,n)})},hide:function(){var t,f,o,i,e;if(this.fire("hide",{}),this._.editor.fire("dialogHide",this),t=this._.element,t.getParent()){if(t.remove(),this.parts.dialog.setStyle("visibility","hidden"),st(this),this._.parentDialog?(f=this._.parentDialog.getElement().getFirst(),f.setStyle("z-index",parseInt(f.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))):ot(),n.dialog._.currentTop=this._.parentDialog,this._.parentDialog)n.dialog._.currentZIndex-=10;else{n.dialog._.currentZIndex=null,t.removeListener("keydown",nt),t.removeListener(r.opera?"keypress":"keyup",tt);for(o in{keyup:1,keydown:1,keypress:1})t.removeListener(o,it);i=this._.editor,i.focus(),i.mode=="wysiwyg"&&u&&(e=i.getSelection(),e&&e.unlock(!0))}this.foreach(function(n){n.resetInitValue&&n.resetInitValue()})}},addPage:function(i){var r=this,h=[],l=i.label?' title="'+t.htmlEncode(i.label)+'"':"",v=i.elements,a=n.dialog._.uiElementBuilders.vbox.build(r,{type:"vbox",className:"cke_dialog_page_contents",children:i.elements,expand:!!i.expand,padding:i.padding,style:i.style||"width: 100%;"},h),s=o.createFromHtml(h.join("")),f=o.createFromHtml(['<a class="cke_dialog_tab"',r._.pageCount>0?" cke_last":"cke_first",l,!i.hidden?"":' style="display:none"',' id="',i.id+"_",t.getNextNumber(),'" href="javascript:void(0)"',' hidefocus="true">',i.label,"<\/a>"].join("")),c,u,e;for(r._.pageCount===0?r.parts.dialog.addClass("cke_single_page"):r.parts.dialog.removeClass("cke_single_page"),r._.tabs[i.id]=[f,s],r._.tabIdList.push(i.id),r._.pageCount++,r._.lastTab=f,c=r._.contents[i.id]={},e=a.getChild();u=e.shift();)c[u.id]=u,typeof u.getChild=="function"&&e.push.apply(e,u.getChild());s.setAttribute("name",i.id),s.appendTo(r.parts.contents),f.unselectable(),r.parts.tabs.append(f),i.accessKey&&(y(r,r,"CTRL+"+i.accessKey,ct,ht),r._.accessKeyMap["CTRL+"+i.accessKey]=i.id)},selectPage:function(n){var i=this,r,f,e,u;for(r in i._.tabs)f=i._.tabs[r][0],e=i._.tabs[r][1],r!=n&&(f.removeClass("cke_dialog_tab_selected"),e.hide());u=i._.tabs[n],u[0].addClass("cke_dialog_tab_selected"),u[1].show(),i._.currentTabId=n,i._.currentTabIndex=t.indexOf(i._.tabIdList,n)},hidePage:function(n){var t=this._.tabs[n]&&this._.tabs[n][0];t&&t.hide()},showPage:function(n){var t=this._.tabs[n]&&this._.tabs[n][0];t&&t.show()},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(n,t){return this._.contents[n][t]},getValueOf:function(n,t){return this.getContentElement(n,t).getValue()},setValueOf:function(n,t,i){return this.getContentElement(n,t).setValue(i)},getButton:function(n){return this._.buttons[n]},click:function(n){return this._.buttons[n].click()},disableButton:function(n){return this._.buttons[n].disable()},enableButton:function(n){return this._.buttons[n].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(n,t){var i=this,r;if(typeof t=="undefined")t=i._.focusList.length,i._.focusList.push(new k(i,n,t));else for(i._.focusList.splice(t,0,new k(i,n,t)),r=t+1;r<i._.focusList.length;r++)i._.focusList[r].focusIndex++}},t.extend(n.dialog,{add:function(n,t){this._.dialogDefinitions[n]&&typeof t!="function"||(this._.dialogDefinitions[n]=t)},exists:function(n){return!!this._.dialogDefinitions[n]},getCurrent:function(){return n.dialog._.currentTop},okButton:function(){var n=function(n,i){return i=i||{},t.extend({id:"ok",type:"button",label:n.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(n){var t=n.data.dialog;t.fire("ok",{hide:!0}).hide!==!1&&t.hide()}},i,!0)};return n.type="button",n.override=function(i){return t.extend(function(t){return n(t,i)},{type:"button"},!0)},n}(),cancelButton:function(){var n=function(n,i){return i=i||{},t.extend({id:"cancel",type:"button",label:n.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(n){var t=n.data.dialog;t.fire("cancel",{hide:!0}).hide!==!1&&t.hide()}},i,!0)};return n.type="button",n.override=function(i){return t.extend(function(t){return n(t,i)},{type:"button"},!0)},n}(),addUIElement:function(n,t){this._.uiElementBuilders[n]=t}}),n.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},n.event.implementOn(n.dialog),n.event.implementOn(n.dialog.prototype,!0);var rt={resizable:0,minWidth:600,minHeight:400,buttons:[n.dialog.okButton,n.dialog.cancelButton]},h=function(n,t,i){for(var r,f,u=0;r=n[u];u++){if(r.id==t)return r;if(i&&r[i]&&(f=h(r[i],t,i),f))return f}return null},l=function(n,t,i,r,u){var f,e,o;if(i){for(f=0;e=n[f];f++){if(e.id==i)return n.splice(f,0,t),t;if(r&&e[r]&&(o=l(e[r],t,i,r,!0),o))return o}if(u)return null}return n.push(t),t},a=function(n,t,i){for(var u,f,r=0;u=n[r];r++){if(u.id==t)return n.splice(r,1);if(i&&u[i]&&(f=a(u[i],t,i),f))return f}return null},d=function(n,i){var u,r,f;for(this.dialog=n,u=i.contents,r=0;f=u[r];r++)u[r]=new g(n,f);t.extend(this,i)};d.prototype={getContents:function(n){return h(this.contents,n)},getButton:function(n){return h(this.buttons,n)},addContents:function(n,t){return l(this.contents,n,t)},addButton:function(n,t){return l(this.buttons,n,t)},removeContents:function(n){a(this.contents,n)},removeButton:function(n){a(this.buttons,n)}},g.prototype={get:function(n){return h(this.elements,n,"children")},add:function(n,t){return l(this.elements,n,t,"children")},remove:function(n){a(this.elements,n,"children")}};var v,f,et=function(t){var u=n.document.getWindow(),s,i,a,y,c,l;f||(s=t.config.dialog_backgroundCoverColor||"white",i=['<div style="position: ',r.ie6Compat?"absolute":"fixed","; z-index: ",t.config.baseFloatZIndex,"; top: 0px; left: 0px; ",r.ie6Compat?"":"background-color: "+s,'" id="cke_dialog_background_cover">'],r.ie6Compat&&(a=r.isCustomDomain(),y="<html><body style=\\'background-color:"+s+";\\'><\/body><\/html>",i.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),i.push("void((function(){document.open();"+(a?"document.domain='"+document.domain+"';":"")+"document.write( '"+y+"' );document.close();})())"),i.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;progid:DXImageTransform.Microsoft.Alpha(opacity=0)"><\/iframe>')),i.push("<\/div>"),f=o.createFromHtml(i.join("")));var e=f,h=function(){var n=u.getViewPaneSize();e.setStyles({width:n.width+"px",height:n.height+"px"})},p=function(){var r=u.getScrollPosition(),t=n.dialog._.currentTop,i;e.setStyles({left:r.x+"px",top:r.y+"px"});do i=t.getPosition(),t.move(i.x,i.y);while(t=t._.parentDialog)};v=h;u.on("resize",h);h(),r.ie6Compat&&(c=function(){p(),arguments.callee.prevScrollHandler.apply(this,arguments)},u.$.setTimeout(function(){c.prevScrollHandler=window.onscroll||function(){},window.onscroll=c},0),p()),l=t.config.dialog_backgroundCoverOpacity,e.setOpacity(typeof l!="undefined"?l:.5),e.appendTo(n.document.getBody())},ot=function(){if(f){var t=n.document.getWindow();f.remove(),t.removeListener("resize",v),r.ie6Compat&&t.$.setTimeout(function(){var n=window.onscroll&&window.onscroll.prevScrollHandler;window.onscroll=n||null},0),v=null}},s={},nt=function(n){var i=n.data.$.ctrlKey||n.data.$.metaKey,r=n.data.$.altKey,u=n.data.$.shiftKey,f=String.fromCharCode(n.data.$.keyCode),t=s[(i?"CTRL+":"")+(r?"ALT+":"")+(u?"SHIFT+":"")+f];t&&t.length&&(t=t[t.length-1],t.keydown&&t.keydown.call(t.uiElement,t.dialog,t.key),n.data.preventDefault())},tt=function(n){var i=n.data.$.ctrlKey||n.data.$.metaKey,r=n.data.$.altKey,u=n.data.$.shiftKey,f=String.fromCharCode(n.data.$.keyCode),t=s[(i?"CTRL+":"")+(r?"ALT+":"")+(u?"SHIFT+":"")+f];t&&t.length&&(t=t[t.length-1],t.keyup&&(t.keyup.call(t.uiElement,t.dialog,t.key),n.data.preventDefault()))},y=function(n,t,i,r,u){var f=s[i]||(s[i]=[]);f.push({uiElement:n,dialog:t,key:i,keyup:u||n.accessKeyUp,keydown:r||n.accessKeyDown})},st=function(n){var r,t,i;for(r in s){for(t=s[r],i=t.length-1;i>=0;i--)(t[i].dialog==n||t[i].uiElement==n)&&t.splice(i,1);t.length===0&&delete s[r]}},ht=function(n,t){n._.accessKeyMap[t]&&n.selectPage(n._.accessKeyMap[t])},ct=function(){},lt={27:1,13:1},it=function(n){n.data.getKeystroke()in lt&&n.data.stopPropagation()};(function(){e.dialog={uiElement:function(i,r,u,f,e,o,s){var v,p,b,l,a;if(!(arguments.length<4)){var k=(f.call?f(r):f)||"div",w=["<",k," "],d=(e&&e.call?e(r):e)||{},c=(o&&o.call?o(r):o)||{},g=(s&&s.call?s(i,r):s)||"",nt=this.domId=c.id||t.getNextNumber()+"_uiElement",tt=this.id=r.id,h;for(c.id=nt,v={},r.type&&(v["cke_dialog_ui_"+r.type]=1),r.className&&(v[r.className]=1),p=c["class"]&&c["class"].split?c["class"].split(" "):[],h=0;h<p.length;h++)p[h]&&(v[p[h]]=1);b=[];for(h in v)b.push(h);c["class"]=b.join(" "),r.title&&(c.title=r.title),l=(r.style||"").split(";");for(h in d)l.push(h+":"+d[h]);for(r.hidden&&l.push("display:none"),h=l.length-1;h>=0;h--)l[h]===""&&l.splice(h,1);l.length>0&&(c.style=(c.style?c.style+"; ":"")+l.join("; "));for(h in c)w.push(h+'="'+t.htmlEncode(c[h])+'" ');w.push(">",g,"<\/",k,">"),u.push(w.join("")),(this._||(this._={})).dialog=i,typeof r.isChanged=="boolean"&&(this.isChanged=function(){return r.isChanged}),typeof r.isChanged=="function"&&(this.isChanged=r.isChanged),n.event.implementOn(this),this.registerEvents(r),this.accessKeyUp&&this.accessKeyDown&&r.accessKey&&y(this,i,"CTRL+"+r.accessKey),a=this;i.on("load",function(){if(a.getInputElement())a.getInputElement().on("focus",function(){i._.tabBarMode=!1,i._.hasFocus=!0,a.fire("focus")},a)});if(this.keyboardFocusable){this.focusIndex=i._.focusList.push(this)-1;this.on("focus",function(){i._.currentFocusIndex=a.focusIndex})}t.extend(this,r)}},hbox:function(n,i,r,u,f){if(!(arguments.length<4)){this._||(this._={});var l=this._.children=i,s=f&&f.widths||null,h=f&&f.height||null,o,c=function(){var i=['<tbody><tr class="cke_dialog_ui_hbox">'],u,n;for(o=0;o<r.length;o++)u="cke_dialog_ui_hbox_child",n=[],o===0&&(u="cke_dialog_ui_hbox_first"),o==r.length-1&&(u="cke_dialog_ui_hbox_last"),i.push('<td class="',u,'" '),s?s[o]&&n.push("width:"+t.cssLength(s[o])):n.push("width:"+Math.floor(100/r.length)+"%"),h&&n.push("height:"+t.cssLength(h)),f&&f.padding!=undefined&&n.push("padding:"+t.cssLength(f.padding)),n.length>0&&i.push('style="'+n.join("; ")+'" '),i.push(">",r[o],"<\/td>");return i.push("<\/tr><\/tbody>"),i.join("")};e.dialog.uiElement.call(this,n,f||{type:"hbox"},u,"table",{},f&&f.align&&{align:f.align}||null,c)}},vbox:function(n,i,r,u,f){if(!(arguments.length<3)){this._||(this._={});var c=this._.children=i,o=f&&f.width||null,s=f&&f.heights||null,h=function(){var i=['<table cellspacing="0" border="0" '],e,u;for(i.push('style="'),f&&f.expand&&i.push("height:100%;"),i.push("width:"+t.cssLength(o||"100%"),";"),i.push('"'),i.push('align="',t.htmlEncode(f&&f.align||(n.getParentEditor().lang.dir=="ltr"?"left":"right")),'" '),i.push("><tbody>"),e=0;e<r.length;e++)u=[],i.push("<tr><td "),o&&u.push("width:"+t.cssLength(o||"100%")),s?u.push("height:"+t.cssLength(s[e])):f&&f.expand&&u.push("height:"+Math.floor(100/r.length)+"%"),f&&f.padding!=undefined&&u.push("padding:"+t.cssLength(f.padding)),u.length>0&&i.push('style="',u.join("; "),'" '),i.push(' class="cke_dialog_ui_vbox_child">',r[e],"<\/td><\/tr>");return i.push("<\/tbody><\/table>"),i.join("")};e.dialog.uiElement.call(this,n,f||{type:"vbox"},u,"div",null,null,h)}}}})(),e.dialog.uiElement.prototype={getElement:function(){return n.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(n){return this.getInputElement().setValue(n),this.fire("change",{value:n}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var n=this,r=n.getInputElement(),t=r,i;(t=t.getParent())&&t.$.className.search("cke_dialog_page_contents")==-1;);return t?(i=t.getAttribute("name"),n._.dialog._.currentTabId!=i&&n._.dialog.selectPage(i),n):n},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(n){var i,r=function(n,t,i,r){t.on("load",function(){n.getInputElement().on(i,r,n)})},t;for(t in n)(i=t.match(/^on([A-Z]\w+)/))&&(this.eventProcessors[t]?this.eventProcessors[t].call(this,this._.dialog,n[t]):r(this,this._.dialog,i[1].toLowerCase(),n[t]));return this},eventProcessors:{onLoad:function(n,t){n.on("load",t,this)},onShow:function(n,t){n.on("show",t,this)},onHide:function(n,t){n.on("hide",t,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var n=this.getInputElement();n.setAttribute("disabled","true"),n.addClass("cke_disabled")},enable:function(){var n=this.getInputElement();n.removeAttribute("disabled"),n.removeClass("cke_disabled")},isEnabled:function(){return!this.getInputElement().getAttribute("disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return!this.isEnabled()||!this.isVisible()?!1:!0}},e.dialog.hbox.prototype=t.extend(new e.dialog.uiElement,{getChild:function(n){var t=this;return arguments.length<1?t._.children.concat():(n.splice||(n=[n]),n.length<2?t._.children[n[0]]:t._.children[n[0]]&&t._.children[n[0]].getChild?t._.children[n[0]].getChild(n.slice(1,n.length)):null)}},!0),e.dialog.vbox.prototype=new e.dialog.hbox,function(){var t={build:function(t,i,r){for(var s=i.children,f,h=[],c=[],o,u=0;u<s.length&&(f=s[u]);u++)o=[],h.push(o),c.push(n.dialog._.uiElementBuilders[f.type].build(t,f,o));return new e.dialog[i.type](t,c,h,r,i)}};n.dialog.addUIElement("hbox",t),n.dialog.addUIElement("vbox",t)}(),n.dialogCommand=function(n){this.dialogName=n},n.dialogCommand.prototype={exec:function(n){n.openDialog(this.dialogName)},canUndo:!1},function(){var t=/^([a]|[^a])+$/,i=/^\d*$/,r=/^\d*(?:\.\d+)?$/;n.VALIDATE_OR=1,n.VALIDATE_AND=2,n.dialog.validate={functions:function(){return function(){for(var t=this,e=t&&t.getValue?t.getValue():arguments[0],u=undefined,f=2,r=[],i,n=0;n<arguments.length;n++)if(typeof arguments[n]=="function")r.push(arguments[n]);else break;for(n<arguments.length&&typeof arguments[n]=="string"&&(u=arguments[n],n++),n<arguments.length&&typeof arguments[n]=="number"&&(f=arguments[n]),i=f==2?!0:!1,n=0;n<r.length;n++)i=f==2?i&&r[n](e):i||r[n](e);return i?!0:(u!==undefined&&alert(u),t&&(t.select||t.focus)&&(t.select||t.focus()),!1)}},regex:function(n,t){return function(){var i=this,r=i&&i.getValue?i.getValue():arguments[0];return n.test(r)?!0:(t!==undefined&&alert(t),i&&(i.select||i.focus)&&(i.select?i.select():i.focus()),!1)}},notEmpty:function(n){return this.regex(t,n)},integer:function(n){return this.regex(i,n)},number:function(n){return this.regex(r,n)},equals:function(n,t){return this.functions(function(t){return t==n},t)},notEqual:function(n,t){return this.functions(function(t){return t!=n},t)}}}()}(),t.extend(n.editor.prototype,{openDialog:function(t,i){var u=n.dialog._.dialogDefinitions[t],f,r;if(typeof u=="function")return f=this._.storedDialogs||(this._.storedDialogs={}),r=f[t]||(f[t]=new n.dialog(this,t)),i&&i.call(r,r),r.show(),r;if(u=="failed")throw new Error('[CKEDITOR.dialog.openDialog] Dialog "'+t+'" failed when loading definition.');var e=n.document.getBody(),o=e.$.style.cursor,s=this;return e.setStyle("cursor","wait"),n.scriptLoader.load(n.getUrl(u),function(){typeof n.dialog._.dialogDefinitions[t]!="function"&&(n.dialog._.dialogDefinitions[t]="failed"),s.openDialog(t,i),e.setStyle("cursor",o)}),null}}),f.add("dialog",{requires:["dialogui"]}),f.add("panel",{beforeInit:function(n){n.ui.addHandler(2,e.panel.handler)}}),n.UI_PANEL=2,e.panel=function(n,i){var r=this;i&&t.extend(r,i),t.extend(r,{className:"",css:[]}),r.id=t.getNextNumber(),r.document=n,r._={blocks:{}}},e.panel.handler={create:function(n){return new e.panel(n)}},e.panel.prototype={renderHtml:function(n){var t=[];return this.render(n,t),t.join("")},render:function(n,t){var i=this,u="cke_"+i.id;return t.push('<div class="',n.skinClass,'" lang="',n.langCode,'" style="display:none;z-index:'+(n.config.baseFloatZIndex+1)+'"><div id=',u," dir=",n.lang.dir,' class="cke_panel cke_',n.lang.dir),i.className&&t.push(" ",i.className),t.push('">'),(i.forceIFrame||i.css.length)&&(t.push('<iframe id="',u,'_frame" frameborder="0" src="javascript:void('),t.push(r.isCustomDomain()?"(function(){document.open();document.domain='"+document.domain+"';document.close();})()":"0"),t.push(')"><\/iframe>')),t.push("<\/div><\/div>"),u},getHolderElement:function(){var u=this._.holder,h,c;if(!u){if(this.forceIFrame||this.css.length){var e=this.document.getById("cke_"+this.id+"_frame"),f=e.getParent(),o=f.getAttribute("dir"),s=f.getParent().getAttribute("class"),l=f.getParent().getAttribute("lang"),i=e.getFrameDocument();i.$.open(),r.isCustomDomain()&&(i.$.domain=document.domain),h=t.addFunction(t.bind(function(){this.isLoaded=!0,this.onLoad&&this.onLoad()},this)),i.$.write('<!DOCTYPE html><html dir="'+o+'" class="'+s+'_container" lang="'+l+'"><head><style>.'+s+'_container{visibility:hidden}<\/style><\/head><body class="cke_'+o+" cke_panel_frame "+r.cssClass+'" style="margin:0;padding:0" onload="( window.CKEDITOR || window.parent.CKEDITOR ).tools.callFunction('+h+');"><\/body>'+t.buildStyleHtml(this.css)+"<\/html>"),i.$.close(),c=i.getWindow(),c.$.CKEDITOR=n;i.on("keydown",function(n){var t=this,i=n.data.getKeystroke();if(t._.onKeyDown&&t._.onKeyDown(i)===!1){n.data.preventDefault();return}i==27&&t.onEscape&&t.onEscape()},this);u=i.getBody()}else u=this.document.getById("cke_"+this.id);this._.holder=u}return u},addBlock:function(n,t){var i=this;return t=i._.blocks[n]=t||new e.panel.block(i.getHolderElement()),i._.currentBlock||i.showBlock(n),t},getBlock:function(n){return this._.blocks[n]},showBlock:function(n){var r=this,f=r._.blocks,i=f[n],u=r._.currentBlock;return u&&u.hide(),r._.currentBlock=i,i._.focusIndex=-1,r._.onKeyDown=i.onKeyDown&&t.bind(i.onKeyDown,i),i.show(),i},destroy:function(){this.element&&this.element.remove()}},e.panel.block=t.createClass({$:function(n){var t=this;t.element=n.append(n.getDocument().createElement("div",{attributes:{"class":"cke_panel_block"},styles:{display:"none"}})),t.keys={},t._.focusIndex=-1,t.element.disableContextMenu()},_:{},proto:{show:function(){this.element.setStyle("display","")},hide:function(){var n=this;n.onHide&&n.onHide.call(n)===!0||n.element.setStyle("display","none")},onKeyDown:function(n){var r=this,f=r.keys[n],i,u,t;switch(f){case"next":for(i=r._.focusIndex,u=r.element.getElementsByTag("a");t=u.getItem(++i);)if(t.getAttribute("_cke_focus")&&t.$.offsetWidth){r._.focusIndex=i,t.focus();break}return!1;case"prev":for(i=r._.focusIndex,u=r.element.getElementsByTag("a");i>0&&(t=u.getItem(--i));)if(t.getAttribute("_cke_focus")&&t.$.offsetWidth){r._.focusIndex=i,t.focus();break}return!1;case"click":return i=r._.focusIndex,(t=i>=0&&r.element.getElementsByTag("a").getItem(i))&&(t.$.click?t.$.click():t.$.onclick()),!1}return!0}}}),f.add("listblock",{requires:["panel"],onLoad:function(){e.panel.prototype.addListBlock=function(n,t){return this.addBlock(n,new e.listBlock(this.getHolderElement(),t))},e.listBlock=t.createClass({base:e.panel.block,$:function(n,t){var i=this,r;i.base(n),i.multiSelect=!!t,r=i.keys,r[40]="next",r[9]="next",r[38]="prev",r[2009]="prev",r[32]="click",i._.pendingHtml=[],i._.items={},i._.groups={}},_:{close:function(){this._.started&&(this._.pendingHtml.push("<\/ul>"),delete this._.started)},getClick:function(){return this._.click||(this._.click=t.addFunction(function(n){var t=this,i=!0;if(t.multiSelect?i=t.toggle(n):t.mark(n),t.onClick)t.onClick(n,i)},this)),this._.click}},proto:{add:function(n,i,r){var u=this,f=u._.pendingHtml,e="cke_"+t.getNextNumber();u._.started||(f.push("<ul class=cke_panel_list>"),u._.started=1),u._.items[n]=e,f.push("<li id=",e,' class=cke_panel_listItem><a _cke_focus=1 hidefocus=true title="',r||n,'" href="javascript:void(\'',n,'\')" onclick="CKEDITOR.tools.callFunction(',u._.getClick(),",'",n,"'); return false;\">",i||n,"<\/a><\/li>")},startGroup:function(n){this._.close();var i="cke_"+t.getNextNumber();this._.groups[n]=i,this._.pendingHtml.push("<h1 id=",i," class=cke_panel_grouptitle>",n,"<\/h1>")},commit:function(){var n=this;n._.close(),n.element.appendHtml(n._.pendingHtml.join("")),n._.pendingHtml=[]},toggle:function(n){var t=this.isMarked(n);return t?this.unmark(n):this.mark(n),!t},hideGroup:function(n){var t=this.element.getDocument().getById(this._.groups[n]),i=t&&t.getNext();t&&(t.setStyle("display","none"),i&&i.getName()=="ul"&&i.setStyle("display","none"))},hideItem:function(n){this.element.getDocument().getById(this._.items[n]).setStyle("display","none")},showAll:function(){var i=this._.items,r=this._.groups,u=this.element.getDocument(),f,e,t,n;for(f in i)u.getById(i[f]).setStyle("display","");for(e in r)t=u.getById(r[e]),n=t.getNext(),t.setStyle("display",""),n&&n.getName()=="ul"&&n.setStyle("display","")},mark:function(n){var t=this;t.multiSelect||t.unmarkAll(),t.element.getDocument().getById(t._.items[n]).addClass("cke_selected")},unmark:function(n){this.element.getDocument().getById(this._.items[n]).removeClass("cke_selected")},unmarkAll:function(){var n=this._.items,i=this.element.getDocument(),t;for(t in n)i.getById(n[t]).removeClass("cke_selected")},isMarked:function(n){return this.element.getDocument().getById(this._.items[n]).hasClass("cke_selected")},focus:function(n){if(this._.focusIndex=-1,n){for(var t=this.element.getDocument().getById(this._.items[n]).getFirst(),u=this.element.getElementsByTag("a"),i,r=-1;i=u.getItem(++r);)if(i.equals(t)){this._.focusIndex=r;break}setTimeout(function(){t.focus()},0)}}}})}}),f.add("dialogui"),function(){var f=function(n){var i=this,r,u;for(i._||(i._={}),i._["default"]=i._.initValue=n["default"]||"",r=[i._],u=1;u<arguments.length;u++)r.push(arguments[u]);return r.push(!0),t.extend.apply(t,r),i._},a={build:function(n,t,i){return new e.dialog.textInput(n,t,i)}},s={build:function(n,t,i){return new e.dialog[t.type](n,t,i)}},h={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(){this.setValue(this.getInitValue())},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},c=t.extend({},e.dialog.uiElement.prototype.eventProcessors,{onChange:function(n,t){if(!this._.domOnChangeRegistered){n.on("load",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this);this._.domOnChangeRegistered=!0}this.on("change",t)}},!0),v=/^on([A-Z]\w+)/,l=function(n){for(var t in n)(v.test(t)||t=="title"||t=="type")&&delete n[t];return n};t.extend(e.dialog,{labeledElement:function(i,r,u,o){var s,c,h;arguments.length<4||(s=f.call(this,r),s.labelId=t.getNextNumber()+"_label",c=this._.children=[],h=function(){var u=[],f;return r.labelLayout!="horizontal"?u.push('<div class="cke_dialog_ui_labeled_label" id="',s.labelId,'" >',r.label,"<\/div>",'<div class="cke_dialog_ui_labeled_content">',o(i,r),"<\/div>"):(f={type:"hbox",widths:r.widths,padding:0,children:[{type:"html",html:'<span class="cke_dialog_ui_labeled_label" id="'+s.labelId+'">'+t.htmlEncode(r.label)+"<\/span>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content">'+o(i,r)+"<\/span>"}]},n.dialog._.uiElementBuilders.hbox.build(i,f,u)),u.join("")},e.dialog.uiElement.call(this,i,r,u,"div",null,null,h))},textInput:function(n,i,r){var h,u,s,o,c;if(!(arguments.length<3)){f.call(this,i),h=this._.inputId=t.getNextNumber()+"_textInput",u={"class":"cke_dialog_ui_input_"+i.type,id:h,type:"text"},i.validate&&(this.validate=i.validate),i.maxLength&&(u.maxlength=i.maxLength),i.size&&(u.size=i.size),s=this,o=!1;n.on("load",function(){s.getInputElement().on("keydown",function(n){n.data.getKeystroke()==13&&(o=!0)});s.getInputElement().on("keyup",function(t){t.data.getKeystroke()==13&&o&&(n.getButton("ok")&&setTimeout(function(){n.getButton("ok").click()},0),o=!1)},null,null,1e3)});c=function(){var n=['<div class="cke_dialog_ui_input_',i.type,'"'],t;i.width&&n.push('style="width:'+i.width+'" '),n.push("><input ");for(t in u)n.push(t+'="'+u[t]+'" ');return n.push(" /><\/div>"),n.join("")},e.dialog.labeledElement.call(this,n,i,r,c)}},textarea:function(n,i,r){var o;if(!(arguments.length<3)){f.call(this,i);var s=this,h=this._.inputId=t.getNextNumber()+"_textarea",u={};i.validate&&(this.validate=i.validate),u.rows=i.rows||5,u.cols=i.cols||20,o=function(){var n=['<div class="cke_dialog_ui_input_textarea"><textarea class="cke_dialog_ui_input_textarea" id="',h,'" '],i;for(i in u)n.push(i+'="'+t.htmlEncode(u[i])+'" ');return n.push(">",t.htmlEncode(s._["default"]),"<\/textarea><\/div>"),n.join("")},e.dialog.labeledElement.call(this,n,i,r,o)}},checkbox:function(n,i,r){var u,o;arguments.length<3||(u=f.call(this,i,{"default":!!i["default"]}),i.validate&&(this.validate=i.validate),o=function(){var o=t.extend({},i,{id:i.id?i.id+"_checkbox":t.getNextNumber()+"_checkbox"},!0),r=[],f={"class":"cke_dialog_ui_checkbox_input",type:"checkbox"};return l(o),i["default"]&&(f.checked="checked"),u.checkbox=new e.dialog.uiElement(n,o,r,"input",null,f),r.push(' <label for="',f.id,'">',t.htmlEncode(i.label),"<\/label>"),r.join("")},e.dialog.uiElement.call(this,n,i,r,"span",null,null,o))},radio:function(n,i,r){if(!(arguments.length<3)){f.call(this,i),this._["default"]||(this._["default"]=this._.initValue=i.items[0][1]),i.validate&&(this.validate=i.valdiate);var u=[],o=this,s=function(){for(var a=[],v=[],w=i.id?i.id+"_radio":t.getNextNumber()+"_radio",f=0;f<i.items.length;f++){var r=i.items[f],b=r[2]!==undefined?r[2]:r[0],y=r[1]!==undefined?r[1]:r[0],h=t.extend({},i,{id:t.getNextNumber()+"_radio_input",title:null,type:null},!0),p=t.extend({},h,{id:null,title:b},!0),c={type:"radio","class":"cke_dialog_ui_radio_input",name:w,value:y},s=[];o._["default"]==y&&(c.checked="checked"),l(h),l(p),u.push(new e.dialog.uiElement(n,h,s,"input",null,c)),s.push(" "),new e.dialog.uiElement(n,p,s,"label",null,{"for":c.id},r[0]),a.push(s.join(""))}return new e.dialog.hbox(n,[],a,v),v.join("")};e.dialog.labeledElement.call(this,n,i,r,s),this._.children=u}},button:function(i,r,u){var o,s;if(arguments.length){typeof r=="function"&&(r=r(i.getParentEditor())),f.call(this,r,{disabled:r.disabled||!1}),n.event.implementOn(this),o=this;i.on("load",function(){var n=this.getElement();(function(){n.on("click",function(n){o.fire("click",{dialog:o.getDialog()}),n.data.preventDefault()})})(),n.unselectable()},this);s=t.extend({},r),delete s.style,e.dialog.uiElement.call(this,i,s,u,"a",null,{style:r.style,href:"javascript:void(0)",title:r.label,hidefocus:"true","class":r["class"]},'<span class="cke_dialog_ui_button">'+t.htmlEncode(r.label)+"<\/span>")}},select:function(n,i,r){var u,o;arguments.length<3||(u=f.call(this,i),i.validate&&(this.validate=i.validate),o=function(){var s=t.extend({},i,{id:i.id?i.id+"_select":t.getNextNumber()+"_select"},!0),h=[],c=[],o={"class":"cke_dialog_ui_input_select"},f,r;for(i.size!=undefined&&(o.size=i.size),i.multiple!=undefined&&(o.multiple=i.multiple),l(s),f=0;f<i.items.length&&(r=i.items[f]);f++)c.push('<option value="',t.htmlEncode(r[1]!==undefined?r[1]:r[0]),'" /> ',t.htmlEncode(r[0]));return u.select=new e.dialog.uiElement(n,s,h,"select",null,o,c.join("")),h.join("")},e.dialog.labeledElement.call(this,n,i,r,o))},file:function(i,u,o){var s,h;if(!(arguments.length<3)){u["default"]===undefined&&(u["default"]=""),s=t.extend(f.call(this,u),{definition:u,buttons:[]}),u.validate&&(this.validate=u.validate),h=function(){s.frameId=t.getNextNumber()+"_fileInput";var i=r.isCustomDomain(),n=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" id="',s.frameId,'" title="',u.label,'" src="javascript:void('];return n.push(i?"(function(){document.open();document.domain='"+document.domain+"';document.close();})()":"0"),n.push(')"><\/iframe>'),n.join("")};i.on("load",function(){var t=n.document.getById(s.frameId),i=t.getParent();i.addClass("cke_dialog_ui_input_file")});e.dialog.labeledElement.call(this,i,u,o,h)}},fileButton:function(n,i,r){var h,s,u,o;if(!(arguments.length<3)){h=f.call(this,i),s=this,i.validate&&(this.validate=i.validate),u=t.extend({},i),o=u.onClick,u.className=(u.className?u.className+" ":"")+"cke_dialog_ui_button",u.onClick=function(t){var r=i["for"];o&&o.call(this,t)===!1||(n.getContentElement(r[0],r[1]).submit(),this.disable())};n.on("load",function(){n.getContentElement(i["for"][0],i["for"][1])._.buttons.push(s)});e.dialog.button.call(this,n,u,r)}},html:function(){var n=/^\s*<[\w:]+\s+([^>]*)?>/,t=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,i=/\/$/;return function(r,u,f){var h,c,s,l,o,a,v;arguments.length<3||(h=[],s=u.html,s.charAt(0)!="<"&&(s="<span>"+s+"<\/span>"),u.focus&&(a=this.focus,this.focus=function(){a.call(this),u.focus.call(this),this.fire("focus")},u.isFocusable&&(v=this.isFocusable,this.isFocusable=v),this.keyboardFocusable=!0),e.dialog.uiElement.call(this,r,u,h,"span",null,null,""),c=h.join(""),l=c.match(n),o=s.match(t)||["","",""],i.test(o[1])&&(o[1]=o[1].slice(0,-1),o[2]="/"+o[2]),f.push([o[1]," ",l[1]||"",o[2]].join("")))}}()},!0),e.dialog.html.prototype=new e.dialog.uiElement,e.dialog.labeledElement.prototype=t.extend(new e.dialog.uiElement,{setLabel:function(t){var r=n.document.getById(this._.labelId);return r.getChildCount()<1?new i.text(t,n.document).appendTo(r):r.getChild(0).$.nodeValue=t,this},getLabel:function(){var t=n.document.getById(this._.labelId);return!t||t.getChildCount()<1?"":t.getChild(0).getText()},eventProcessors:c},!0),e.dialog.button.prototype=t.extend(new e.dialog.uiElement,{click:function(){var n=this;return n._.disabled?(n.getElement().$.blur(),!1):n.fire("click",{dialog:n._.dialog})},enable:function(){this._.disabled=!1;var n=this.getElement();n&&n.removeClass("disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:t.extend({},e.dialog.uiElement.prototype.eventProcessors,{onClick:function(n,t){this.on("click",t)}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),e.dialog.textInput.prototype=t.extend(new e.dialog.labeledElement,{getInputElement:function(){return n.document.getById(this._.inputId)},focus:function(){var n=this.selectParentTab();setTimeout(function(){var t=n.getInputElement();t&&t.$.focus()},0)},select:function(){var n=this.selectParentTab();setTimeout(function(){var t=n.getInputElement();t&&(t.$.focus(),t.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(n){return n=n||"",e.dialog.uiElement.prototype.setValue.call(this,n)},keyboardFocusable:!0},h,!0),e.dialog.textarea.prototype=new e.dialog.textInput,e.dialog.select.prototype=t.extend(new e.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(n,t,i){var r=new o("option",this.getDialog().getParentEditor().document),f=this.getInputElement().$;return r.$.text=n,r.$.value=t===undefined||t===null?n:t,i===undefined||i===null?u?f.add(r.$):f.add(r.$,null):f.add(r.$,i),this},remove:function(n){var t=this.getInputElement().$;return t.remove(n),this},clear:function(){for(var n=this.getInputElement().$;n.length>0;)n.remove(0);return this},keyboardFocusable:!0},h,!0),e.dialog.checkbox.prototype=t.extend(new e.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(n){this.getInputElement().$.checked=n,this.fire("change",{value:n})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(n,t){if(u){n.on("load",function(){var n=this._.checkbox.getElement();n.on("propertychange",function(t){t=t.data.$,t.propertyName=="checked"&&this.fire("change",{value:n.$.checked})},this)},this);this.on("change",t)}else return c.onChange.apply(this,arguments);return null}},keyboardFocusable:!0},h,!0),e.dialog.radio.prototype=t.extend(new e.dialog.uiElement,{setValue:function(n){for(var r=this._.children,i,t=0;t<r.length&&(i=r[t]);t++)i.getElement().$.checked=i.getValue()==n;this.fire("change",{value:n})},getValue:function(){for(var t=this._.children,n=0;n<t.length;n++)if(t[n].getElement().$.checked)return t[n].getValue();return null},accessKeyUp:function(){for(var t=this._.children,n=0;n<t.length;n++)if(t[n].getElement().$.checked){t[n].getElement().focus();return}t[0].getElement().focus()},eventProcessors:{onChange:function(n,t){if(u){n.on("load",function(){for(var t=this._.children,r=this,i,n=0;n<t.length;n++){i=t[n].getElement();i.on("propertychange",function(n){n=n.data.$,n.propertyName=="checked"&&this.$.checked&&r.fire("change",{value:this.getAttribute("value")})})}},this);this.on("change",t)}else return c.onChange.apply(this,arguments);return null}},keyboardFocusable:!0},h,!0),e.dialog.file.prototype=t.extend(new e.dialog.labeledElement,h,{getInputElement:function(){var t=n.document.getById(this._.frameId).getFrameDocument();return t.$.forms.length>0?new o(t.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){return this.getInputElement().getParent().$.action},reset:function(){function o(){var n,o;for(i.$.open(),r.isCustomDomain()&&(i.$.domain=document.domain),n="",f.size&&(n=f.size-(u?7:0)),i.$.write(['<html><head><title><\/title><\/head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" action="',t.htmlEncode(f.action),'">','<input type="file" name="',t.htmlEncode(f.id||"cke_upload"),'" size="',t.htmlEncode(n>0?n:""),'" />',"<\/form>","<\/body><\/html>"].join("")),i.$.close(),o=0;o<e.length;o++)e[o].enable()}var s=n.document.getById(this._.frameId),i=s.getFrameDocument(),f=this._.definition,e=this._.buttons;r.gecko?setTimeout(o,500):o()},getValue:function(){return""},eventProcessors:c,keyboardFocusable:!0},!0),e.dialog.fileButton.prototype=new e.dialog.button,n.dialog.addUIElement("text",a),n.dialog.addUIElement("password",a),n.dialog.addUIElement("textarea",s),n.dialog.addUIElement("checkbox",s),n.dialog.addUIElement("radio",s),n.dialog.addUIElement("button",s),n.dialog.addUIElement("select",s),n.dialog.addUIElement("file",s),n.dialog.addUIElement("fileButton",s),n.dialog.addUIElement("html",s)}(),n.themes.add("default",function(){function i(t,i){var e,u,s,f;if(u=t.config.sharedSpaces,u=u&&u[i],u=u&&n.document.getById(u),u){s='<span class="cke_shared"><span class="'+t.skinClass+" cke_editor_"+t.name+'"><span class="'+r.cssClass+'"><span class="cke_wrapper cke_'+t.lang.dir+'"><span class="cke_editor"><div class="cke_'+i+'"><\/div><\/span><\/span><\/span><\/span><\/span>',f=u.append(o.createFromHtml(s,u.getDocument())),u.getCustomData("cke_hasshared")?f.hide():u.setCustomData("cke_hasshared",1),e=f.getChild([0,0,0,0]);t.on("focus",function(){for(var t=0,n,i=u.getChildren();n=i.getItem(t);t++)n.type==1&&!n.equals(f)&&n.hasClass("cke_shared")&&n.hide();f.show()});t.on("destroy",function(){f.remove()})}return e}return{build:function(n){var u=n.name,s=n.element,v=n.elementMode,a,e,y,p,t;if(s&&v!=0){v==1&&s.hide();var f=n.fire("themeSpace",{space:"top",html:""}).html,h=n.fire("themeSpace",{space:"contents",html:""}).html,c=n.fireOnce("themeSpace",{space:"bottom",html:""}).html,l=h&&n.config.height,w=n.config.tabIndex||n.element.getAttribute("tabindex")||0;h?isNaN(l)||(l+="px"):l="auto",a="",e=n.config.width,e&&(isNaN(e)||(e+="px"),a+="width: "+e+";"),y=f&&i(n,"top"),p=i(n,"bottom"),y&&(y.setHtml(f),f=""),p&&(p.setHtml(c),c=""),t=o.createFromHtml(['<span id="cke_',u,'" onmousedown="return false;" class="',n.skinClass," cke_editor_",u,'" dir="',n.lang.dir,'" title="',r.gecko?" ":"",'" lang="',n.langCode,'" tabindex="'+w+'"'+(a?' style="'+a+'"':"")+'><span class="',r.cssClass,'"><span class="cke_wrapper cke_',n.lang.dir,'"><table class="cke_editor" border="0" cellspacing="0" cellpadding="0"><tbody><tr',f?"":' style="display:none"','><td id="cke_top_',u,'" class="cke_top">',f,"<\/td><\/tr><tr",h?"":' style="display:none"','><td id="cke_contents_',u,'" class="cke_contents" style="height:',l,'">',h,"<\/td><\/tr><tr",c?"":' style="display:none"','><td id="cke_bottom_',u,'" class="cke_bottom">',c,"<\/td><\/tr><\/tbody><\/table><style>.",n.skinClass,"{visibility:hidden;}<\/style><\/span><\/span><\/span>"].join("")),t.getChild([0,0,0,0,0]).unselectable(),t.getChild([0,0,0,0,2]).unselectable(),v==1?t.insertAfter(s):s.append(t),n.container=t,t.disableContextMenu(),n.fireOnce("themeLoaded"),n.fireOnce("uiReady")}},buildDialog:function(n){var h=t.getNextNumber(),f=o.createFromHtml(['<div class="cke_editor_'+n.name.replace(".","\\.")+"_dialog cke_skin_",n.skinName,'" dir="',n.lang.dir,'" lang="',n.langCode,'"><table class="cke_dialog'," "+r.cssClass," cke_",n.lang.dir,'" style="position:absolute"><tr><td><div class="%body"><div id="%title#" class="%title"><\/div><div id="%close_button#" class="%close_button"><span>X<\/span><\/div><div id="%tabs#" class="%tabs"><\/div><table class="%contents"><tr><td id="%contents#" class="%contents"><\/td><\/tr><\/table><div id="%footer#" class="%footer"><\/div><\/div><div id="%tl#" class="%tl"><\/div><div id="%tc#" class="%tc"><\/div><div id="%tr#" class="%tr"><\/div><div id="%ml#" class="%ml"><\/div><div id="%mr#" class="%mr"><\/div><div id="%bl#" class="%bl"><\/div><div id="%bc#" class="%bc"><\/div><div id="%br#" class="%br"><\/div><\/td><\/tr><\/table>',u?"":"<style>.cke_dialog{visibility:hidden;}<\/style>","<\/div>"].join("").replace(/#/g,"_"+h).replace(/%/g,"cke_dialog_")),i=f.getChild([0,0,0,0,0]),e=i.getChild(0),s=i.getChild(1);return e.unselectable(),s.unselectable(),{element:f,parts:{dialog:f.getChild(0),title:e,close:s,tabs:i.getChild(2),contents:i.getChild([3,0,0,0]),footer:i.getChild(4)}}},destroy:function(n){var t=n.container,i;if(u){t.setStyle("display","none"),i=document.body.createTextRange(),i.moveToElementText(t.$);try{i.select()}catch(r){}}t&&t.remove(),n.elementMode==1&&(n.element.show(),delete n.element)}}}()),n.editor.prototype.getThemeSpace=function(t){var i="cke_"+t;return this._[i]||(this._[i]=n.document.getById(i+"_"+this.name))},n.editor.prototype.resize=function(t,i,u,f){var h;/^\d+$/.test(t)&&(t+="px");var o=this.container,s=n.document.getById("cke_contents_"+this.name),e=f?o.getChild(0):o;r.webkit&&e.setStyle("display","none"),e.setStyle("width",t),r.webkit&&(e.$.offsetWidth,e.setStyle("display","")),h=u?0:(e.$.offsetHeight||0)-(s.$.clientHeight||0),s.setStyle("height",Math.max(i-h,0)+"px"),this.fire("resize")},n.editor.prototype.getResizable=function(){return this.container.getChild(0)}})();