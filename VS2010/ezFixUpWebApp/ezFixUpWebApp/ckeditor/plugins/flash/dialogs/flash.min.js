(function(){function n(n,t,u){var f=this,a=e[f.id],c,l,s,h;if(a)for(c=f instanceof CKEDITOR.ui.dialog.checkbox,l=0;l<a.length;l++){s=a[l];switch(s.type){case r:if(!n)continue;if(n.getAttribute(s.name)!==null){h=n.getAttribute(s.name),c?f.setValue(h.toLowerCase()=="true"):f.setValue(h);return}c&&f.setValue(!!s["default"]);break;case o:if(!n)continue;if(s.name in u){h=u[s.name],c?f.setValue(h.toLowerCase()=="true"):f.setValue(h);return}c&&f.setValue(!!s["default"]);break;case i:if(!t)continue;if(t.getAttribute(s.name)){h=t.getAttribute(s.name),c?f.setValue(h.toLowerCase()=="true"):f.setValue(h);return}c&&f.setValue(!!s["default"])}}}function t(n,t,u){var h=this,y=e[h.id],c,l,a,f,s,v;if(y)for(c=h.getValue()==="",l=h instanceof CKEDITOR.ui.dialog.checkbox,a=0;a<y.length;a++){f=y[a];switch(f.type){case r:if(!n)continue;s=h.getValue(),c||l&&s===f["default"]?n.removeAttribute(f.name):n.setAttribute(f.name,s);break;case o:if(!n)continue;s=h.getValue(),c||l&&s===f["default"]?f.name in u&&u[f.name].remove():f.name in u?u[f.name].setAttribute("value",s):(v=CKEDITOR.dom.element.createFromHtml("<cke:param><\/cke:param>",n.getDocument()),v.setAttributes({name:f.name,value:s}),n.getChildCount()<1?v.appendTo(n):v.insertBefore(n.getFirst()));break;case i:if(!t)continue;s=h.getValue(),c||l&&s===f["default"]?t.removeAttribute(f.name):t.setAttribute(f.name,s)}}}for(var r=1,o=2,i=4,e={id:[{type:r,name:"id"}],classid:[{type:r,name:"classid"}],codebase:[{type:r,name:"codebase"}],pluginspage:[{type:i,name:"pluginspage"}],src:[{type:o,name:"movie"},{type:i,name:"src"}],name:[{type:i,name:"name"}],align:[{type:r,name:"align"}],title:[{type:r,name:"title"},{type:i,name:"title"}],"class":[{type:r,name:"class"},{type:i,name:"class"}],width:[{type:r,name:"width"},{type:i,name:"width"}],height:[{type:r,name:"height"},{type:i,name:"height"}],hSpace:[{type:r,name:"hSpace"},{type:i,name:"hSpace"}],vSpace:[{type:r,name:"vSpace"},{type:i,name:"vSpace"}],style:[{type:r,name:"style"},{type:i,name:"style"}],type:[{type:i,name:"type"}]},f=["play","loop","menu","quality","scale","salign","wmode","bgcolor","base","flashvars","allowScriptAccess","allowFullScreen"],u=0;u<f.length;u++)e[f[u]]=[{type:i,name:f[u]},{type:o,name:f[u]}];for(f=["allowFullScreen","play","loop","menu"],u=0;u<f.length;u++)e[f[u]][0]["default"]=e[f[u]][1]["default"]=!0;CKEDITOR.dialog.add("flash",function(i){var u=!i.config.flashEmbedTagOnly,f=i.config.flashAddEmbedTag||i.config.flashEmbedTagOnly,r,e="<div>"+CKEDITOR.tools.htmlEncode(i.lang.image.preview)+'<br><div id="FlashPreviewLoader" style="display:none"><div class="loading">&nbsp;<\/div><\/div><div id="FlashPreviewBox"><\/div><\/div>';return{title:i.lang.flash.title,minWidth:420,minHeight:310,onShow:function(){var n=this,t,s,h,o,l;if(n.fakeImage=n.objectNode=n.embedNode=null,r=new CKEDITOR.dom.element("embeded",i.document),t=n.getSelectedElement(),t&&t.getAttribute("_cke_real_element_type")&&t.getAttribute("_cke_real_element_type")=="flash"){n.fakeImage=t;var f=i.restoreRealElement(t),u=null,e=null,c={};if(f.getName()=="cke:object")for(u=f,s=u.getElementsByTag("embed","cke"),s.count()>0&&(e=s.getItem(0)),h=u.getElementsByTag("param","cke"),o=0,l=h.count();o<l;o++){var a=h.getItem(o),v=a.getAttribute("name"),y=a.getAttribute("value");c[v]=y}else f.getName()=="cke:embed"&&(e=f);n.objectNode=u,n.embedNode=e,n.setupContent(u,e,c,t)}},onOk:function(){var t=this,n=null,r=null,h=null,l,s,e,a,c,o;if(t.fakeImage?(n=t.objectNode,r=t.embedNode):(u&&(n=CKEDITOR.dom.element.createFromHtml("<cke:object><\/cke:object>",i.document),l={classid:"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",codebase:"https://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"},n.setAttributes(l)),f&&(r=CKEDITOR.dom.element.createFromHtml("<cke:embed><\/cke:embed>",i.document),r.setAttributes({type:"application/x-shockwave-flash",pluginspage:"https://www.macromedia.com/go/getflashplayer"}),n&&r.appendTo(n))),n)for(h={},s=n.getElementsByTag("param","cke"),e=0,a=s.count();e<a;e++)h[s.getItem(e).getAttribute("name")]=s.getItem(e);c={},t.commitContent(n,r,h,c),o=i.createFakeElement(n||r,"cke_flash","flash",!0),o.setStyles(c),t.fakeImage?(o.replace(t.fakeImage),i.getSelection().selectElement(o)):i.insertElement(o)},onHide:function(){this.preview&&this.preview.setHtml("")},contents:[{id:"info",label:i.lang.common.generalTab,accessKey:"I",elements:[{type:"vbox",padding:0,children:[{type:"html",html:"<span>"+CKEDITOR.tools.htmlEncode(i.lang.image.url)+"<\/span>"},{type:"hbox",widths:["280px","110px"],align:"right",children:[{id:"src",type:"text",label:"",validate:CKEDITOR.dialog.validate.notEmpty(i.lang.flash.validateSrc),setup:n,commit:t,onLoad:function(){var n=this.getDialog(),t=function(t){r.setAttribute("src",t),n.preview.setHtml('<embed height="100%" width="100%" src="'+CKEDITOR.tools.htmlEncode(r.getAttribute("src"))+'" type="application/x-shockwave-flash"><\/embed>')};n.preview=n.getContentElement("info","preview").getElement().getChild(3);this.on("change",function(n){n.data&&n.data.value&&t(n.data.value)});this.getInputElement().on("change",function(){t(this.getValue())},this)}},{type:"button",id:"browse",filebrowser:"info:src",hidden:!0,align:"center",label:i.lang.common.browseServer}]}]},{type:"hbox",widths:["25%","25%","25%","25%","25%"],children:[{type:"text",id:"width",style:"width:95px",label:i.lang.flash.width,validate:CKEDITOR.dialog.validate.integer(i.lang.flash.validateWidth),setup:function(t,i,r,u){if(n.apply(this,arguments),u){var f=parseInt(u.$.style.width,10);isNaN(f)||this.setValue(f)}},commit:function(n,i,r,u){t.apply(this,arguments),this.getValue()&&(u.width=this.getValue()+"px")}},{type:"text",id:"height",style:"width:95px",label:i.lang.flash.height,validate:CKEDITOR.dialog.validate.integer(i.lang.flash.validateHeight),setup:function(t,i,r,u){if(n.apply(this,arguments),u){var f=parseInt(u.$.style.height,10);isNaN(f)||this.setValue(f)}},commit:function(n,i,r,u){t.apply(this,arguments),this.getValue()&&(u.height=this.getValue()+"px")}},{type:"text",id:"hSpace",style:"width:95px",label:i.lang.flash.hSpace,validate:CKEDITOR.dialog.validate.integer(i.lang.flash.validateHSpace),setup:n,commit:t},{type:"text",id:"vSpace",style:"width:95px",label:i.lang.flash.vSpace,validate:CKEDITOR.dialog.validate.integer(i.lang.flash.validateVSpace),setup:n,commit:t}]},{type:"vbox",children:[{type:"html",id:"preview",style:"width:95%;",html:e}]}]},{id:"Upload",hidden:!0,filebrowser:"uploadButton",label:i.lang.common.upload,elements:[{type:"file",id:"upload",label:i.lang.common.upload,size:38},{type:"fileButton",id:"uploadButton",label:i.lang.common.uploadSubmit,filebrowser:"info:src","for":["Upload","upload"]}]},{id:"properties",label:i.lang.flash.propertiesTab,elements:[{type:"hbox",widths:["50%","50%"],children:[{id:"scale",type:"select",label:i.lang.flash.scale,"default":"",style:"width : 100%;",items:[[i.lang.common.notSet,""],[i.lang.flash.scaleAll,"showall"],[i.lang.flash.scaleNoBorder,"noborder"],[i.lang.flash.scaleFit,"exactfit"]],setup:n,commit:t},{id:"allowScriptAccess",type:"select",label:i.lang.flash.access,"default":"",style:"width : 100%;",items:[[i.lang.common.notSet,""],[i.lang.flash.accessAlways,"always"],[i.lang.flash.accessSameDomain,"samedomain"],[i.lang.flash.accessNever,"never"]],setup:n,commit:t}]},{type:"hbox",widths:["50%","50%"],children:[{id:"wmode",type:"select",label:i.lang.flash.windowMode,"default":"",style:"width : 100%;",items:[[i.lang.common.notSet,""],[i.lang.flash.windowModeWindow,"window"],[i.lang.flash.windowModeOpaque,"opaque"],[i.lang.flash.windowModeTransparent,"transparent"]],setup:n,commit:t},{id:"quality",type:"select",label:i.lang.flash.quality,"default":"high",style:"width : 100%;",items:[[i.lang.common.notSet,""],[i.lang.flash.qualityBest,"best"],[i.lang.flash.qualityHigh,"high"],[i.lang.flash.qualityAutoHigh,"autohigh"],[i.lang.flash.qualityMedium,"medium"],[i.lang.flash.qualityAutoLow,"autolow"],[i.lang.flash.qualityLow,"low"]],setup:n,commit:t}]},{type:"hbox",widths:["50%","50%"],children:[{id:"align",type:"select",label:i.lang.flash.align,"default":"",style:"width : 100%;",items:[[i.lang.common.notSet,""],[i.lang.flash.alignLeft,"left"],[i.lang.flash.alignAbsBottom,"absBottom"],[i.lang.flash.alignAbsMiddle,"absMiddle"],[i.lang.flash.alignBaseline,"baseline"],[i.lang.flash.alignBottom,"bottom"],[i.lang.flash.alignMiddle,"middle"],[i.lang.flash.alignRight,"right"],[i.lang.flash.alignTextTop,"textTop"],[i.lang.flash.alignTop,"top"]],setup:n,commit:t},{type:"html",html:"<div><\/div>"}]},{type:"vbox",padding:0,children:[{type:"html",html:CKEDITOR.tools.htmlEncode(i.lang.flash.flashvars)},{type:"checkbox",id:"menu",label:i.lang.flash.chkMenu,"default":!0,setup:n,commit:t},{type:"checkbox",id:"play",label:i.lang.flash.chkPlay,"default":!0,setup:n,commit:t},{type:"checkbox",id:"loop",label:i.lang.flash.chkLoop,"default":!0,setup:n,commit:t},{type:"checkbox",id:"allowFullScreen",label:i.lang.flash.chkFull,"default":!0,setup:n,commit:t}]}]},{id:"advanced",label:i.lang.common.advancedTab,elements:[{type:"hbox",widths:["45%","55%"],children:[{type:"text",id:"id",label:i.lang.common.id,setup:n,commit:t},{type:"text",id:"title",label:i.lang.common.advisoryTitle,setup:n,commit:t}]},{type:"hbox",widths:["45%","55%"],children:[{type:"text",id:"bgcolor",label:i.lang.flash.bgcolor,setup:n,commit:t},{type:"text",id:"class",label:i.lang.common.cssClass,setup:n,commit:t}]},{type:"text",id:"style",label:i.lang.common.cssStyle,setup:n,commit:t}]}]}})})();