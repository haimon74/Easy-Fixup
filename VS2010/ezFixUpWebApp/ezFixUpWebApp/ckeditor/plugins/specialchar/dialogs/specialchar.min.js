CKEDITOR.dialog.add("specialchar",function(n){var r,f=function(t){var i,u;i=t.data?t.data.getTarget():new CKEDITOR.dom.element(t),i.getName()=="a"&&(u=i.getChild(0).getHtml())&&(i.removeClass("cke_light_background"),r.hide(),n.insertHtml(u))},e=CKEDITOR.tools.addFunction(f),u,i=function(n,i){var f,e;i=i||n.data.getTarget(),i.getName()=="span"&&(i=i.getParent()),i.getName()=="a"&&(f=i.getChild(0).getHtml())&&(u&&t(null,u),e=r.getContentElement("info","htmlPreview").getElement(),r.getContentElement("info","charPreview").getElement().setHtml(f),e.setHtml(CKEDITOR.tools.htmlEncode(f)),i.getParent().addClass("cke_light_background"),u=i)},t=function(n,t){t=t||n.data.getTarget(),t.getName()=="span"&&(t=t.getParent()),t.getName()=="a"&&(r.getContentElement("info","charPreview").getElement().setHtml("&nbsp;"),r.getContentElement("info","htmlPreview").getElement().setHtml("&nbsp;"),t.getParent().removeClass("cke_light_background"),u=undefined)},o=CKEDITOR.tools.addFunction(function(n){n=new CKEDITOR.dom.event(n);var u=n.getTarget(),e,r,o=n.getKeystroke();switch(o){case 39:(e=u.getParent().getNext())&&(r=e.getChild(0),r.type==1&&(r.focus(),t(null,u),i(null,r))),n.preventDefault();break;case 37:(e=u.getParent().getPrevious())&&(r=e.getChild(0),r.focus(),t(null,u),i(null,r)),n.preventDefault();break;case 38:(e=u.getParent().getParent().getPrevious())&&(r=e.getChild([u.getParent().getIndex(),0]),r.focus(),t(null,u),i(null,r)),n.preventDefault();break;case 40:(e=u.getParent().getParent().getNext())&&(r=e.getChild([u.getParent().getIndex(),0]),r&&r.type==1&&(r.focus(),t(null,u),i(null,r))),n.preventDefault();break;case 32:f({data:n}),n.preventDefault();break;case 9:(e=u.getParent().getNext())?(r=e.getChild(0),r.type==1?(r.focus(),t(null,u),i(null,r),n.preventDefault(!0)):t(null,u)):(e=u.getParent().getParent().getNext())&&(r=e.getChild([0,0]),r&&r.type==1?(r.focus(),t(null,u),i(null,r),n.preventDefault(!0)):t(null,u));break;case CKEDITOR.SHIFT+9:(e=u.getParent().getPrevious())?(r=e.getChild(0),r.focus(),t(null,u),i(null,r),n.preventDefault(!0)):(e=u.getParent().getParent().getPrevious())?(r=e.getLast().getChild(0),r.focus(),t(null,u),i(null,r),n.preventDefault(!0)):t(null,u);break;default:return}});return{title:n.lang.specialChar.title,minWidth:430,minHeight:280,buttons:[CKEDITOR.dialog.cancelButton],charColumns:17,chars:["!","&quot;","#","$","%","&amp;","'","(",")","*","+","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","&lt;","=","&gt;","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","&euro;","&lsquo;","&rsquo;","&rsquo;","&ldquo;","&rdquo;","&ndash;","&mdash;","&iexcl;","&cent;","&pound;","&curren;","&yen;","&brvbar;","&sect;","&uml;","&copy;","&ordf;","&laquo;","&not;","&reg;","&macr;","&deg;","&plusmn;","&sup2;","&sup3;","&acute;","&micro;","&para;","&middot;","&cedil;","&sup1;","&ordm;","&raquo;","&frac14;","&frac12;","&frac34;","&iquest;","&Agrave;","&Aacute;","&Acirc;","&Atilde;","&Auml;","&Aring;","&AElig;","&Ccedil;","&Egrave;","&Eacute;","&Ecirc;","&Euml;","&Igrave;","&Iacute;","&Icirc;","&Iuml;","&ETH;","&Ntilde;","&Ograve;","&Oacute;","&Ocirc;","&Otilde;","&Ouml;","&times;","&Oslash;","&Ugrave;","&Uacute;","&Ucirc;","&Uuml;","&Yacute;","&THORN;","&szlig;","&agrave;","&aacute;","&acirc;","&atilde;","&auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&ouml;","&divide;","&oslash;","&ugrave;","&uacute;","&ucirc;","&uuml;","&uuml;","&yacute;","&thorn;","&yuml;","&OElig;","&oelig;","&#372;","&#374","&#373","&#375;","&sbquo;","&#8219;","&bdquo;","&hellip;","&trade;","&#9658;","&bull;","&rarr;","&rArr;","&hArr;","&diams;","&asymp;"],onLoad:function(){for(var u=this.definition.charColumns,i=this.definition.chars,n=['<table style="width: 320px; height: 100%; border-collapse: separate;" align="center" cellspacing="2" cellpadding="2" border="0">'],t=0,r;t<i.length;){for(n.push("<tr>"),r=0;r<u;r++,t++)i[t]?n.push('<td class="cke_dark_background" style="cursor: default"><a href="javascript: void(0);" style="cursor: inherit; display: block; height: 1.25em; margin-top: 0.25em; text-align: center;" title="',i[t].replace(/&/g,"&amp;"),'" onkeydown="CKEDITOR.tools.callFunction( '+o+', event, this )" onclick="CKEDITOR.tools.callFunction('+e+', this); return false;" tabindex="-1"><span style="margin: 0 auto;cursor: inherit">'+i[t]+"<\/span><\/a>"):n.push('<td class="cke_dark_background">&nbsp;'),n.push("<\/td>");n.push("<\/tr>")}n.push("<\/tbody><\/table>"),this.getContentElement("info","charContainer").getElement().setHtml(n.join(""))},contents:[{id:"info",label:n.lang.common.generalTab,title:n.lang.common.generalTab,padding:0,align:"top",elements:[{type:"hbox",align:"top",widths:["320px","90px"],children:[{type:"html",id:"charContainer",html:"",onMouseover:i,onMouseout:t,focus:function(){var n=this.getElement().getChild([0,0,0,0,0]);setTimeout(function(){n.focus(),i(null,n)})},onShow:function(){var n=this.getElement().getChild([0,0,0,0,0]);setTimeout(function(){n.focus(),i(null,n)})},onLoad:function(n){r=n.sender}},{type:"hbox",align:"top",widths:["100%"],children:[{type:"vbox",align:"top",children:[{type:"html",html:"<div><\/div>"},{type:"html",id:"charPreview",style:"border:1px solid #eeeeee;background-color:#EAEAD1;font-size:28px;height:40px;width:70px;padding-top:9px;font-family:'Microsoft Sans Serif',Arial,Helvetica,Verdana;text-align:center;",html:"<div>&nbsp;<\/div>"},{type:"html",id:"htmlPreview",style:"border:1px solid #eeeeee;background-color:#EAEAD1;font-size:14px;height:20px;width:70px;padding-top:2px;font-family:'Microsoft Sans Serif',Arial,Helvetica,Verdana;text-align:center;",html:"<div>&nbsp;<\/div>"}]}]}]}]}]}});