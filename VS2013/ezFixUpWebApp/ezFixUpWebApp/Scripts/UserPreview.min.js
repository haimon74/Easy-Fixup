var mouseX,mouseY,lastPreviewedUsername,userPreviewLoading=false,userPreviewCancelled=false;function InitializeMouseTracking(){$addHandler($get(bodyId),"mousemove",trackMouse)}function trackMouse(a){mouseX=a.clientX;mouseY=a.clientY}function showUserPreview(a){if(typeof ezFixUp=="undefined"||userPreviewLoading)return;userPreviewLoading=true;ezFixUp.Services.OnlineCheck.LoadUserPreviewInfo(a,OnLoadUserPreviewInfoSucceeded,OnLoadUserPreviewInfoError)}function OnLoadUserPreviewInfoSucceeded(a){if(userPreviewCancelled){userPreviewCancelled=false;userPreviewLoading=false;return}if(a==null||lastPreviewedUsername==a.Username)return;var b,c;if(document.documentElement&&document.documentElement.scrollTop){b=document.documentElement.scrollLeft;c=document.documentElement.scrollTop}else{b=document.body.scrollLeft;c=document.body.scrollTop}lastPreviewedUsername=a.Username;if(a.ThumbnailUrl!=null&&a.ThumbnailUrl!="")$get("divUserPreviewImage").innerHTML=String.format('<img src="{0}" class="photoframe">',a.ThumbnailUrl);else $get("divUserPreviewImage").innerHTML="";$get("divUserPreviewDetails").innerHTML=String.format("<b>{0}</b><br>{1}/{2}<br>{3}",a.Username,a.Gender,a.Age,a.LastOnline);$get("divUserPreview").style.left=b+mouseX+10+"px";$get("divUserPreview").style.top=c+mouseY-20+"px";$get("divUserPreview").style.display="";userPreviewLoading=false}function OnLoadUserPreviewInfoError(){}function hideUserPreview(){lastPreviewedUsername=null;$get("divUserPreview").style.display="none";if(userPreviewLoading)userPreviewCancelled=true};