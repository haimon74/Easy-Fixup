var updateOnlineTimer,updateOnlineLock=false,currentNotificationDivOffset=0,scrollSpeed=1,scrollSign=+1,scrollStarted=false;function InitializeOnlineCheck(a){updateOnlineTimer=setInterval("UpdateOnline()",a);UpdateOnline()}function ShowNotification(){document.getElementById("divNotificationInner").scrollTop=0;$get("divNotificationHeader").style.visibility="visible";$get("divNotificationInner").style.visibility="visible";if($get("ctl00_divNotification"))$get("ctl00_divNotification").style.visibility="visible";if($get("ctl00_ctl00_divNotification"))$get("ctl00_ctl00_divNotification").style.visibility="visible"}function HideNotification(){$get("divNotificationInner").innerHTML="";$get("divNotificationHeader").style.visibility="hidden";$get("divNotificationInner").style.visibility="hidden";if($get("ctl00_divNotification"))$get("ctl00_divNotification").style.visibility="hidden";if($get("ctl00_ctl00_divNotification"))$get("ctl00_ctl00_divNotification").style.visibility="hidden"}function UpdateOnline(){if(updateOnlineLock==true)return;updateOnlineLock=true;ezFixUp.Services.OnlineCheck.UpdateOnline(OnUpdateOnlineSucceeded,OnUpdateOnlineError)}function OnUpdateOnlineSucceeded(c){try{if(c==null)return;if(c.Notifications!=null&&c.Notifications.length){for(var d=0;d<c.Notifications.length;d++){var a=c.Notifications[d];if(a.Type=="NewMessageNotification"){var b='<table cellpadding="0" cellspacing="0" class="innerwrap"><tr><td class="tdleft" align="center" valign="middle"><img src="'+a.ThumbnailUrl+'" /></td><td class="tdright" valign="middle">'+a.Text+'</td></tr></table><div class="clear"></div>';b='<div class="NotificationInactive" onmouseover="OnNotificationMouseOver(this);" onmouseout="OnNotificationMouseOut(this);" onclick="window.location.href = \'ShowMessage.aspx?mid='+a.MessageId+"'\">"+b+"</div>";$get("divNotificationInner").innerHTML+=b;ShowNotification()}if(a.Type=="GenericEventNotification"){var b='<table cellpadding="0" cellspacing="0" class="innerwrap"><tr><td class="tdleft" align="center" valign="middle"><img src="'+a.ThumbnailUrl+'" /></td><td class="tdright" valign="middle">'+a.Text+'</td></tr></table><div class="clear"></div>';b='<div class="NotificationInactive" onmouseover="OnNotificationMouseOver(this);" onmouseout="OnNotificationMouseOut(this);" onclick="window.location.href = \''+a.RedirectUrl+"'\">"+b+"</div>";$get("divNotificationInner").innerHTML+=b;ShowNotification()}}if(!scrollStarted){scrollStarted=true;ScrollNotificationDiv()}}}finally{updateOnlineLock=false}}function OnNotificationMouseOver(a){a.className="NotificationHover"}function OnNotificationMouseOut(a){a.className="NotificationInactive"}function OnUpdateOnlineError(){}function ScrollNotificationDiv(){var b=document.getElementById("divNotificationInner"),a=1e3;if(b.scrollHeight>65){currentNotificationDivOffset=currentNotificationDivOffset+scrollSpeed*scrollSign;b.scrollTop=currentNotificationDivOffset;if(scrollSign==1&&currentNotificationDivOffset>b.scrollHeight-65){scrollSign=-1;a=1e3}else if(scrollSign==-1&&currentNotificationDivOffset<=0){scrollSign=+1;a=1e3}else a=currentNotificationDivOffset%65==0?1e3:50}setTimeout("ScrollNotificationDiv()",a)}var mouseX,mouseY,lastPreviewedUsername,userPreviewLoading=false,userPreviewCancelled=false;function InitializeMouseTracking(){$addHandler($get(bodyId),"mousemove",trackMouse)}function trackMouse(a){mouseX=a.clientX;mouseY=a.clientY}function showUserPreview(a){if(typeof ezFixUp=="undefined"||userPreviewLoading)return;userPreviewLoading=true;ezFixUp.Services.OnlineCheck.LoadUserPreviewInfo(a,OnLoadUserPreviewInfoSucceeded,OnLoadUserPreviewInfoError)}function OnLoadUserPreviewInfoSucceeded(a){if(userPreviewCancelled){userPreviewCancelled=false;userPreviewLoading=false;return}if(a==null||lastPreviewedUsername==a.Username)return;var b,c;if(document.documentElement&&document.documentElement.scrollTop){b=document.documentElement.scrollLeft;c=document.documentElement.scrollTop}else{b=document.body.scrollLeft;c=document.body.scrollTop}lastPreviewedUsername=a.Username;if(a.ThumbnailUrl!=null&&a.ThumbnailUrl!="")$get("divUserPreviewImage").innerHTML=String.format('<img src="{0}" class="photoframe">',a.ThumbnailUrl);else $get("divUserPreviewImage").innerHTML="";$get("divUserPreviewDetails").innerHTML=String.format("<b>{0}</b><br>{1}/{2}<br>{3}",a.Username,a.Gender,a.Age,a.LastOnline);$get("divUserPreview").style.left=b+mouseX+10+"px";$get("divUserPreview").style.top=c+mouseY-20+"px";$get("divUserPreview").style.display="";userPreviewLoading=false}function OnLoadUserPreviewInfoError(){}function hideUserPreview(){lastPreviewedUsername=null;$get("divUserPreview").style.display="none";if(userPreviewLoading)userPreviewCancelled=true}(function(){jQuery.fn.changecss=function(b,a,c){return this.each(function(){if(b==""||a==""||c=="")return;var e=false,g=false,h=document.styleSheets.length;if(document.styleSheets[0].rules)e="rules";else if(document.styleSheets[0].cssRules)e="cssRules";for(var d=0;d<h;d++){for(var f=0;f<document.styleSheets[d][e].length;f++)if(document.styleSheets[d][e][f].selectorText==b)if(document.styleSheets[d][e][f].style[a]){document.styleSheets[d][e][f].style[a]=c;g=true;break}if(!g)if(document.styleSheets[d].insertRule)document.styleSheets[d].insertRule(b+" { "+a+": "+c+"; }",document.styleSheets[d][e].length);else document.styleSheets[d].addRule&&document.styleSheets[d].addRule(b,a+": "+c+";")}})}})(jQuery);(function(a){jQuery.fn.getAJAJ=function(g,i,e,c,f,h){if(c!=""){var d="/scripts/"+c+".js";a.getScript(d)}if(h){var b=document.createElement("link");b.type="text/css";b.href="/css/"+c+".css";b.rel="stylesheet";b.media="screen";document.getElementsByTagName("head")[0].appendChild(b)}jQuery.ajax({type:i,contentType:"application/json; charset=utf-8",url:g,data:"{"+params+"}",dataFilter:function(b){var a,c=JSON.parseWithDate(jsonString);if(typeof JSON!=="undefined"&&typeof JSON.parse==="function")a=JSON.parse(b);else a=eval("("+b+")");return a.hasOwnProperty("d")?a.d:a},success:function(b){typeof e==="function"&&e(b);if(f!=""){d="/scripts/"+f+".js";a.getScript(d)}}})}})(jQuery);function changecss(e,d,f){for(var b,g=false,a=0;a<document.styleSheets.length;a++){try{if(document.styleSheets[a].rules)b="rules";else if(document.styleSheets[a].cssRules)b="cssRules";for(var c=0;document.styleSheets[a][b]!=null&&c<document.styleSheets[a][b].length;c++)if(document.styleSheets[a][b][c].selectorText==e)if(document.styleSheets[a][b][c].style[d]){document.styleSheets[a][b][c].style[d]=f;g=true;break}}catch(h){}if(!g)try{document.styleSheets[a].insertRule(e+" { "+d+": "+f+"; }",document.styleSheets[a][b].length)}catch(i){try{document.styleSheets[a].addRule(e,d+": "+f+";")}catch(i){}}}}function exchangecss(b,a){if(b==""||a=="")return;var d="."+b,c="."+a;$(d).addClass("toAddRightCssName");$(d).removeClass(b);$(c).addClass("toAddLeftCssName");$(c).removeClass(a);$(".toAddRightCssName").addClass(a);$(".toAddLeftCssName").addClass(b);$(".toAddRightCssName").removeClass("toAddRightCssName");$(".toAddLeftCssName").removeClass("toAddLeftCssName")}(function(a){a.fn.forceRedraw=function(d){a(this).addClass("forceRedraw").removeClass("forceRedraw");if(d){var b=a(this).css("padding-left"),c=parseInt(b,10);a(this).css("padding-left",++c);window.setTimeout(a.proxy(function(){a(this).css("padding-left",b)},this),1)}return this}})(jQuery);(function(a){a.fn.extend({customSelectStyle:function(){if(!a.browser.msie||a.browser.msie&&a.browser.version>6)return this.each(function(){if(a(this).hasClass("ui-datepicker-month")||a(this).hasClass("ui-datepicker-year"))return;var k="div"+a(this).attr("id"),c=a(this).parent().next();if(!c.hasClass("customStyleSelectBox")){var g=a(this).find(":selected");a(this).after('<div class="customStyleSelectBox"><span class="customStyleSelectBoxInner">'+g.text()+"</span></span>").css({position:"relative",opacity:0,fontSize:a(this).next().css("font-size")});var b=a(this).next(),h=parseInt(a(this).width())-parseInt(b.css("padding-left"))-parseInt(b.css("padding-right")),d=b.find(":first-child");b.css({display:"inline-block"});d.css({width:h,display:"inline-block"});var e=parseInt(b.height())+parseInt(b.css("padding-top"))+parseInt(b.css("padding-bottom"));a(this).height(e).change(function(){d.text(a(this).find(":selected").text()).parent().addClass("changed")});a(this).css({display:"none;"});var i=parseInt(a(this).width())+10,j="<div  style='display:none;position:absolute;z-index:2000;width:"+i+"px;height:"+e+"px;'/>";a(this).wrap(j);c=b}var f=a(this).parent();f.position({of:c,my:"center bottom",at:"center bottom",colision:"none none",offset:"0 0"});f.css("display","inline-block")})}})})(jQuery);function findPos(a){if(a){var b=findPos(a.offsetParent);return[b.X+a.offsetLeft,b.Y+a.offsetTop]}else return[0,0]}jQuery.fn.prettyCheckboxes=function(a){a=jQuery.extend({checkboxWidth:17,checkboxHeight:17,className:"prettyCheckbox",display:"list"},a);$(this).each(function(){var b=$(this).attr("id");if(!$(this).hasClass("hiddenCheckbox")&&b!=null&&b!="undefined"){$label=$('label[for="'+$(this).attr("id")+'"]');if($label.length==1){$label.prepend("<span class='holderWrap'><span class='holder'></span></span>");$(this).is(":checked")&&$label.addClass("checked");$label.addClass(a.className).addClass($(this).attr("type")).addClass(a.display);$label.find("span.holderWrap").width(a.checkboxWidth).height(a.checkboxHeight);$label.find("span.holder").width(a.checkboxWidth);$(this).addClass("hiddenCheckbox");$label.bind("click",function(){$("input#"+$(this).attr("for")).triggerHandler("click");$(this).toggleClass("checked");if($("input#"+$(this).attr("for")).is(":checkbox"))$(this).find("span.holder").css("top",0);else{$toCheck=$("input#"+$(this).attr("for"));$('input[name="'+$toCheck.attr("name")+'"]').each(function(){$('label[for="'+$(this).attr("id")+'"]').removeClass("checked")});$(this).addClass("checked");$toCheck.checked=true}});$("input#"+$label.attr("for")).bind("keypress",function(a){if(a.keyCode==32){if($.browser.msie)$('label[for="'+$(this).attr("id")+'"]').toggleClass("checked");else $(this).trigger("click");return false}})}}})};checkAllPrettyCheckboxes=function(b,a){if($(b).is(":checked"))$(a).find("input[type=checkbox]:not(:checked)").each(function(){$('label[for="'+$(this).attr("id")+'"]').trigger("click");if($.browser.msie)$(this).attr("checked","checked");else $(this).trigger("click")});else $(a).find("input[type=checkbox]:checked").each(function(){$('label[for="'+$(this).attr("id")+'"]').trigger("click");if($.browser.msie)$(this).attr("checked","");else $(this).trigger("click")})};jQuery.fn.customCheckboxes=function(){$(this).each(function(){var a=$(this).attr("id");if(!$(this).hasClass("myHiddenCheckbox")&&a!=null&&a!="undefined"){$label=$('label[for="'+$(this).attr("id")+'"]');if($label.length==1){a="#"+a;if($(a).is(":checked"))$label.addClass("customChecked");else $label.addClass("customUnchecked");$label.click(function(){$(a).trigger("click");if($(a).is(":checked")){$(this).addClass("customChecked");$(this).removeClass("customUnchecked")}else{$(this).addClass("customUnchecked");$(this).removeClass("customChecked")}return false});$(a).addClass("myHiddenCheckbox")}}})};jQuery.fn.customRadioButtons=function(){$(this).each(function(){var a=$(this).attr("id");if(!$(this).hasClass("myHiddenRadio")&&a!=null&&a!="undefined"){$label=$('label[for="'+$(this).attr("id")+'"]');if($label.length==1){a="#"+a;if($(a).is(":checked"))$label.addClass("radioChecked");else $label.addClass("radioUnchecked");$label.click(function(){$(a).trigger("click");$('input[name="'+$(a).attr("name")+'"]').each(function(){$('label[for="'+$(this).attr("id")+'"]').removeClass("radioChecked");$('label[for="'+$(this).attr("id")+'"]').addClass("radioUnchecked")});$(this).addClass("radioChecked");$(this).removeClass("radioUnchecked");return false});$(a).addClass("myHiddenRadio")}}})};var JSON;if(!JSON)JSON={};(function(){"use strict";function c(a){return a<10?"0"+a:a}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var i=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a,d,h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},b;function g(a){f.lastIndex=0;return f.test(a)?'"'+a.replace(f,function(a){var b=h[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function e(m,n){var i,j,h,k,l=a,f,c=n[m];if(c&&typeof c==="object"&&typeof c.toJSON==="function")c=c.toJSON(m);if(typeof b==="function")c=b.call(n,m,c);switch(typeof c){case"string":return g(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";a+=d;f=[];if(Object.prototype.toString.apply(c)==="[object Array]"){k=c.length;for(i=0;i<k;i+=1)f[i]=e(i,c)||"null";h=f.length===0?"[]":a?"[\n"+a+f.join(",\n"+a)+"\n"+l+"]":"["+f.join(",")+"]";a=l;return h}if(b&&typeof b==="object"){k=b.length;for(i=0;i<k;i+=1){j=b[i];if(typeof j==="string"){h=e(j,c);h&&f.push(g(j)+(a?": ":":")+h)}}}else for(j in c)if(Object.hasOwnProperty.call(c,j)){h=e(j,c);h&&f.push(g(j)+(a?": ":":")+h)}h=f.length===0?"{}":a?"{\n"+a+f.join(",\n"+a)+"\n"+l+"}":"{"+f.join(",")+"}";a=l;return h}}if(typeof JSON.stringify!=="function")JSON.stringify=function(h,c,f){var g;a="";d="";if(typeof f==="number")for(g=0;g<f;g+=1)d+=" ";else if(typeof f==="string")d=f;b=c;if(c&&typeof c!=="function"&&(typeof c!=="object"||typeof c.length!=="number"))throw new Error("JSON.stringify");return e("",{"":h})};if(typeof JSON.parse!=="function")JSON.parse=function(){var a,d,b,e,c,g={"\\":"\\",'"':'"',"/":"/",t:"\t",n:"\n",r:"\r",f:"\f",b:"\b"},j={go:function(){a="ok"},firstokey:function(){e=c;a="colon"},okey:function(){e=c;a="colon"},ovalue:function(){a="ocomma"},firstavalue:function(){a="acomma"},avalue:function(){a="acomma"}},i={go:function(){a="ok"},ovalue:function(){a="ocomma"},firstavalue:function(){a="acomma"},avalue:function(){a="acomma"}},h={"{":{go:function(){d.push({state:"ok"});b={};a="firstokey"},ovalue:function(){d.push({container:b,state:"ocomma",key:e});b={};a="firstokey"},firstavalue:function(){d.push({container:b,state:"acomma"});b={};a="firstokey"},avalue:function(){d.push({container:b,state:"acomma"});b={};a="firstokey"}},"}":{firstokey:function(){var f=d.pop();c=b;b=f.container;e=f.key;a=f.state},ocomma:function(){var f=d.pop();b[e]=c;c=b;b=f.container;e=f.key;a=f.state}},"[":{go:function(){d.push({state:"ok"});b=[];a="firstavalue"},ovalue:function(){d.push({container:b,state:"ocomma",key:e});b=[];a="firstavalue"},firstavalue:function(){d.push({container:b,state:"acomma"});b=[];a="firstavalue"},avalue:function(){d.push({container:b,state:"acomma"});b=[];a="firstavalue"}},"]":{firstavalue:function(){var f=d.pop();c=b;b=f.container;e=f.key;a=f.state},acomma:function(){var f=d.pop();b.push(c);c=b;b=f.container;e=f.key;a=f.state}},":":{colon:function(){if(Object.hasOwnProperty.call(b,e))throw new SyntaxError('Duplicate key "'+e+'"');a="ovalue"}},",":{ocomma:function(){b[e]=c;a="okey"},acomma:function(){b.push(c);a="avalue"}},"true":{go:function(){c=true;a="ok"},ovalue:function(){c=true;a="ocomma"},firstavalue:function(){c=true;a="acomma"},avalue:function(){c=true;a="acomma"}},"false":{go:function(){c=false;a="ok"},ovalue:function(){c=false;a="ocomma"},firstavalue:function(){c=false;a="acomma"},avalue:function(){c=false;a="acomma"}},"null":{go:function(){c=null;a="ok"},ovalue:function(){c=null;a="ocomma"},firstavalue:function(){c=null;a="acomma"},avalue:function(){c=null;a="acomma"}}};function f(a){return a.replace(/\\(?:u(.{4})|([^u]))/g,function(c,a,b){return a?String.fromCharCode(parseInt(a,16)):g[b]})}return function(e,g){var b,l=/^[\x20\t\n\r]*(?:([,:\[\]{}]|true|false|null)|(-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)|"((?:[^\r\n\t\\\"]|\\(?:["\\\/trnfb]|u[0-9a-fA-F]{4}))*)")/;a="go";d=[];try{for(;true;){b=l.exec(e);if(!b)break;if(b[1])h[b[1]][a]();else if(b[2]){c=+b[2];i[a]()}else{c=f(b[3]);j[a]()}e=e.slice(b[0].length)}}catch(m){a=m}if(a!=="ok"||/[^\x20\t\n\r]/.test(e))throw a instanceof SyntaxError?a:new SyntaxError("JSON");return typeof g==="function"?function k(d,e){var b,c,a=d[e];if(a&&typeof a==="object")for(b in a)if(Object.hasOwnProperty.call(a,b)){c=k(a,b);if(c!==undefined)a[b]=c;else delete a[b]}return g.call(d,e,a)}({"":c},""):c}}})();(function(a){a.fn.lazyload=function(d){var b={threshold:0,failurelimit:0,event:"scroll",effect:"show",container:window};d&&a.extend(b,d);var c=this;"scroll"==b.event&&a(b.container).bind("scroll",function(){var d=0;c.each(function(){if(!a.belowthefold(this,b)&&!a.rightoffold(this,b))a(this).trigger("appear");else if(d++>b.failurelimit)return false});var e=a.grep(c,function(a){return!a.loaded});c=a(e)});return this.each(function(){var c=this;a(c).attr("original",a(c).attr("src"));if("scroll"!=b.event||a.belowthefold(c,b)||a.rightoffold(c,b)){if(b.placeholder)a(c).attr("src",b.placeholder);else a(c).removeAttr("src");c.loaded=false}else c.loaded=true;a(c).one("appear",function(){!this.loaded&&a("<img />").bind("load",function(){a(c).hide().attr("src",a(c).attr("original"))[b.effect](b.effectspeed);c.loaded=true}).attr("src",a(c).attr("original"))});"scroll"!=b.event&&a(c).bind(b.event,function(){!c.loaded&&a(c).trigger("appear")})})};a.belowthefold=function(c,b){if(b.container===undefined||b.container===window)var d=a(window).height()+a(window).scrollTop();else var d=a(b.container).offset().top+a(b.container).height();return d<=a(c).offset().top-b.threshold};a.rightoffold=function(c,b){if(b.container===undefined||b.container===window)var d=a(window).width()+a(window).scrollLeft();else var d=a(b.container).offset().left+a(b.container).width();return d<=a(c).offset().left-b.threshold};a.extend(a.expr[":"],{"below-the-fold":"$.belowthefold(a, {threshold : 0, container: window})","above-the-fold":"!$.belowthefold(a, {threshold : 0, container: window})","right-of-fold":"$.rightoffold(a, {threshold : 0, container: window})","left-of-fold":"!$.rightoffold(a, {threshold : 0, container: window})"})})(jQuery);(function(a){a.fn.tipsy=function(b){b=a.extend({},a.fn.tipsy.defaults,b);return this.each(function(){var c=a.fn.tipsy.elementOptions(this,b);a(this).hover(function(){(a(this).attr("title")||typeof a(this).attr("original-title")!="string")&&a(this).attr("original-title",a(this).attr("title")||"").removeAttr("title");if(a(this).attr("original-title").length>2){a.data(this,"cancel.tipsy",true);var b=a.data(this,"active.tipsy");if(!b){b=a('<div class="tipsy"><div class="tipsy-inner"/></div>');b.css({position:"absolute"});b.css("z-index","100000");a.data(this,"active.tipsy",b)}var g;if(typeof c.title=="string")g=a(this).attr(c.title=="title"?"original-title":c.title);else if(typeof c.title=="function")g=c.title.call(this);b.find(".tipsy-inner")[c.html?"html":"text"](g||c.fallback);var d=a.extend({},a(this).offset(),{width:this.offsetWidth,height:this.offsetHeight});b.get(0).className="tipsy";b.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body);var f=b[0].offsetWidth,e=b[0].offsetHeight,h=typeof c.gravity=="function"?c.gravity.call(this):c.gravity;switch(h.charAt(0)){case"n":b.css({top:d.top+d.height,left:d.left+d.width/2-f/2}).addClass("tipsy-north");break;case"s":b.css({top:d.top-e,left:d.left+d.width/2-f/2}).addClass("tipsy-south");break;case"e":b.css({top:d.top+d.height/2-e/2,left:d.left-f}).addClass("tipsy-east");break;case"w":b.css({top:d.top+d.height/2-e/2,left:d.left+d.width}).addClass("tipsy-west")}if(c.fade)b.css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:.8});else b.css({visibility:"visible"})}},function(){a.data(this,"cancel.tipsy",false);var b=this;setTimeout(function(){if(a.data(b,"cancel.tipsy"))return;var d=a.data(b,"active.tipsy");if(c.fade)d.stop().fadeOut(function(){a(this).remove()});else d.remove()},0)})})};a.fn.tipsy.elementOptions=function(c,b){return a.metadata?a.extend({},b,a(c).metadata()):b};a.fn.tipsy.defaults={fade:false,fallback:"",gravity:"n",html:false,title:"title"};a.fn.tipsy.autoNS=function(){return a(this).offset().top>a(document).scrollTop()+a(window).height()/2?"s":"n"};a.fn.tipsy.autoWE=function(){return a(this).offset().left>a(document).scrollLeft()+a(window).width()/2?"e":"w"}})(jQuery);jQuery(function(a){a(".rollover").hover(function(){var b=a(this).attr("src");a(this).attr("src",a(this).attr("data-hover"));a(this).attr("data-hover",b)},function(){var b=a(this).attr("src");a(this).attr("src",a(this).attr("data-hover"));a(this).attr("data-hover",b)});a(".switchInOut").mouseenter(function(){a(this).removeClass(a(this).attr("cssOut"));a(this).addClass(a(this).attr("cssIn"))});a(".switchInOut").mouseleave(function(){a(this).removeClass(a(this).attr("cssIn"));a(this).addClass(a(this).attr("cssOut"))})});$(function(){$("div, table, ul, li").each(function(a){$(this).css("position")!="absolute"&&$(this).css("z-index",999-a)})});(function(a){a.fn.popeye=function(d){var b=a.extend({},a.fn.popeye.defaults,d);function c(a,c){if(window.console&&window.console.log&&b.debug)if(c=="info"&&window.console.info)window.console.info(a);else if(c=="warn"&&window.console.warn)window.console.warn(a);else window.console.log(a)}return this.each(function(){a(this).addClass("ppy-active");for(var d=a(this),o=d.find(".ppy-imglist > li > a > img"),p=d.find(".ppy-imglist > li > a"),g=o.length,F=g==1?true:false,s=false,i=false,e=0,E="ppy-expanded",w="ppy-loading",W="ppy-single-image",G=a('<div class="ppy-placeholder"></div>'),j=a('<div class="ppy-stagewrap"></div>'),r=a('<div class="ppy-captionwrap"></div>'),B=d.find(".ppy-outer"),f=d.find(".ppy-stage"),x=d.find(".ppy-nav"),J=d.find(".ppy-prev"),I=d.find(".ppy-next"),z=d.find(".ppy-switch-enlarge"),y=d.find(".ppy-switch-compact").addClass("ppy-hidden"),n=d.find(".ppy-play"),v=d.find(".ppy-pause").addClass("ppy-hidden"),h=d.find(".ppy-caption"),V=d.find(".ppy-text"),P=d.find(".ppy-counter"),Q=d.find(".ppy-current"),S=d.find(".ppy-total"),U={position:"absolute",width:"auto",height:"auto",margin:0,top:0,left:b.direction=="right"?0:"auto",right:b.direction=="left"?0:"auto"},R={height:f.height(),width:f.width()},O={height:h.height()},N={height:b.caption=="hover"||false?B.outerHeight():d.outerHeight(),width:b.caption=="hover"||false?B.outerWidth():d.outerWidth(),"float":a("body").attr("dir")=="ltr"?"left":"right","margin-top":d.css("margin-top"),"margin-right":d.css("margin-right"),"margin-bottom":d.css("margin-bottom"),"margin-left":d.css("margin-left")},l=[],q=0;q<o.length;q++){var K=d.find(".ppy-imglist li").eq(q).find(".ppy-extcaption");l[q]=K.length>0?K.html():o[q].alt}if(!f.length||!x.length||!B.length)c("$.fn.popeye: Incorrect HTML structure","warn");else if(g===0)c("$.fn.popeye: No images found","warn");else{F?c("$.fn.popeye -> SingleImageMode started"):c("$.fn.popeye -> "+g+" thumbnails found.");X()}function k(g,n){n=n||false;g=g||e;var r={backgroundImage:"url("+o[g].src+")"},u={height:"+=0"};if(i){m();f.fadeTo(b.duration/2,0).animate(R,{queue:false,duration:b.duration,easing:b.easing,complete:function(){i=false;c("$.fn.showThumb: Entering COMPACT MODE","info");d.removeClass(E);d.css("z-index","").parent().css("z-index","");z.removeClass("ppy-hidden");y.addClass("ppy-hidden");k();a(this).fadeTo(b.duration/2,1)}})}else{if(n){j.addClass(w);f.fadeTo(b.duration/2,0);var h=new Image;h.onload=function(){c("$.fn.popeye.showThumb: Thumbnail "+g+" loaded","info");j.removeClass(w);f.animate(u,1,"linear",function(){f.css(r);a(this).fadeTo(b.duration/2,1);if(b.caption=="hover"&&s)t(l[g]);else b.caption=="permanent"&&H(l[g]);A()});h.onload=function(){}};h.src=o[g].src}else{f.css(r);A();t(l[g],true)}var q=new Image;q.onload=function(){c("$.fn.popeye.showThumb: Image "+g+" loaded","info");q.onload=function(){}};q.src=p[g].href}}function u(g){g=g||e;j.addClass(w);f.fadeTo(b.duration/2,0);var k=a("."+E);k.css("z-index",b.zindex-1);d.css("z-index",b.zindex).parent().css("z-index",b.zindex);var h=new Image;h.onload=function(){j.removeClass(w);var k={width:h.width,height:h.height},e={backgroundImage:"url("+p[g].href+")",backgroundPosition:"left top"};m();f.animate(k,{queue:false,duration:b.duration,easing:b.easing,complete:function(){b.navigation=="hover"&&s&&D();i=true;c("$.fn.popeye.showImage: Entering ENLARGED MODE","info");d.addClass(E);y.removeClass("ppy-hidden");z.addClass("ppy-hidden");A();a(this).css(e).fadeTo(b.duration/2,1);t(l[g]);M()}})};h.src=p[g].href}function A(a){a=a||e;S.text(g);Q.text(a+1);c("$.fn.popeye.updateCounter: Displaying image "+(a+1)+" of "+g)}function M(b){b=b||e;var c=new Image,d=new Image,a=b;if(a<g-1)a++;else a=0;c.src=p[a].href;a=b;if(a<=0)a=g-1;else a--;d.src=p[a].href}function D(){x.stop().fadeTo(150,b.opacity)}function C(){x.stop().fadeTo(150,0)}function H(a){b.caption&&V.html(a)}function t(a,e){if(a&&b.caption){H(a);c("$.fn.popeye.showCaption -> ppyCaptionWrap.outerHeight(true): "+r.outerHeight(true));var d={visibility:"visible"};h.css(d);if(b.caption==="permanent"&&!i)h.css(O);else h.animate({height:r.outerHeight(true)},{queue:false,duration:90,easing:b.easing})}else!a&&!e&&m()}function m(){var a={visibility:"hidden",overflow:"hidden"};h.animate({height:"0px"},{queue:false,duration:90,easing:b.easing,complete:function(){h.css(a)}})}function T(){if(e<=0)e=g-1;else e--;if(i)u(e);else k(e,true);return e}function L(){if(e<g-1)e++;else e=0;if(i)u(e);else k(e,true);return e}function X(){G.css(N);d.css(U);d.wrap(G);j=f.wrap(j).parent();r=h.wrapInner(r).children().eq(0);k();if(b.navigation=="hover"){C();d.hover(function(){D()},function(){C()});x.hover(function(){D()},function(){C()})}if(!F){J.click(function(a){a.stopPropagation();T()});I.click(function(a){a.stopPropagation();L()})}else{d.addClass(W);J.remove();I.remove();n.remove();v.remove();P.remove()}if(b.caption=="hover"){m();d.hover(function(){t(l[e])},function(){m(true)})}z.click(function(a){a.stopPropagation();u();return false});y.click(function(a){a.stopPropagation();k(e);return false});f.click(function(){if(i)k(e);else u()});n.click(function(a){a.stopPropagation();v.removeClass("ppy-hidden");n.addClass("ppy-hidden");slideshow=window.setInterval(function(){L()},b.slidespeed);return false});v.click(function(a){a.stopPropagation();n.removeClass("ppy-hidden");v.addClass("ppy-hidden");window.clearInterval(slideshow);return false});d.mouseenter(function(){s=true}).mouseleave(function(){s=false});b.autoslide&&n.trigger("click")}})};a.fn.popeye.defaults={navigation:"hover",caption:"hover",zindex:1e4,direction:a("body").attr("dir")=="ltr"?"right":"left",duration:240,opacity:.8,easing:"swing",slidespeed:2e3,autoslide:false,debug:false}})(jQuery);jQuery("head").append('<style type="text/css"> .ppy-imglist { position: absolute; top: -1000em; left: -1000em; } </style>');(function(a){a.Jcrop=function(y,m){var y=y,m=m;if(typeof y!=="object")y=a(y)[0];if(typeof m!=="object")m={};if(!("trackDocument"in m)){m.trackDocument=a.browser.msie?false:true;if(a.browser.msie&&a.browser.version.split(".")[0]=="8")m.trackDocument=true}if(!("keySupport"in m))m.keySupport=a.browser.msie?false:true;var ib={trackDocument:false,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,borderOpacity:.4,handleOpacity:.5,handlePad:5,handleSize:9,handleOffset:5,edgeMargin:14,aspectRatio:0,keySupport:true,cornerHandles:true,sideHandles:true,drawBorders:true,dragEdges:true,boxWidth:0,boxHeight:0,boundary:8,animationDelay:20,swingSpeed:3,allowSelect:true,allowMove:true,allowResize:true,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){}},b=ib;P(m);var o=a(y),j=o.clone().removeAttr("id").css({position:"absolute"});j.width(o.width());j.height(o.height());o.after(j).hide();lb(j,b.boxWidth,b.boxHeight);var g=j.width(),f=j.height(),K=a("<div />").width(g).height(f).addClass(A("holder")).css({position:"relative",backgroundColor:b.bgColor}).insertAfter(o).append(j);b.addClass&&K.addClass(b.addClass);var U=a("<img />").attr("src",j.attr("src")).css("position","absolute").width(g).height(f),F=a("<div />").width(q(100)).height(q(100)).css({zIndex:310,position:"absolute",overflow:"hidden"}).append(U),p=a("<div />").width(q(100)).height(q(100)).css("zIndex",320),D=a("<div />").css({position:"absolute",zIndex:300}).insertBefore(j).append(F,p),C=b.boundary,u=O().width(g+C*2).height(f+C*2).css({position:"absolute",top:c(-C),left:c(-C),zIndex:290}).mousedown(Z),s,t,v,x,k,l,mb=true,z=J(j),r,T,nb,R,Q,d=function(){var a=0,c=0,e=0,d=0,o,p;function u(b){var b=n(b);e=a=b[0];d=c=b[1]}function r(a){var a=n(a);o=a[0]-e;p=a[1]-d;e=a[0];d=a[1]}function z(){return[o,p]}function q(i){var b=i[0],h=i[1];if(0>a+b)b-=b+a;if(0>c+h)h-=h+c;if(f<d+h)h+=f-(d+h);if(g<e+b)b+=g-(e+b);a+=b;e+=b;c+=h;d+=h}function y(b){var a=j();switch(b){case"ne":return[a.x2,a.y];case"nw":return[a.x,a.y];case"se":return[a.x2,a.y2];case"sw":return[a.x,a.y2]}}function j(){if(!b.aspectRatio)return A();var o=b.aspectRatio,q=b.minSize[0]/k,y=b.minSize[1]/l,p=b.maxSize[0]/k,t=b.maxSize[1]/l,s=e-a,r=d-c,v=Math.abs(s),u=Math.abs(r),x=v/u,j,n;if(p==0)p=g*10;if(t==0)t=f*10;if(x<o){n=d;w=u*o;j=s<0?a-w:w+a;if(j<0){j=0;h=Math.abs((j-a)/o);n=r<0?c-h:h+c}else if(j>g){j=g;h=Math.abs((j-a)/o);n=r<0?c-h:h+c}}else{j=e;h=v/o;n=r<0?c-h:c+h;if(n<0){n=0;w=Math.abs((n-c)*o);j=s<0?a-w:w+a}else if(n>f){n=f;w=Math.abs(n-c)*o;j=s<0?a-w:w+a}}if(j>a){if(j-a<q)j=a+q;else if(j-a>p)j=a+p;if(n>c)n=c+(j-a)/o;else n=c-(j-a)/o}else if(j<a){if(a-j<q)j=a-q;else if(a-j>p)j=a-p;if(n>c)n=c+(a-j)/o;else n=c-(a-j)/o}if(j<0){a-=j;j=0}else if(j>g){a-=j-g;j=g}if(n<0){c-=n;n=0}else if(n>f){c-=n-f;n=f}return last=m(i(a,c,j,n))}function n(a){if(a[0]<0)a[0]=0;if(a[1]<0)a[1]=0;if(a[0]>g)a[0]=g;if(a[1]>f)a[1]=f;return[a[0],a[1]]}function i(a,c,b,d){var e=a,f=b,g=c,h=d;if(b<a){e=b;f=a}if(d<c){g=d;h=c}return[Math.round(e),Math.round(g),Math.round(f),Math.round(h)]}function A(){var h=e-a,j=d-c;if(s&&Math.abs(h)>s)e=h>0?a+s:a-s;if(t&&Math.abs(j)>t)d=j>0?c+t:c-t;if(x&&Math.abs(j)<x)d=j>0?c+x:c-x;if(v&&Math.abs(h)<v)e=h>0?a+v:a-v;if(a<0){e-=a;a-=a}if(c<0){d-=c;c-=c}if(e<0){a-=e;e-=e}if(d<0){c-=d;d-=d}if(e>g){var b=e-g;a-=b;e-=b}if(d>f){var b=d-f;c-=b;d-=b}if(a>g){var b=a-f;d-=b;c-=b}if(c>f){var b=c-f;d-=b;c-=b}return m(i(a,c,e,d))}function m(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}return{flipCoords:i,setPressed:u,setCurrent:r,getOffset:z,moveOffset:q,getCorner:y,getFixed:j}}(),e=function(){var N,P,M,m,z=370,o={},e={},g=false,f=b.handleOffset;if(b.drawBorders)o={top:l("hline").css("top",a.browser.msie?c(-1):c(0)),bottom:l("hline"),left:l("vline"),right:l("vline")};if(b.dragEdges){e.t=k("n");e.b=k("s");e.r=k("e");e.l=k("w")}b.sideHandles&&r(["n","s","e","w"]);b.cornerHandles&&r(["sw","nw","ne","se"]);function l(d){var c=a("<div />").css({position:"absolute",opacity:b.borderOpacity}).addClass(A(d));F.append(c);return c}function v(b,d){var c=a("<div />").mousedown(L(b)).css({cursor:b+"-resize",position:"absolute",zIndex:d});p.append(c);return c}function B(a){return v(a,z++).css({top:c(-f+1),left:c(-f+1),opacity:b.handleOpacity}).addClass(A("handle"))}function k(a){var g=b.handleSize,e=f,d=g,h=g,j=e,i=e;switch(a){case"n":case"s":h=q(100);break;case"e":case"w":d=q(100)}return v(a,z++).width(h).height(d).css({top:c(-j+1),left:c(-i+1)})}function r(a){for(i in a)e[a[i]]=B(a[i])}function n(d){var h=Math.round(d.h/2-f),g=Math.round(d.w/2-f),i=west=-f+1,b=d.w-f,a=d.h-f,j,k;"e"in e&&e.e.css({top:c(h),left:c(b)})&&e.w.css({top:c(h)})&&e.s.css({top:c(a),left:c(g)})&&e.n.css({left:c(g)});"ne"in e&&e.ne.css({left:c(b)})&&e.se.css({top:c(a),left:c(b)})&&e.sw.css({top:c(a)});"b"in e&&e.b.css({top:c(a)})&&e.r.css({left:c(b)})}function G(a,b){U.css({top:c(-b),left:c(-a)});D.css({top:c(b),left:c(a)})}function H(b,a){D.width(b).height(a)}function w(){var a=d.getFixed();d.setPressed([a.x,a.y]);d.setCurrent([a.x2,a.y2]);t()}function t(){if(m)return y()}function y(){var a=d.getFixed();H(a.w,a.h);G(a.x,a.y);b.drawBorders&&o.right.css({left:c(a.w-1)})&&o.bottom.css({top:c(a.h-1)});g&&n(a);m||K();b.onChange(I(a))}function K(){D.show();j.css("opacity",b.bgOpacity);m=true}function E(){h();D.hide();j.css("opacity",1);m=false}function C(){if(g){n(d.getFixed());p.show()}}function s(){g=true;if(b.allowResize){n(d.getFixed());p.show();return true}}function h(){g=false;p.hide()}function u(a){(R=a)?h():s()}function J(){u(false);w()}var x=O().mousedown(L("move")).css({cursor:"move",position:"absolute",zIndex:360});F.append(x);h();return{updateVisible:t,update:y,release:E,refresh:w,setCursor:function(a){x.css("cursor",a)},enableHandles:s,enableOnly:function(){g=true},showHandles:C,disableHandles:h,animMode:u,done:J}}(),n=function(){var h=function(){},g=function(){},f=b.trackDocument;!f&&u.mousemove(e).mouseup(c).mouseout(c);function l(){u.css({zIndex:450});f&&a(document).mousemove(e).mouseup(c)}function m(){u.css({zIndex:290});f&&a(document).unbind("mousemove",e).unbind("mouseup",c)}function e(a){h(B(a))}function c(a){a.preventDefault();a.stopPropagation();if(r){r=false;g(B(a));b.onSelect(I(d.getFixed()));m();h=function(){};g=function(){}}return false}function i(b,a){r=true;h=b;g=a;l();return false}function k(a){u.css("cursor",a)}j.before(u);return{activateHandlers:i,setCursor:k}}(),H=function(){var c=a('<input type="radio" />').css({position:"absolute",left:"-30px"}).keypress(i).blur(k),h=a("<div />").css({position:"absolute",overflow:"hidden"}).append(c);function g(){if(b.keySupport){c.show();c.focus()}}function k(){c.hide()}function f(a,c,f){if(b.allowMove){d.moveOffset([c,f]);e.updateVisible()}a.preventDefault();a.stopPropagation()}function i(a){if(a.ctrlKey)return true;Q=a.shiftKey?true:false;var b=Q?10:1;switch(a.keyCode){case 37:f(a,-b,0);break;case 39:f(a,b,0);break;case 38:f(a,0,-b);break;case 40:f(a,0,b);break;case 27:e.release();break;case 9:return true}return nothing(a)}b.keySupport&&h.insertBefore(j);return{watchKeys:g}}();function c(a){return""+parseInt(a)+"px"}function q(a){return""+parseInt(a)+"%"}function A(a){return b.baseClass+"-"+a}function J(c){var b=a(c).offset();return[b.left,b.top]}function B(a){return[a.pageX-z[0],a.pageY-z[1]]}function jb(a){if(a!=T){n.setCursor(a);T=a}}function Y(a,e){z=J(j);n.setCursor(a=="move"?a:a+"-resize");if(a=="move")return n.activateHandlers(ab(e),G);var f=d.getFixed(),b=M(a),c=d.getCorner(M(b));d.setPressed(d.getCorner(b));d.setCurrent(c);n.activateHandlers(W(a,f),G)}function W(c,a){return function(f){if(!b.aspectRatio)switch(c){case"e":f[1]=a.y2;break;case"w":f[1]=a.y2;break;case"n":f[0]=a.x2;break;case"s":f[0]=a.x2}else switch(c){case"e":f[1]=a.y+1;break;case"w":f[1]=a.y+1;break;case"n":f[0]=a.x+1;break;case"s":f[0]=a.x+1}d.setCurrent(f);e.update()}}function ab(b){var a=b;H.watchKeys();return function(b){d.moveOffset([b[0]-a[0],b[1]-a[1]]);a=b;e.update()}}function M(a){switch(a){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function L(a){return function(c){if(b.disabled)return false;if(a=="move"&&!b.allowMove)return false;r=true;Y(a,B(c));c.stopPropagation();c.preventDefault();return false}}function lb(a,e,d){var c=a.width(),b=a.height();if(c>e&&e>0){c=e;b=e/a.width()*a.height()}if(b>d&&d>0){b=d;c=d/a.height()*a.width()}k=a.width()/c;l=a.height()/b;a.width(c).height(b)}function I(a){return{x:parseInt(a.x*k),y:parseInt(a.y*l),x2:parseInt(a.x2*k),y2:parseInt(a.y2*l),w:parseInt(a.w*k),h:parseInt(a.h*l)}}function G(){var a=d.getFixed();if(a.w>b.minSelect[0]&&a.h>b.minSelect[1]){e.enableHandles();e.done()}else e.release();n.setCursor(b.allowSelect?"crosshair":"default")}function Z(a){if(b.disabled)return false;if(!b.allowSelect)return false;r=true;z=J(j);e.disableHandles();jb("crosshair");var c=B(a);d.setPressed(c);n.activateHandlers(eb,G);H.watchKeys();e.update();a.stopPropagation();a.preventDefault();return false}function eb(a){d.setCurrent(a);e.update()}function O(){var b=a("<div></div>").addClass(A("tracker"));a.browser.msie&&b.css({opacity:0,backgroundColor:"white"});return b}function hb(g){var u=g[0]/k,v=g[1]/l,j=g[2]/k,m=g[3]/l;if(R)return;var f=d.flipCoords(u,v,j,m),h=d.getFixed(),a=initcr=[h.x,h.y,h.x2,h.y2],p=b.animationDelay,w=a[0],x=a[1],j=a[2],m=a[3],q=f[0]-initcr[0],s=f[1]-initcr[1],r=f[2]-initcr[2],t=f[3]-initcr[3],c=0,o=b.swingSpeed;e.animMode(true);var n=function(){return function(){c+=(100-c)/o;a[0]=w+c/100*q;a[1]=x+c/100*s;a[2]=j+c/100*r;a[3]=m+c/100*t;if(c<100)i();else e.done();if(c>=99.8)c=100;N(a)}}();function i(){window.setTimeout(n,p)}i()}function S(a){N([a[0]/k,a[1]/l,a[2]/k,a[3]/l])}function N(a){d.setPressed([a[0],a[1]]);d.setCurrent([a[2],a[3]]);e.update()}function P(c){if(typeof c!="object")c={};b=a.extend(b,c);if(typeof b.onChange!=="function")b.onChange=function(){};if(typeof b.onSelect!=="function")b.onSelect=function(){}}function gb(){return I(d.getFixed())}function fb(){return d.getFixed()}function X(a){P(a);E()}function bb(){b.disabled=true;e.disableHandles();e.setCursor("default");n.setCursor("default")}function db(){b.disabled=false;E()}function cb(){e.done();n.activateHandlers(null,null)}function kb(){K.remove();o.show()}function E(a){b.allowResize?a?e.enableOnly():e.enableHandles():e.disableHandles();n.setCursor(b.allowSelect?"crosshair":"default");e.setCursor(b.allowMove?"move":"default");K.css("backgroundColor",b.bgColor);if("setSelect"in b){S(m.setSelect);e.done();delete b.setSelect}if("trueSize"in b){k=b.trueSize[0]/g;l=b.trueSize[1]/f}s=b.maxSize[0]||0;t=b.maxSize[1]||0;v=b.minSize[0]||0;x=b.minSize[1]||0;if("outerImage"in b){j.attr("src",b.outerImage);delete b.outerImage}e.refresh()}p.hide();E(true);var V={animateTo:hb,setSelect:S,setOptions:X,tellSelect:gb,tellScaled:fb,disable:bb,enable:db,cancel:cb,focus:H.watchKeys,getBounds:function(){return[g*k,f*l]},getWidgetSize:function(){return[g,f]},release:e.release,destroy:kb};o.data("Jcrop",V);return V};a.fn.Jcrop=function(b){function c(c){var e=b.useImg||c.src,d=new Image;d.onload=function(){a.Jcrop(c,b)};d.src=e}if(typeof b!=="object")b={};this.each(function(){if(a(this).data("Jcrop"))if(b=="api")return a(this).data("Jcrop");else a(this).data("Jcrop").setOptions(b);else c(this)});return this}})(jQuery);(function(a){a.Jcrop=function(y,m){var y=y,m=m;if(typeof y!=="object")y=a(y)[0];if(typeof m!=="object")m={};if(!("trackDocument"in m)){m.trackDocument=a.browser.msie?false:true;if(a.browser.msie&&a.browser.version.split(".")[0]=="8")m.trackDocument=true}if(!("keySupport"in m))m.keySupport=a.browser.msie?false:true;var ib={trackDocument:false,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,borderOpacity:.4,handleOpacity:.5,handlePad:5,handleSize:9,handleOffset:5,edgeMargin:14,aspectRatio:0,keySupport:true,cornerHandles:true,sideHandles:true,drawBorders:true,dragEdges:true,boxWidth:0,boxHeight:0,boundary:8,animationDelay:20,swingSpeed:3,allowSelect:true,allowMove:true,allowResize:true,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){}},b=ib;P(m);var o=a(y),j=o.clone().removeAttr("id").css({position:"absolute"});j.width(o.width());j.height(o.height());o.after(j).hide();lb(j,b.boxWidth,b.boxHeight);var g=j.width(),f=j.height(),K=a("<div />").width(g).height(f).addClass(A("holder")).css({position:"relative",backgroundColor:b.bgColor}).insertAfter(o).append(j);b.addClass&&K.addClass(b.addClass);var U=a("<img />").attr("src",j.attr("src")).css("position","absolute").width(g).height(f),F=a("<div />").width(q(100)).height(q(100)).css({zIndex:310,position:"absolute",overflow:"hidden"}).append(U),p=a("<div />").width(q(100)).height(q(100)).css("zIndex",320),D=a("<div />").css({position:"absolute",zIndex:300}).insertBefore(j).append(F,p),C=b.boundary,u=O().width(g+C*2).height(f+C*2).css({position:"absolute",top:c(-C),left:c(-C),zIndex:290}).mousedown(Z),s,t,v,x,k,l,mb=true,z=J(j),r,T,nb,R,Q,d=function(){var a=0,c=0,e=0,d=0,o,p;function u(b){var b=n(b);e=a=b[0];d=c=b[1]}function r(a){var a=n(a);o=a[0]-e;p=a[1]-d;e=a[0];d=a[1]}function z(){return[o,p]}function q(i){var b=i[0],h=i[1];if(0>a+b)b-=b+a;if(0>c+h)h-=h+c;if(f<d+h)h+=f-(d+h);if(g<e+b)b+=g-(e+b);a+=b;e+=b;c+=h;d+=h}function y(b){var a=j();switch(b){case"ne":return[a.x2,a.y];case"nw":return[a.x,a.y];case"se":return[a.x2,a.y2];case"sw":return[a.x,a.y2]}}function j(){if(!b.aspectRatio)return A();var o=b.aspectRatio,q=b.minSize[0]/k,y=b.minSize[1]/l,p=b.maxSize[0]/k,t=b.maxSize[1]/l,s=e-a,r=d-c,v=Math.abs(s),u=Math.abs(r),x=v/u,j,n;if(p==0)p=g*10;if(t==0)t=f*10;if(x<o){n=d;w=u*o;j=s<0?a-w:w+a;if(j<0){j=0;h=Math.abs((j-a)/o);n=r<0?c-h:h+c}else if(j>g){j=g;h=Math.abs((j-a)/o);n=r<0?c-h:h+c}}else{j=e;h=v/o;n=r<0?c-h:c+h;if(n<0){n=0;w=Math.abs((n-c)*o);j=s<0?a-w:w+a}else if(n>f){n=f;w=Math.abs(n-c)*o;j=s<0?a-w:w+a}}if(j>a){if(j-a<q)j=a+q;else if(j-a>p)j=a+p;if(n>c)n=c+(j-a)/o;else n=c-(j-a)/o}else if(j<a){if(a-j<q)j=a-q;else if(a-j>p)j=a-p;if(n>c)n=c+(a-j)/o;else n=c-(a-j)/o}if(j<0){a-=j;j=0}else if(j>g){a-=j-g;j=g}if(n<0){c-=n;n=0}else if(n>f){c-=n-f;n=f}return last=m(i(a,c,j,n))}function n(a){if(a[0]<0)a[0]=0;if(a[1]<0)a[1]=0;if(a[0]>g)a[0]=g;if(a[1]>f)a[1]=f;return[a[0],a[1]]}function i(a,c,b,d){var e=a,f=b,g=c,h=d;if(b<a){e=b;f=a}if(d<c){g=d;h=c}return[Math.round(e),Math.round(g),Math.round(f),Math.round(h)]}function A(){var h=e-a,j=d-c;if(s&&Math.abs(h)>s)e=h>0?a+s:a-s;if(t&&Math.abs(j)>t)d=j>0?c+t:c-t;if(x&&Math.abs(j)<x)d=j>0?c+x:c-x;if(v&&Math.abs(h)<v)e=h>0?a+v:a-v;if(a<0){e-=a;a-=a}if(c<0){d-=c;c-=c}if(e<0){a-=e;e-=e}if(d<0){c-=d;d-=d}if(e>g){var b=e-g;a-=b;e-=b}if(d>f){var b=d-f;c-=b;d-=b}if(a>g){var b=a-f;d-=b;c-=b}if(c>f){var b=c-f;d-=b;c-=b}return m(i(a,c,e,d))}function m(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}return{flipCoords:i,setPressed:u,setCurrent:r,getOffset:z,moveOffset:q,getCorner:y,getFixed:j}}(),e=function(){var N,P,M,m,z=370,o={},e={},g=false,f=b.handleOffset;if(b.drawBorders)o={top:l("hline").css("top",a.browser.msie?c(-1):c(0)),bottom:l("hline"),left:l("vline"),right:l("vline")};if(b.dragEdges){e.t=k("n");e.b=k("s");e.r=k("e");e.l=k("w")}b.sideHandles&&r(["n","s","e","w"]);b.cornerHandles&&r(["sw","nw","ne","se"]);function l(d){var c=a("<div />").css({position:"absolute",opacity:b.borderOpacity}).addClass(A(d));F.append(c);return c}function v(b,d){var c=a("<div />").mousedown(L(b)).css({cursor:b+"-resize",position:"absolute",zIndex:d});p.append(c);return c}function B(a){return v(a,z++).css({top:c(-f+1),left:c(-f+1),opacity:b.handleOpacity}).addClass(A("handle"))}function k(a){var g=b.handleSize,e=f,d=g,h=g,j=e,i=e;switch(a){case"n":case"s":h=q(100);break;case"e":case"w":d=q(100)}return v(a,z++).width(h).height(d).css({top:c(-j+1),left:c(-i+1)})}function r(a){for(i in a)e[a[i]]=B(a[i])}function n(d){var h=Math.round(d.h/2-f),g=Math.round(d.w/2-f),i=west=-f+1,b=d.w-f,a=d.h-f,j,k;"e"in e&&e.e.css({top:c(h),left:c(b)})&&e.w.css({top:c(h)})&&e.s.css({top:c(a),left:c(g)})&&e.n.css({left:c(g)});"ne"in e&&e.ne.css({left:c(b)})&&e.se.css({top:c(a),left:c(b)})&&e.sw.css({top:c(a)});"b"in e&&e.b.css({top:c(a)})&&e.r.css({left:c(b)})}function G(a,b){U.css({top:c(-b),left:c(-a)});D.css({top:c(b),left:c(a)})}function H(b,a){D.width(b).height(a)}function w(){var a=d.getFixed();d.setPressed([a.x,a.y]);d.setCurrent([a.x2,a.y2]);t()}function t(){if(m)return y()}function y(){var a=d.getFixed();H(a.w,a.h);G(a.x,a.y);b.drawBorders&&o.right.css({left:c(a.w-1)})&&o.bottom.css({top:c(a.h-1)});g&&n(a);m||K();b.onChange(I(a))}function K(){D.show();j.css("opacity",b.bgOpacity);m=true}function E(){h();D.hide();j.css("opacity",1);m=false}function C(){if(g){n(d.getFixed());p.show()}}function s(){g=true;if(b.allowResize){n(d.getFixed());p.show();return true}}function h(){g=false;p.hide()}function u(a){(R=a)?h():s()}function J(){u(false);w()}var x=O().mousedown(L("move")).css({cursor:"move",position:"absolute",zIndex:360});F.append(x);h();return{updateVisible:t,update:y,release:E,refresh:w,setCursor:function(a){x.css("cursor",a)},enableHandles:s,enableOnly:function(){g=true},showHandles:C,disableHandles:h,animMode:u,done:J}}(),n=function(){var h=function(){},g=function(){},f=b.trackDocument;!f&&u.mousemove(e).mouseup(c).mouseout(c);function l(){u.css({zIndex:450});f&&a(document).mousemove(e).mouseup(c)}function m(){u.css({zIndex:290});f&&a(document).unbind("mousemove",e).unbind("mouseup",c)}function e(a){h(B(a))}function c(a){a.preventDefault();a.stopPropagation();if(r){r=false;g(B(a));b.onSelect(I(d.getFixed()));m();h=function(){};g=function(){}}return false}function i(b,a){r=true;h=b;g=a;l();return false}function k(a){u.css("cursor",a)}j.before(u);return{activateHandlers:i,setCursor:k}}(),H=function(){var c=a('<input type="radio" />').css({position:"absolute",left:"-30px"}).keypress(i).blur(k),h=a("<div />").css({position:"absolute",overflow:"hidden"}).append(c);function g(){if(b.keySupport){c.show();c.focus()}}function k(){c.hide()}function f(a,c,f){if(b.allowMove){d.moveOffset([c,f]);e.updateVisible()}a.preventDefault();a.stopPropagation()}function i(a){if(a.ctrlKey)return true;Q=a.shiftKey?true:false;var b=Q?10:1;switch(a.keyCode){case 37:f(a,-b,0);break;case 39:f(a,b,0);break;case 38:f(a,0,-b);break;case 40:f(a,0,b);break;case 27:e.release();break;case 9:return true}return nothing(a)}b.keySupport&&h.insertBefore(j);return{watchKeys:g}}();function c(a){return""+parseInt(a)+"px"}function q(a){return""+parseInt(a)+"%"}function A(a){return b.baseClass+"-"+a}function J(c){var b=a(c).offset();return[b.left,b.top]}function B(a){return[a.pageX-z[0],a.pageY-z[1]]}function jb(a){if(a!=T){n.setCursor(a);T=a}}function Y(a,e){z=J(j);n.setCursor(a=="move"?a:a+"-resize");if(a=="move")return n.activateHandlers(ab(e),G);var f=d.getFixed(),b=M(a),c=d.getCorner(M(b));d.setPressed(d.getCorner(b));d.setCurrent(c);n.activateHandlers(W(a,f),G)}function W(c,a){return function(f){if(!b.aspectRatio)switch(c){case"e":f[1]=a.y2;break;case"w":f[1]=a.y2;break;case"n":f[0]=a.x2;break;case"s":f[0]=a.x2}else switch(c){case"e":f[1]=a.y+1;break;case"w":f[1]=a.y+1;break;case"n":f[0]=a.x+1;break;case"s":f[0]=a.x+1}d.setCurrent(f);e.update()}}function ab(b){var a=b;H.watchKeys();return function(b){d.moveOffset([b[0]-a[0],b[1]-a[1]]);a=b;e.update()}}function M(a){switch(a){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function L(a){return function(c){if(b.disabled)return false;if(a=="move"&&!b.allowMove)return false;r=true;Y(a,B(c));c.stopPropagation();c.preventDefault();return false}}function lb(a,e,d){var c=a.width(),b=a.height();if(c>e&&e>0){c=e;b=e/a.width()*a.height()}if(b>d&&d>0){b=d;c=d/a.height()*a.width()}k=a.width()/c;l=a.height()/b;a.width(c).height(b)}function I(a){return{x:parseInt(a.x*k),y:parseInt(a.y*l),x2:parseInt(a.x2*k),y2:parseInt(a.y2*l),w:parseInt(a.w*k),h:parseInt(a.h*l)}}function G(){var a=d.getFixed();if(a.w>b.minSelect[0]&&a.h>b.minSelect[1]){e.enableHandles();e.done()}else e.release();n.setCursor(b.allowSelect?"crosshair":"default")}function Z(a){if(b.disabled)return false;if(!b.allowSelect)return false;r=true;z=J(j);e.disableHandles();jb("crosshair");var c=B(a);d.setPressed(c);n.activateHandlers(eb,G);H.watchKeys();e.update();a.stopPropagation();a.preventDefault();return false}function eb(a){d.setCurrent(a);e.update()}function O(){var b=a("<div></div>").addClass(A("tracker"));a.browser.msie&&b.css({opacity:0,backgroundColor:"white"});return b}function hb(g){var u=g[0]/k,v=g[1]/l,j=g[2]/k,m=g[3]/l;if(R)return;var f=d.flipCoords(u,v,j,m),h=d.getFixed(),a=initcr=[h.x,h.y,h.x2,h.y2],p=b.animationDelay,w=a[0],x=a[1],j=a[2],m=a[3],q=f[0]-initcr[0],s=f[1]-initcr[1],r=f[2]-initcr[2],t=f[3]-initcr[3],c=0,o=b.swingSpeed;e.animMode(true);var n=function(){return function(){c+=(100-c)/o;a[0]=w+c/100*q;a[1]=x+c/100*s;a[2]=j+c/100*r;a[3]=m+c/100*t;if(c<100)i();else e.done();if(c>=99.8)c=100;N(a)}}();function i(){window.setTimeout(n,p)}i()}function S(a){N([a[0]/k,a[1]/l,a[2]/k,a[3]/l])}function N(a){d.setPressed([a[0],a[1]]);d.setCurrent([a[2],a[3]]);e.update()}function P(c){if(typeof c!="object")c={};b=a.extend(b,c);if(typeof b.onChange!=="function")b.onChange=function(){};if(typeof b.onSelect!=="function")b.onSelect=function(){}}function gb(){return I(d.getFixed())}function fb(){return d.getFixed()}function X(a){P(a);E()}function bb(){b.disabled=true;e.disableHandles();e.setCursor("default");n.setCursor("default")}function db(){b.disabled=false;E()}function cb(){e.done();n.activateHandlers(null,null)}function kb(){K.remove();o.show()}function E(a){b.allowResize?a?e.enableOnly():e.enableHandles():e.disableHandles();n.setCursor(b.allowSelect?"crosshair":"default");e.setCursor(b.allowMove?"move":"default");K.css("backgroundColor",b.bgColor);if("setSelect"in b){S(m.setSelect);e.done();delete b.setSelect}if("trueSize"in b){k=b.trueSize[0]/g;l=b.trueSize[1]/f}s=b.maxSize[0]||0;t=b.maxSize[1]||0;v=b.minSize[0]||0;x=b.minSize[1]||0;if("outerImage"in b){j.attr("src",b.outerImage);delete b.outerImage}e.refresh()}p.hide();E(true);var V={animateTo:hb,setSelect:S,setOptions:X,tellSelect:gb,tellScaled:fb,disable:bb,enable:db,cancel:cb,focus:H.watchKeys,getBounds:function(){return[g*k,f*l]},getWidgetSize:function(){return[g,f]},release:e.release,destroy:kb};o.data("Jcrop",V);return V};a.fn.Jcrop=function(b){function c(c){var e=b.useImg||c.src,d=new Image;d.onload=function(){a.Jcrop(c,b)};d.src=e}if(typeof b!=="object")b={};this.each(function(){if(a(this).data("Jcrop"))if(b=="api")return a(this).data("Jcrop");else a(this).data("Jcrop").setOptions(b);else c(this)});return this}})(jQuery);