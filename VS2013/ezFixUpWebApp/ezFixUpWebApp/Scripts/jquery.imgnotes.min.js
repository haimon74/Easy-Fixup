(function(a){a.fn.imgNotes=function(c){if(undefined!=c)notes=c;imgOffset=a(this).offset();if(typeof lastNotes!="undefined"&&notes==lastNotes)return;lastNotes=notes;a(".photonote").remove();a(".photonotep").remove();a(notes).each(function(){b(this)});a(this).click(function(){lastNotes=undefined});a(this).hover(function(){a(".photonote").show()},function(){a(".photonote").hide();a(".photonotep").hide()});a(".photonote").hover(function(){a(".photonote").show();a(this).next(".photonotep").show();a(this).css("z-index",1e4);a(this).addClass("photonote_hover")},function(){a(".photonote").show();a(this).next(".photonotep").hide();a(this).css("z-index",0);a(this).removeClass("photonote_hover")})};a.fn.outlineUsername=function(b){a(".photonote").hide();a(".photonotep").hide();a("#note_"+b).show();a("#note_"+b).next(".photonotep").show();a("#note_"+b).css("z-index",1e4);a("#note_"+b).addClass("photonote_hover")};a.fn.removeOutlineUsername=function(b){a(".photonote").hide();a(".photonotep").hide();a("#note_"+b).css("z-index",0);a("#note_"+b).removeClass("photonote_hover")};function b(b){note_left=parseInt(imgOffset.left)+parseInt(b.x1);note_top=parseInt(imgOffset.top)+parseInt(b.y1);note_p_top=note_top+parseInt(b.height)+5;note_url=b.redirectUrl;note_id="";if(b.username!=undefined&&b.username!=""){a("#note_"+b.username).remove();note_id='id="note_'+b.username+'"';if(b.note!="")b.note=b.note+"<br />";b.note=b.note+"<b>"+b.username+"</b>"}note_area_div=a("<div "+note_id+" class='photonote'><div class='photonote2' style='height: "+(b.height-2)+"px'><div class='photonote3' style='height: "+(b.height-4)+"px'></div></div></div>").css({left:note_left+"px",top:note_top+"px",width:b.width+"px",height:b.height+"px"});note_text_div=a('<div class="photonotep">'+b.note+"</div>").css({left:note_left+"px",top:note_p_top+"px"});a("body").append(note_area_div);a("body").append(note_text_div)}})(jQuery);