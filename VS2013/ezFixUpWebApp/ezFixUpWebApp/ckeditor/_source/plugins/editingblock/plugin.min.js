(function(){var n=function(n,t){return n._.modes&&n._.modes[t||n.mode]},t;CKEDITOR.plugins.add("editingblock",{init:function(i){if(i.config.editingBlock){i.on("themeSpace",function(n){n.data.space=="contents"&&(n.data.html+="<br>")});i.on("themeLoaded",function(){i.fireOnce("editingBlockReady")});i.on("uiReady",function(){i.setMode(i.config.startupMode)});i.on("afterSetData",function(){if(!t){function r(){t=!0,n(i).loadData(i.getData()),t=!1}if(i.mode)r();else i.on("mode",function(){r(),i.removeListener("mode",arguments.callee)})}});i.on("beforeGetData",function(){!t&&i.mode&&(t=!0,i.setData(n(i).getData()),t=!1)});i.on("getSnapshot",function(t){i.mode&&(t.data=n(i).getSnapshotData())});i.on("loadSnapshot",function(t){i.mode&&n(i).loadSnapshotData(t.data)});i.on("mode",function(n){var t,r;n.removeListener(),t=i.container,CKEDITOR.env.webkit&&CKEDITOR.env.version<528&&(r=i.config.tabIndex||i.element.getAttribute("tabindex")||0,t=t.append(CKEDITOR.dom.element.createFromHtml('<input tabindex="'+r+'" style="position:absolute; left:-10000">')));t.on("focus",function(){i.focus()});i.config.startupFocus&&i.focus(),setTimeout(function(){i.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,i)})})}}}),CKEDITOR.editor.prototype.mode="",CKEDITOR.editor.prototype.addMode=function(n,t){t.name=n,(this._.modes||(this._.modes={}))[n]=t},CKEDITOR.editor.prototype.setMode=function(t){var i,r=this.getThemeSpace("contents"),e=this.checkDirty(),u,f;if(this.mode){if(t==this.mode)return;this.fire("beforeModeUnload"),u=n(this),i=u.getData(),u.unload(r),this.mode=""}if(r.setHtml(""),f=n(this,t),!f)throw'[CKEDITOR.editor.setMode] Unknown mode "'+t+'".';if(!e)this.on("mode",function(){this.resetDirty(),this.removeListener("mode",arguments.callee)});f.load(r,typeof i!="string"?this.getData():i)},CKEDITOR.editor.prototype.focus=function(){var t=n(this);t&&t.focus()}})(),CKEDITOR.config.startupMode="wysiwyg",CKEDITOR.config.startupFocus=!1,CKEDITOR.config.editingBlock=!0;