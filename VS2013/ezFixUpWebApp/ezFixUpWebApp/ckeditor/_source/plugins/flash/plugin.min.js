(function(){function t(n){return u.test(n)?n+"px":n}function i(n){var t=n.attributes;return t.type=="application/x-shockwave-flash"||r.test(t.src||"")}function n(n,i){var r=n.createFakeParserElement(i,"cke_flash","flash",!0),u=r.attributes.style||"",f=i.attributes.width,e=i.attributes.height;return typeof f!="undefined"&&(u=r.attributes.style=u+"width:"+t(f)+";"),typeof e!="undefined"&&(u=r.attributes.style=u+"height:"+t(e)+";"),r}var r=/\.swf(?:$|\?)/i,u=/^\d+(?:\.\d+)?$/;CKEDITOR.plugins.add("flash",{init:function(n){n.addCommand("flash",new CKEDITOR.dialogCommand("flash")),n.ui.addButton("Flash",{label:n.lang.common.flash,command:"flash"}),CKEDITOR.dialog.add("flash",this.path+"dialogs/flash.js"),n.addCss("img.cke_flash{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}"),n.addMenuItems&&n.addMenuItems({flash:{label:n.lang.flash.properties,command:"flash",group:"flash"}}),n.contextMenu&&n.contextMenu.addListener(function(n){if(n&&n.is("img")&&n.getAttribute("_cke_real_element_type")=="flash")return{flash:CKEDITOR.TRISTATE_OFF}})},afterInit:function(t){var r=t.dataProcessor,u=r&&r.dataFilter;u&&u.addRules({elements:{"cke:object":function(r){var f=r.attributes,e=f.classid&&String(f.classid).toLowerCase(),u;if(!e){for(u=0;u<r.children.length;u++)if(r.children[u].name=="cke:embed")return i(r.children[u])?n(t,r):null;return null}return n(t,r)},"cke:embed":function(r){return i(r)?n(t,r):null}}},5)},requires:["fakeobjects"]})})(),CKEDITOR.tools.extend(CKEDITOR.config,{flashEmbedTagOnly:!1,flashAddEmbedTag:!0,flashConvertOnEdit:!1});