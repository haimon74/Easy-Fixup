CKEDITOR.plugins.add("forms",{init:function(n){var t=n.lang,i,r;n.addCss("form{border: 1px dotted #FF0000;padding: 2px;}"),i=function(i,r,u){n.addCommand(r,new CKEDITOR.dialogCommand(r)),n.ui.addButton(i,{label:t.common[i.charAt(0).toLowerCase()+i.slice(1)],command:r}),CKEDITOR.dialog.add(r,u)},r=this.path+"dialogs/",i("Form","form",r+"form.js"),i("Checkbox","checkbox",r+"checkbox.js"),i("Radio","radio",r+"radio.js"),i("TextField","textfield",r+"textfield.js"),i("Textarea","textarea",r+"textarea.js"),i("Select","select",r+"select.js"),i("Button","button",r+"button.js"),i("ImageButton","imagebutton",CKEDITOR.plugins.getPath("image")+"dialogs/image.js"),i("HiddenField","hiddenfield",r+"hiddenfield.js"),n.addMenuItems&&n.addMenuItems({form:{label:t.form.menu,command:"form",group:"form"},checkbox:{label:t.checkboxAndRadio.checkboxTitle,command:"checkbox",group:"checkbox"},radio:{label:t.checkboxAndRadio.radioTitle,command:"radio",group:"radio"},textfield:{label:t.textfield.title,command:"textfield",group:"textfield"},hiddenfield:{label:t.hidden.title,command:"hiddenfield",group:"hiddenfield"},imagebutton:{label:t.image.titleButton,command:"imagebutton",group:"imagebutton"},button:{label:t.button.title,command:"button",group:"button"},select:{label:t.select.title,command:"select",group:"select"},textarea:{label:t.textarea.title,command:"textarea",group:"textarea"}}),n.contextMenu&&(n.contextMenu.addListener(function(n){if(n&&n.hasAscendant("form",!0))return{form:CKEDITOR.TRISTATE_OFF}}),n.contextMenu.addListener(function(n){var i,t;if(n){if(i=n.getName(),i=="select")return{select:CKEDITOR.TRISTATE_OFF};if(i=="textarea")return{textarea:CKEDITOR.TRISTATE_OFF};if(i=="input"){if(t=n.getAttribute("type"),t=="text"||t=="password")return{textfield:CKEDITOR.TRISTATE_OFF};if(t=="button"||t=="submit"||t=="reset")return{button:CKEDITOR.TRISTATE_OFF};if(t=="checkbox")return{checkbox:CKEDITOR.TRISTATE_OFF};if(t=="radio")return{radio:CKEDITOR.TRISTATE_OFF};if(t=="image")return{imagebutton:CKEDITOR.TRISTATE_OFF}}if(i=="img"&&n.getAttribute("_cke_real_element_type")=="hiddenfield")return{hiddenfield:CKEDITOR.TRISTATE_OFF}}}))},afterInit:function(n){if(CKEDITOR.env.ie){var t=n.dataProcessor,i=t&&t.htmlFilter;i&&i.addRules({elements:{input:function(n){var t=n.attributes,i=t.type;(i=="checkbox"||i=="radio")&&t.value=="on"&&delete t.value}}})}},requires:["image"]}),CKEDITOR.env.ie&&(CKEDITOR.dom.element.prototype.hasAttribute=function(n){var i=this.$.attributes.getNamedItem(n),t;if(this.getName()=="input")switch(n){case"class":return this.$.className.length>0;case"checked":return!!this.$.checked;case"value":if(t=this.getAttribute("type"),t=="checkbox"||t=="radio")return this.$.value!="on"}return!!(i&&i.specified)});