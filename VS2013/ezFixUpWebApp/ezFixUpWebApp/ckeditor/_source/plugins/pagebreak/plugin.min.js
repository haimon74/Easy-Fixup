CKEDITOR.plugins.add("pagebreak",{init:function(n){n.addCommand("pagebreak",CKEDITOR.plugins.pagebreakCmd),n.ui.addButton("PageBreak",{label:n.lang.pagebreak,command:"pagebreak"}),n.addCss("img.cke_pagebreak{background-image: url("+CKEDITOR.getUrl(this.path+"images/pagebreak.gif")+");background-position: center center;background-repeat: no-repeat;clear: both;display: block;float: none;width: 100%;border-top: #999999 1px dotted;border-bottom: #999999 1px dotted;height: 5px;}")},afterInit:function(n){var t=n.dataProcessor,i=t&&t.dataFilter;i&&i.addRules({elements:{div:function(t){var r=t.attributes,u=r&&r.style,i=u&&t.children.length==1&&t.children[0],f=i&&i.name=="span"&&i.attributes.style;if(f&&/page-break-after\s*:\s*always/i.test(u)&&/display\s*:\s*none/i.test(f))return n.createFakeParserElement(t,"cke_pagebreak","div")}}})},requires:["fakeobjects"]}),CKEDITOR.plugins.pagebreakCmd={exec:function(n){var t=CKEDITOR.dom.element.createFromHtml('<div style="page-break-after: always;"><span style="display: none;">&nbsp;<\/span><\/div>'),r,u,i;for(t=n.createFakeElement(t,"cke_pagebreak","div"),r=n.getSelection().getRanges(),i=0;i<r.length;i++)u=r[i],i>0&&(t=t.clone(!0)),u.splitBlock("p"),u.insertNode(t)}};