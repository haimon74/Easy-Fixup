CKEDITOR.dialog.add("paste",function(n){var t=CKEDITOR.env.isCustomDomain();return{title:n.lang.clipboard.title,minWidth:CKEDITOR.env.ie&&CKEDITOR.env.quirks?370:350,minHeight:CKEDITOR.env.quirks?250:245,htmlToLoad:'<!doctype html><script type="text/javascript">window.onload = function(){if ( '+CKEDITOR.env.ie+' ) document.body.contentEditable = "true";else document.designMode = "on";var iframe = new window.parent.CKEDITOR.dom.element( frameElement );var dialog = iframe.getCustomData( "dialog" );iframe.getFrameDocument().on( "keydown", function( e )\t\t\t\t\t\t{\t\t\t\t\t\t\tif ( e.data.getKeystroke() == 27 )\t\t\t\t\t\t\t\tdialog.hide();\t\t\t\t\t\t});};<\/script><style>body { margin: 3px; height: 95%; } <\/style><body><\/body>',onShow:function(){var n=this,f,u;CKEDITOR.env.ie&&(n.getParentEditor().document.getBody().$.contentEditable="false"),n.parts.dialog.$.offsetHeight;var r=n.getContentElement("general","editing_area").getElement(),i=CKEDITOR.dom.element.createFromHtml('<iframe src="javascript:void(0)" frameborder="0" allowtransparency="1"><\/iframe>'),e=n.getParentEditor().lang;i.setStyles({width:"346px",height:"130px","background-color":"white",border:"1px solid black"}),i.setCustomData("dialog",n),f=e.editorTitle.replace("%1",e.clipboard.title),CKEDITOR.env.ie?r.setHtml('<legend style="position:absolute;top:-1000000px;left:-1000000px;">'+CKEDITOR.tools.htmlEncode(f)+"<\/legend>"):(r.setHtml(""),r.setAttributes({role:"region",title:f}),i.setAttributes({role:"region",title:" "})),r.append(i),CKEDITOR.env.ie&&r.setStyle("height",i.$.offsetHeight+2+"px"),t?(CKEDITOR._cke_htmlToLoad=n.definition.htmlToLoad,i.setAttribute("src",'javascript:void( (function(){document.open();document.domain="'+document.domain+'";document.write( window.parent.CKEDITOR._cke_htmlToLoad );delete window.parent.CKEDITOR._cke_htmlToLoad;document.close();})() )')):(u=i.$.contentWindow.document,u.open(),u.write(n.definition.htmlToLoad),u.close())},onHide:function(){CKEDITOR.env.ie&&(this.getParentEditor().document.getBody().$.contentEditable="true")},onLoad:function(){(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&n.lang.dir=="rtl"&&this.parts.contents.setStyle("overflow","hidden")},onOk:function(){var n=this.getContentElement("general","editing_area").getElement(),t=n.getElementsByTag("iframe").getItem(0),i=this.getParentEditor(),r=t.$.contentWindow.document.body.innerHTML;setTimeout(function(){i.fire("paste",{html:r})},0)},contents:[{id:"general",label:n.lang.common.generalTab,elements:[{type:"html",id:"securityMsg",html:'<div style="white-space:normal;width:340px;">'+n.lang.clipboard.securityMsg+"<\/div>"},{type:"html",id:"pasteMsg",html:'<div style="white-space:normal;width:340px;">'+n.lang.clipboard.pasteMsg+"<\/div>"},{type:"html",id:"editing_area",style:"width: 100%; height: 100%;",html:"<fieldset><\/fieldset>",focus:function(){var t=this.getElement(),n=t.getElementsByTag("iframe");n.count()<1||(n=n.getItem(0),setTimeout(function(){n.$.contentWindow.focus()},500))}}]}]}});